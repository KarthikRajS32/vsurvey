(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function hT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function QR(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var a=!1;try{a=this instanceof r}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var a=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return n[r]}})}),t}var Mp={exports:{}},jc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function YR(){if(Ib)return jc;Ib=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:r,key:c,ref:a!==void 0?a:null,props:l}}return jc.Fragment=e,jc.jsx=t,jc.jsxs=t,jc}var Nb;function WR(){return Nb||(Nb=1,Mp.exports=YR()),Mp.exports}var v=WR(),Up={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function XR(){if(kb)return Me;kb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function T(P){return P===null||typeof P!="object"?null:(P=b&&P[b]||P["@@iterator"],typeof P=="function"?P:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,L={};function V(P,J,he){this.props=P,this.context=J,this.refs=L,this.updater=he||C}V.prototype.isReactComponent={},V.prototype.setState=function(P,J){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,J,"setState")},V.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function $(){}$.prototype=V.prototype;function Y(P,J,he){this.props=P,this.context=J,this.refs=L,this.updater=he||C}var K=Y.prototype=new $;K.constructor=Y,N(K,V.prototype),K.isPureReactComponent=!0;var ee=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},ae=Object.prototype.hasOwnProperty;function M(P,J,he,ce,fe,Ne){return he=Ne.ref,{$$typeof:n,type:P,key:J,ref:he!==void 0?he:null,props:Ne}}function S(P,J){return M(P.type,J,void 0,void 0,void 0,P.props)}function R(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function O(P){var J={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(he){return J[he]})}var j=/\/+/g;function k(P,J){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):J.toString(36)}function I(){}function Se(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(I,I):(P.status="pending",P.then(function(J){P.status==="pending"&&(P.status="fulfilled",P.value=J)},function(J){P.status==="pending"&&(P.status="rejected",P.reason=J)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function be(P,J,he,ce,fe){var Ne=typeof P;(Ne==="undefined"||Ne==="boolean")&&(P=null);var Te=!1;if(P===null)Te=!0;else switch(Ne){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(P.$$typeof){case n:case e:Te=!0;break;case y:return Te=P._init,be(Te(P._payload),J,he,ce,fe)}}if(Te)return fe=fe(P),Te=ce===""?"."+k(P,0):ce,ee(fe)?(he="",Te!=null&&(he=Te.replace(j,"$&/")+"/"),be(fe,J,he,"",function(at){return at})):fe!=null&&(R(fe)&&(fe=S(fe,he+(fe.key==null||P&&P.key===fe.key?"":(""+fe.key).replace(j,"$&/")+"/")+Te)),J.push(fe)),1;Te=0;var Ve=ce===""?".":ce+":";if(ee(P))for(var me=0;me<P.length;me++)ce=P[me],Ne=Ve+k(ce,me),Te+=be(ce,J,he,Ne,fe);else if(me=T(P),typeof me=="function")for(P=me.call(P),me=0;!(ce=P.next()).done;)ce=ce.value,Ne=Ve+k(ce,me++),Te+=be(ce,J,he,Ne,fe);else if(Ne==="object"){if(typeof P.then=="function")return be(Se(P),J,he,ce,fe);throw J=String(P),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Te}function B(P,J,he){if(P==null)return P;var ce=[],fe=0;return be(P,ce,"","",function(Ne){return J.call(he,Ne,fe++)}),ce}function oe(P){if(P._status===-1){var J=P._result;J=J(),J.then(function(he){(P._status===0||P._status===-1)&&(P._status=1,P._result=he)},function(he){(P._status===0||P._status===-1)&&(P._status=2,P._result=he)}),P._status===-1&&(P._status=0,P._result=J)}if(P._status===1)return P._result.default;throw P._result}var te=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function ue(){}return Me.Children={map:B,forEach:function(P,J,he){B(P,function(){J.apply(this,arguments)},he)},count:function(P){var J=0;return B(P,function(){J++}),J},toArray:function(P){return B(P,function(J){return J})||[]},only:function(P){if(!R(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Me.Component=V,Me.Fragment=t,Me.Profiler=a,Me.PureComponent=Y,Me.StrictMode=r,Me.Suspense=m,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Me.__COMPILER_RUNTIME={__proto__:null,c:function(P){return le.H.useMemoCache(P)}},Me.cache=function(P){return function(){return P.apply(null,arguments)}},Me.cloneElement=function(P,J,he){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=N({},P.props),fe=P.key,Ne=void 0;if(J!=null)for(Te in J.ref!==void 0&&(Ne=void 0),J.key!==void 0&&(fe=""+J.key),J)!ae.call(J,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&J.ref===void 0||(ce[Te]=J[Te]);var Te=arguments.length-2;if(Te===1)ce.children=he;else if(1<Te){for(var Ve=Array(Te),me=0;me<Te;me++)Ve[me]=arguments[me+2];ce.children=Ve}return M(P.type,fe,void 0,void 0,Ne,ce)},Me.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Me.createElement=function(P,J,he){var ce,fe={},Ne=null;if(J!=null)for(ce in J.key!==void 0&&(Ne=""+J.key),J)ae.call(J,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(fe[ce]=J[ce]);var Te=arguments.length-2;if(Te===1)fe.children=he;else if(1<Te){for(var Ve=Array(Te),me=0;me<Te;me++)Ve[me]=arguments[me+2];fe.children=Ve}if(P&&P.defaultProps)for(ce in Te=P.defaultProps,Te)fe[ce]===void 0&&(fe[ce]=Te[ce]);return M(P,Ne,void 0,void 0,null,fe)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(P){return{$$typeof:d,render:P}},Me.isValidElement=R,Me.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:oe}},Me.memo=function(P,J){return{$$typeof:p,type:P,compare:J===void 0?null:J}},Me.startTransition=function(P){var J=le.T,he={};le.T=he;try{var ce=P(),fe=le.S;fe!==null&&fe(he,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ue,te)}catch(Ne){te(Ne)}finally{le.T=J}},Me.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Me.use=function(P){return le.H.use(P)},Me.useActionState=function(P,J,he){return le.H.useActionState(P,J,he)},Me.useCallback=function(P,J){return le.H.useCallback(P,J)},Me.useContext=function(P){return le.H.useContext(P)},Me.useDebugValue=function(){},Me.useDeferredValue=function(P,J){return le.H.useDeferredValue(P,J)},Me.useEffect=function(P,J,he){var ce=le.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(P,J)},Me.useId=function(){return le.H.useId()},Me.useImperativeHandle=function(P,J,he){return le.H.useImperativeHandle(P,J,he)},Me.useInsertionEffect=function(P,J){return le.H.useInsertionEffect(P,J)},Me.useLayoutEffect=function(P,J){return le.H.useLayoutEffect(P,J)},Me.useMemo=function(P,J){return le.H.useMemo(P,J)},Me.useOptimistic=function(P,J){return le.H.useOptimistic(P,J)},Me.useReducer=function(P,J,he){return le.H.useReducer(P,J,he)},Me.useRef=function(P){return le.H.useRef(P)},Me.useState=function(P){return le.H.useState(P)},Me.useSyncExternalStore=function(P,J,he){return le.H.useSyncExternalStore(P,J,he)},Me.useTransition=function(){return le.H.useTransition()},Me.version="19.1.1",Me}var Ob;function ay(){return Ob||(Ob=1,Up.exports=XR()),Up.exports}var D=ay();const Ma=hT(D);var Lp={exports:{}},Mc={},Vp={exports:{}},zp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Db;function JR(){return Db||(Db=1,(function(n){function e(B,oe){var te=B.length;B.push(oe);e:for(;0<te;){var ue=te-1>>>1,P=B[ue];if(0<a(P,oe))B[ue]=oe,B[te]=P,te=ue;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var oe=B[0],te=B.pop();if(te!==oe){B[0]=te;e:for(var ue=0,P=B.length,J=P>>>1;ue<J;){var he=2*(ue+1)-1,ce=B[he],fe=he+1,Ne=B[fe];if(0>a(ce,te))fe<P&&0>a(Ne,ce)?(B[ue]=Ne,B[fe]=te,ue=fe):(B[ue]=ce,B[he]=te,ue=he);else if(fe<P&&0>a(Ne,te))B[ue]=Ne,B[fe]=te,ue=fe;else break e}}return oe}function a(B,oe){var te=B.sortIndex-oe.sortIndex;return te!==0?te:B.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],p=[],y=1,b=null,T=3,C=!1,N=!1,L=!1,V=!1,$=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ee(B){for(var oe=t(p);oe!==null;){if(oe.callback===null)r(p);else if(oe.startTime<=B)r(p),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(p)}}function le(B){if(L=!1,ee(B),!N)if(t(m)!==null)N=!0,ae||(ae=!0,k());else{var oe=t(p);oe!==null&&be(le,oe.startTime-B)}}var ae=!1,M=-1,S=5,R=-1;function O(){return V?!0:!(n.unstable_now()-R<S)}function j(){if(V=!1,ae){var B=n.unstable_now();R=B;var oe=!0;try{e:{N=!1,L&&(L=!1,Y(M),M=-1),C=!0;var te=T;try{t:{for(ee(B),b=t(m);b!==null&&!(b.expirationTime>B&&O());){var ue=b.callback;if(typeof ue=="function"){b.callback=null,T=b.priorityLevel;var P=ue(b.expirationTime<=B);if(B=n.unstable_now(),typeof P=="function"){b.callback=P,ee(B),oe=!0;break t}b===t(m)&&r(m),ee(B)}else r(m);b=t(m)}if(b!==null)oe=!0;else{var J=t(p);J!==null&&be(le,J.startTime-B),oe=!1}}break e}finally{b=null,T=te,C=!1}oe=void 0}}finally{oe?k():ae=!1}}}var k;if(typeof K=="function")k=function(){K(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Se=I.port2;I.port1.onmessage=j,k=function(){Se.postMessage(null)}}else k=function(){$(j,0)};function be(B,oe){M=$(function(){B(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(B){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var te=T;T=oe;try{return B()}finally{T=te}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(B,oe){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var te=T;T=B;try{return oe()}finally{T=te}},n.unstable_scheduleCallback=function(B,oe,te){var ue=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ue+te:ue):te=ue,B){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=te+P,B={id:y++,callback:oe,priorityLevel:B,startTime:te,expirationTime:P,sortIndex:-1},te>ue?(B.sortIndex=te,e(p,B),t(m)===null&&B===t(p)&&(L?(Y(M),M=-1):L=!0,be(le,te-ue))):(B.sortIndex=P,e(m,B),N||C||(N=!0,ae||(ae=!0,k()))),B},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(B){var oe=T;return function(){var te=T;T=oe;try{return B.apply(this,arguments)}finally{T=te}}}})(zp)),zp}var Pb;function ZR(){return Pb||(Pb=1,Vp.exports=JR()),Vp.exports}var Bp={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jb;function eC(){if(jb)return ln;jb=1;var n=ay();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:m,containerInfo:p,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ln.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},ln.flushSync=function(m){var p=c.T,y=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=p,r.p=y,r.d.f()}},ln.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(m,p))},ln.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},ln.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,b=d(y,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,C=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:C}):y==="script"&&r.d.X(m,{crossOrigin:b,integrity:T,fetchPriority:C,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ln.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(m)},ln.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,b=d(y,p.crossOrigin);r.d.L(m,y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ln.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);r.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(m)},ln.requestFormReset=function(m){r.d.r(m)},ln.unstable_batchedUpdates=function(m,p){return m(p)},ln.useFormState=function(m,p,y){return c.H.useFormState(m,p,y)},ln.useFormStatus=function(){return c.H.useHostTransitionStatus()},ln.version="19.1.1",ln}var Mb;function tC(){if(Mb)return Bp.exports;Mb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bp.exports=eC(),Bp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function nC(){if(Ub)return Mc;Ub=1;var n=ZR(),e=ay(),t=tC();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var i=s,o=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(o=i.return),s=i.return;while(s)}return i.tag===3?o:null}function c(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function d(s){if(l(s)!==s)throw Error(r(188))}function m(s){var i=s.alternate;if(!i){if(i=l(s),i===null)throw Error(r(188));return i!==s?null:s}for(var o=s,u=i;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),s;if(g===u)return d(f),i;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,x=f.child;x;){if(x===o){E=!0,o=f,u=g;break}if(x===u){E=!0,u=f,o=g;break}x=x.sibling}if(!E){for(x=g.child;x;){if(x===o){E=!0,o=g,u=f;break}if(x===u){E=!0,u=g,o=f;break}x=x.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?s:i}function p(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=p(s),i!==null)return i;s=s.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function k(s){return s===null||typeof s!="object"?null:(s=j&&s[j]||s["@@iterator"],typeof s=="function"?s:null)}var I=Symbol.for("react.client.reference");function Se(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===I?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case V:return"Profiler";case L:return"StrictMode";case le:return"Suspense";case ae:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case K:return(s.displayName||"Context")+".Provider";case Y:return(s._context.displayName||"Context")+".Consumer";case ee:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return i=s.displayName||null,i!==null?i:Se(s.type)||"Memo";case S:i=s._payload,s=s._init;try{return Se(s(i))}catch{}}return null}var be=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ue=[],P=-1;function J(s){return{current:s}}function he(s){0>P||(s.current=ue[P],ue[P]=null,P--)}function ce(s,i){P++,ue[P]=s.current,s.current=i}var fe=J(null),Ne=J(null),Te=J(null),Ve=J(null);function me(s,i){switch(ce(Te,i),ce(Ne,s),ce(fe,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?sb(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=sb(i),s=rb(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}he(fe),ce(fe,s)}function at(){he(fe),he(Ne),he(Te)}function Vn(s){s.memoizedState!==null&&ce(Ve,s);var i=fe.current,o=rb(i,s.type);i!==o&&(ce(Ne,s),ce(fe,o))}function zn(s){Ne.current===s&&(he(fe),he(Ne)),Ve.current===s&&(he(Ve),Nc._currentValue=te)}var rs=Object.prototype.hasOwnProperty,Fi=n.unstable_scheduleCallback,Wa=n.unstable_cancelCallback,Uf=n.unstable_shouldYield,Nl=n.unstable_requestPaint,wn=n.unstable_now,Du=n.unstable_getCurrentPriorityLevel,Pt=n.unstable_ImmediatePriority,Ft=n.unstable_UserBlockingPriority,Js=n.unstable_NormalPriority,Lf=n.unstable_LowPriority,kl=n.unstable_IdlePriority,Vf=n.log,Hi=n.unstable_setDisableYieldValue,jr=null,rn=null;function Bn(s){if(typeof Vf=="function"&&Hi(s),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(jr,s)}catch{}}var mn=Math.clz32?Math.clz32:ju,zf=Math.log,Pu=Math.LN2;function ju(s){return s>>>=0,s===0?32:31-(zf(s)/Pu|0)|0}var Ss=256,Mr=4194304;function is(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function qn(s,i,o){var u=s.pendingLanes;if(u===0)return 0;var f=0,g=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var x=u&134217727;return x!==0?(u=x&~g,u!==0?f=is(u):(E&=x,E!==0?f=is(E):o||(o=x&~s,o!==0&&(f=is(o))))):(x=u&~g,x!==0?f=is(x):E!==0?f=is(E):o||(o=u&~s,o!==0&&(f=is(o)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,o=i&-i,g>=o||g===32&&(o&4194048)!==0)?i:f}function Ur(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function Xa(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ol(){var s=Ss;return Ss<<=1,(Ss&4194048)===0&&(Ss=256),s}function Lr(){var s=Mr;return Mr<<=1,(Mr&62914560)===0&&(Mr=4194304),s}function Ja(s){for(var i=[],o=0;31>o;o++)i.push(s);return i}function wt(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Mu(s,i,o,u,f,g){var E=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var x=s.entanglements,U=s.expirationTimes,G=s.hiddenUpdates;for(o=E&~o;0<o;){var Z=31-mn(o),re=1<<Z;x[Z]=0,U[Z]=-1;var Q=G[Z];if(Q!==null)for(G[Z]=null,Z=0;Z<Q.length;Z++){var W=Q[Z];W!==null&&(W.lane&=-536870913)}o&=~re}u!==0&&Vr(s,u,0),g!==0&&f===0&&s.tag!==0&&(s.suspendedLanes|=g&~(E&~i))}function Vr(s,i,o){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-mn(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|o&4194090}function zr(s,i){var o=s.entangledLanes|=i;for(s=s.entanglements;o;){var u=31-mn(o),f=1<<u;f&i|s[u]&i&&(s[u]|=i),o&=~f}}function Dl(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Pl(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Zs(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:Tb(s.type))}function Bf(s,i){var o=oe.p;try{return oe.p=s,i()}finally{oe.p=o}}var xs=Math.random().toString(36).slice(2),Et="__reactFiber$"+xs,Xt="__reactProps$"+xs,er="__reactContainer$"+xs,Gi="__reactEvents$"+xs,Ki="__reactListeners$"+xs,qf="__reactHandles$"+xs,as="__reactResources$"+xs,Br="__reactMarker$"+xs;function Za(s){delete s[Et],delete s[Xt],delete s[Gi],delete s[Ki],delete s[qf]}function As(s){var i=s[Et];if(i)return i;for(var o=s.parentNode;o;){if(i=o[er]||o[Et]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(s=lb(s);s!==null;){if(o=s[Et])return o;s=lb(s)}return i}s=o,o=s.parentNode}return null}function Rs(s){if(s=s[Et]||s[er]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function qr(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function $r(s){var i=s[as];return i||(i=s[as]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Tt(s){s[Br]=!0}var Uu=new Set,Qi={};function Cs(s,i){Is(s,i),Is(s+"Capture",i)}function Is(s,i){for(Qi[s]=i,s=0;s<i.length;s++)Uu.add(i[s])}var Yi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ns={},eo={};function $f(s){return rs.call(eo,s)?!0:rs.call(Ns,s)?!1:Yi.test(s)?eo[s]=!0:(Ns[s]=!0,!1)}function Wi(s,i,o){if($f(i))if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+o)}}function Xi(s,i,o){if(o===null)s.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+o)}}function $n(s,i,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(i,o,""+u)}}var Ji,to;function tr(s){if(Ji===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Ji=i&&i[1]||"",to=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ji+s+to}var no=!1;function so(s,i){if(!s||no)return"";no=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(W){var Q=W}Reflect.construct(s,[],re)}else{try{re.call()}catch(W){Q=W}s.call(re.prototype)}}else{try{throw Error()}catch(W){Q=W}(re=s())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],x=g[1];if(E&&x){var U=E.split(`
`),G=x.split(`
`);for(f=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(u===U.length||f===G.length)for(u=U.length-1,f=G.length-1;1<=u&&0<=f&&U[u]!==G[f];)f--;for(;1<=u&&0<=f;u--,f--)if(U[u]!==G[f]){if(u!==1||f!==1)do if(u--,f--,0>f||U[u]!==G[f]){var Z=`
`+U[u].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=u&&0<=f);break}}}finally{no=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?tr(o):""}function Ff(s){switch(s.tag){case 26:case 27:case 5:return tr(s.type);case 16:return tr("Lazy");case 13:return tr("Suspense");case 19:return tr("SuspenseList");case 0:case 15:return so(s.type,!1);case 11:return so(s.type.render,!1);case 1:return so(s.type,!0);case 31:return tr("Activity");default:return""}}function os(s){try{var i="";do i+=Ff(s),s=s.return;while(s);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function gt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Fr(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Zi(s){var i=Fr(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),u=""+s[i];if(!s.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(s,i,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function Hr(s){s._valueTracker||(s._valueTracker=Zi(s))}function tt(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return s&&(u=Fr(s)?s.checked?"true":"false":s.value),s=u,s!==o?(i.setValue(s),!0):!1}function nr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ea=/[\n"\\]/g;function Ht(s){return s.replace(ea,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function jl(s,i,o,u,f,g,E,x){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),i!=null?E==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+gt(i)):s.value!==""+gt(i)&&(s.value=""+gt(i)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),i!=null?Ul(s,E,gt(i)):o!=null?Ul(s,E,gt(o)):u!=null&&s.removeAttribute("value"),f==null&&g!=null&&(s.defaultChecked=!!g),f!=null&&(s.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.name=""+gt(x):s.removeAttribute("name")}function Ml(s,i,o,u,f,g,E,x){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(s.type=g),i!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;o=o!=null?""+gt(o):"",i=i!=null?""+gt(i):o,x||i===s.value||(s.value=i),s.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=x?s.checked:!!u,s.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function Ul(s,i,o){i==="number"&&nr(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Gr(s,i,o,u){if(s=s.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<s.length;o++)f=i.hasOwnProperty("$"+s[o].value),s[o].selected!==f&&(s[o].selected=f),f&&u&&(s[o].defaultSelected=!0)}else{for(o=""+gt(o),i=null,f=0;f<s.length;f++){if(s[f].value===o){s[f].selected=!0,u&&(s[f].defaultSelected=!0);return}i!==null||s[f].disabled||(i=s[f])}i!==null&&(i.selected=!0)}}function Lu(s,i,o){if(i!=null&&(i=""+gt(i),i!==s.value&&(s.value=i),o==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=o!=null?""+gt(o):""}function Vu(s,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(be(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=gt(i),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u)}function Fn(s,i){if(i){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=i;return}}s.textContent=i}var sr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ll(s,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,o):typeof o!="number"||o===0||sr.has(i)?i==="float"?s.cssFloat=o:s[i]=(""+o).trim():s[i]=o+"px"}function Vl(s,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Ll(s,f,u)}else for(var g in i)i.hasOwnProperty(g)&&Ll(s,g,i[g])}function ro(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ls(s){return Bu.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var zl=null;function Bl(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Kr=null,pn=null;function qu(s){var i=Rs(s);if(i&&(s=i.stateNode)){var o=s[Xt]||null;e:switch(s=i.stateNode,i.type){case"input":if(jl(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ht(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==s&&u.form===s.form){var f=u[Xt]||null;if(!f)throw Error(r(90));jl(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===s.form&&tt(u)}break e;case"textarea":Lu(s,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Gr(s,!!o.multiple,i,!1)}}}var ta=!1;function na(s,i,o){if(ta)return s(i,o);ta=!0;try{var u=s(i);return u}finally{if(ta=!1,(Kr!==null||pn!==null)&&(kh(),Kr&&(i=Kr,s=pn,pn=Kr=null,qu(i),s)))for(i=0;i<s.length;i++)qu(s[i])}}function Qr(s,i){var o=s.stateNode;if(o===null)return null;var u=o[Xt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rr=!1;if(gn)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){rr=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{rr=!1}var Hn=null,ot=null,io=null;function $u(){if(io)return io;var s,i=ot,o=i.length,u,f="value"in Hn?Hn.value:Hn.textContent,g=f.length;for(s=0;s<o&&i[s]===f[s];s++);var E=o-s;for(u=1;u<=E&&i[o-u]===f[g-u];u++);return io=f.slice(s,1<u?1-u:void 0)}function sa(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function ra(){return!0}function ql(){return!1}function jt(s){function i(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var x in s)s.hasOwnProperty(x)&&(o=s[x],this[x]=o?o(g):g[x]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ra:ql,this.isPropagationStopped=ql,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),i}var an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ia=jt(an),aa=y({},an,{view:0,detail:0}),oa=jt(aa),ao,la,ks,ca=y({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:co,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ks&&(ks&&s.type==="mousemove"?(ao=s.screenX-ks.screenX,la=s.screenY-ks.screenY):la=ao=0,ks=s),ao)},movementY:function(s){return"movementY"in s?s.movementY:la}}),ua=jt(ca),Hf=y({},ca,{dataTransfer:0}),Fu=jt(Hf),ha=y({},aa,{relatedTarget:0}),oo=jt(ha),Hu=y({},an,{animationName:0,elapsedTime:0,pseudoElement:0}),$l=jt(Hu),Fl=y({},an,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Gu=jt(Fl),lo=y({},an,{data:0}),Hl=jt(lo),Ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ir={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yu(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Qu[s])?!!i[s]:!1}function co(){return Yu}var Wu=y({},aa,{key:function(s){if(s.key){var i=Ku[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=sa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ir[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:co,charCode:function(s){return s.type==="keypress"?sa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?sa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),uo=jt(Wu),yn=y({},ca,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gl=jt(yn),Xu=y({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:co}),Wr=jt(Xu),h=y({},an,{propertyName:0,elapsedTime:0,pseudoElement:0}),_=jt(h),w=y({},ca,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),A=jt(w),H=y({},an,{newState:0,oldState:0}),X=jt(H),de=[9,13,27,32],Oe=gn&&"CompositionEvent"in window,dt=null;gn&&"documentMode"in document&&(dt=document.documentMode);var Je=gn&&"TextEvent"in window&&!dt,St=gn&&(!Oe||dt&&8<dt&&11>=dt),In=" ",Os=!1;function cs(s,i){switch(s){case"keyup":return de.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function us(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var hs=!1;function Kl(s,i){switch(s){case"compositionend":return us(i);case"keypress":return i.which!==32?null:(Os=!0,In);case"textInput":return s=i.data,s===In&&Os?null:s;default:return null}}function w1(s,i){if(hs)return s==="compositionend"||!Oe&&cs(s,i)?(s=$u(),io=ot=Hn=null,hs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return St&&i.locale!=="ko"?null:i.data;default:return null}}var E1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yv(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!E1[s.type]:i==="textarea"}function vv(s,i,o,u){Kr?pn?pn.push(u):pn=[u]:Kr=u,i=Uh(i,"onChange"),0<i.length&&(o=new ia("onChange","change",null,o,u),s.push({event:o,listeners:i}))}var Ql=null,Yl=null;function T1(s){J0(s,0)}function Ju(s){var i=qr(s);if(tt(i))return s}function _v(s,i){if(s==="change")return i}var bv=!1;if(gn){var Gf;if(gn){var Kf="oninput"in document;if(!Kf){var wv=document.createElement("div");wv.setAttribute("oninput","return;"),Kf=typeof wv.oninput=="function"}Gf=Kf}else Gf=!1;bv=Gf&&(!document.documentMode||9<document.documentMode)}function Ev(){Ql&&(Ql.detachEvent("onpropertychange",Tv),Yl=Ql=null)}function Tv(s){if(s.propertyName==="value"&&Ju(Yl)){var i=[];vv(i,Yl,s,Bl(s)),na(T1,i)}}function S1(s,i,o){s==="focusin"?(Ev(),Ql=i,Yl=o,Ql.attachEvent("onpropertychange",Tv)):s==="focusout"&&Ev()}function x1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ju(Yl)}function A1(s,i){if(s==="click")return Ju(i)}function R1(s,i){if(s==="input"||s==="change")return Ju(i)}function C1(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Nn=typeof Object.is=="function"?Object.is:C1;function Wl(s,i){if(Nn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var o=Object.keys(s),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!rs.call(i,f)||!Nn(s[f],i[f]))return!1}return!0}function Sv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function xv(s,i){var o=Sv(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=i&&u>=i)return{node:o,offset:i-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Sv(o)}}function Av(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?Av(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Rv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=nr(s.document);i instanceof s.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)s=i.contentWindow;else break;i=nr(s.document)}return i}function Qf(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var I1=gn&&"documentMode"in document&&11>=document.documentMode,ho=null,Yf=null,Xl=null,Wf=!1;function Cv(s,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Wf||ho==null||ho!==nr(u)||(u=ho,"selectionStart"in u&&Qf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Xl&&Wl(Xl,u)||(Xl=u,u=Uh(Yf,"onSelect"),0<u.length&&(i=new ia("onSelect","select",null,i,o),s.push({event:i,listeners:u}),i.target=ho)))}function da(s,i){var o={};return o[s.toLowerCase()]=i.toLowerCase(),o["Webkit"+s]="webkit"+i,o["Moz"+s]="moz"+i,o}var fo={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},Xf={},Iv={};gn&&(Iv=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function fa(s){if(Xf[s])return Xf[s];if(!fo[s])return s;var i=fo[s],o;for(o in i)if(i.hasOwnProperty(o)&&o in Iv)return Xf[s]=i[o];return s}var Nv=fa("animationend"),kv=fa("animationiteration"),Ov=fa("animationstart"),N1=fa("transitionrun"),k1=fa("transitionstart"),O1=fa("transitioncancel"),Dv=fa("transitionend"),Pv=new Map,Jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jf.push("scrollEnd");function ds(s,i){Pv.set(s,i),Cs(i,[s])}var jv=new WeakMap;function Gn(s,i){if(typeof s=="object"&&s!==null){var o=jv.get(s);return o!==void 0?o:(i={value:s,source:i,stack:os(i)},jv.set(s,i),i)}return{value:s,source:i,stack:os(i)}}var Kn=[],mo=0,Zf=0;function Zu(){for(var s=mo,i=Zf=mo=0;i<s;){var o=Kn[i];Kn[i++]=null;var u=Kn[i];Kn[i++]=null;var f=Kn[i];Kn[i++]=null;var g=Kn[i];if(Kn[i++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&Mv(o,f,g)}}function eh(s,i,o,u){Kn[mo++]=s,Kn[mo++]=i,Kn[mo++]=o,Kn[mo++]=u,Zf|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function em(s,i,o,u){return eh(s,i,o,u),th(s)}function po(s,i){return eh(s,null,null,i),th(s)}function Mv(s,i,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=s.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(s=g.stateNode,s===null||s._visibility&1||(f=!0)),s=g,g=g.return;return s.tag===3?(g=s.stateNode,f&&i!==null&&(f=31-mn(o),s=g.hiddenUpdates,u=s[f],u===null?s[f]=[i]:u.push(i),i.lane=o|536870912),g):null}function th(s){if(50<Ec)throw Ec=0,ap=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var go={};function D1(s,i,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(s,i,o,u){return new D1(s,i,o,u)}function tm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ar(s,i){var o=s.alternate;return o===null?(o=kn(s.tag,i,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=i,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,i=s.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function Uv(s,i){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function nh(s,i,o,u,f,g){var E=0;if(u=s,typeof s=="function")tm(s)&&(E=1);else if(typeof s=="string")E=jR(s,o,fe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=kn(31,o,i,f),s.elementType=R,s.lanes=g,s;case N:return ma(o.children,f,g,i);case L:E=8,f|=24;break;case V:return s=kn(12,o,i,f|2),s.elementType=V,s.lanes=g,s;case le:return s=kn(13,o,i,f),s.elementType=le,s.lanes=g,s;case ae:return s=kn(19,o,i,f),s.elementType=ae,s.lanes=g,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:case K:E=10;break e;case Y:E=9;break e;case ee:E=11;break e;case M:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(r(130,s===null?"null":typeof s,"")),u=null}return i=kn(E,o,i,f),i.elementType=s,i.type=u,i.lanes=g,i}function ma(s,i,o,u){return s=kn(7,s,u,i),s.lanes=o,s}function nm(s,i,o){return s=kn(6,s,null,i),s.lanes=o,s}function sm(s,i,o){return i=kn(4,s.children!==null?s.children:[],s.key,i),i.lanes=o,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var yo=[],vo=0,sh=null,rh=0,Qn=[],Yn=0,pa=null,or=1,lr="";function ga(s,i){yo[vo++]=rh,yo[vo++]=sh,sh=s,rh=i}function Lv(s,i,o){Qn[Yn++]=or,Qn[Yn++]=lr,Qn[Yn++]=pa,pa=s;var u=or;s=lr;var f=32-mn(u)-1;u&=~(1<<f),o+=1;var g=32-mn(i)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,or=1<<32-mn(i)+f|o<<f|u,lr=g+s}else or=1<<g|o<<f|u,lr=s}function rm(s){s.return!==null&&(ga(s,1),Lv(s,1,0))}function im(s){for(;s===sh;)sh=yo[--vo],yo[vo]=null,rh=yo[--vo],yo[vo]=null;for(;s===pa;)pa=Qn[--Yn],Qn[Yn]=null,lr=Qn[--Yn],Qn[Yn]=null,or=Qn[--Yn],Qn[Yn]=null}var vn=null,_t=null,We=!1,ya=null,Ds=!1,am=Error(r(519));function va(s){var i=Error(r(418,""));throw ec(Gn(i,s)),am}function Vv(s){var i=s.stateNode,o=s.type,u=s.memoizedProps;switch(i[Et]=s,i[Xt]=u,o){case"dialog":qe("cancel",i),qe("close",i);break;case"iframe":case"object":case"embed":qe("load",i);break;case"video":case"audio":for(o=0;o<Sc.length;o++)qe(Sc[o],i);break;case"source":qe("error",i);break;case"img":case"image":case"link":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"input":qe("invalid",i),Ml(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Hr(i);break;case"select":qe("invalid",i);break;case"textarea":qe("invalid",i),Vu(i,u.value,u.defaultValue,u.children),Hr(i)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||nb(i.textContent,o)?(u.popover!=null&&(qe("beforetoggle",i),qe("toggle",i)),u.onScroll!=null&&qe("scroll",i),u.onScrollEnd!=null&&qe("scrollend",i),u.onClick!=null&&(i.onclick=Lh),i=!0):i=!1,i||va(s)}function zv(s){for(vn=s.return;vn;)switch(vn.tag){case 5:case 13:Ds=!1;return;case 27:case 3:Ds=!0;return;default:vn=vn.return}}function Jl(s){if(s!==vn)return!1;if(!We)return zv(s),We=!0,!1;var i=s.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Ep(s.type,s.memoizedProps)),o=!o),o&&_t&&va(s),zv(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(o=s.data,o==="/$"){if(i===0){_t=ms(s.nextSibling);break e}i--}else o!=="$"&&o!=="$!"&&o!=="$?"||i++;s=s.nextSibling}_t=null}}else i===27?(i=_t,di(s.type)?(s=Ap,Ap=null,_t=s):_t=i):_t=vn?ms(s.stateNode.nextSibling):null;return!0}function Zl(){_t=vn=null,We=!1}function Bv(){var s=ya;return s!==null&&(Sn===null?Sn=s:Sn.push.apply(Sn,s),ya=null),s}function ec(s){ya===null?ya=[s]:ya.push(s)}var om=J(null),_a=null,cr=null;function Xr(s,i,o){ce(om,i._currentValue),i._currentValue=o}function ur(s){s._currentValue=om.current,he(om)}function lm(s,i,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===o)break;s=s.return}}function cm(s,i,o,u){var f=s.child;for(f!==null&&(f.return=s);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var x=g;g=f;for(var U=0;U<i.length;U++)if(x.context===i[U]){g.lanes|=o,x=g.alternate,x!==null&&(x.lanes|=o),lm(g.return,o,s),u||(E=null);break e}g=x.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),lm(E,o,s),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===s){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function tc(s,i,o,u){s=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var x=f.type;Nn(f.pendingProps.value,E.value)||(s!==null?s.push(x):s=[x])}}else if(f===Ve.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(s!==null?s.push(Nc):s=[Nc])}f=f.return}s!==null&&cm(i,s,o,u),i.flags|=262144}function ih(s){for(s=s.firstContext;s!==null;){if(!Nn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ba(s){_a=s,cr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function on(s){return qv(_a,s)}function ah(s,i){return _a===null&&ba(s),qv(s,i)}function qv(s,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},cr===null){if(s===null)throw Error(r(308));cr=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else cr=cr.next=i;return o}var P1=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(o){return o()})}},j1=n.unstable_scheduleCallback,M1=n.unstable_NormalPriority,Mt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function um(){return{controller:new P1,data:new Map,refCount:0}}function nc(s){s.refCount--,s.refCount===0&&j1(M1,function(){s.controller.abort()})}var sc=null,hm=0,_o=0,bo=null;function U1(s,i){if(sc===null){var o=sc=[];hm=0,_o=fp(),bo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return hm++,i.then($v,$v),i}function $v(){if(--hm===0&&sc!==null){bo!==null&&(bo.status="fulfilled");var s=sc;sc=null,_o=0,bo=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function L1(s,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Fv=B.S;B.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&U1(s,i),Fv!==null&&Fv(s,i)};var wa=J(null);function dm(){var s=wa.current;return s!==null?s:lt.pooledCache}function oh(s,i){i===null?ce(wa,wa.current):ce(wa,i.pool)}function Hv(){var s=dm();return s===null?null:{parent:Mt._currentValue,pool:s}}var rc=Error(r(460)),Gv=Error(r(474)),lh=Error(r(542)),fm={then:function(){}};function Kv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ch(){}function Qv(s,i,o){switch(o=s[o],o===void 0?s.push(i):o!==i&&(i.then(ch,ch),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Wv(s),s;default:if(typeof i.status=="string")i.then(ch,ch);else{if(s=lt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,Wv(s),s}throw ic=i,rc}}var ic=null;function Yv(){if(ic===null)throw Error(r(459));var s=ic;return ic=null,s}function Wv(s){if(s===rc||s===lh)throw Error(r(483))}var Jr=!1;function mm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pm(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Zr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ei(s,i,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Ze&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=th(s),Mv(s,null,o),i}return eh(s,u,i,o),th(s)}function ac(s,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,zr(s,o)}}function gm(s,i){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=i:g=g.next=i}else f=g=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=i:s.next=i,o.lastBaseUpdate=i}var ym=!1;function oc(){if(ym){var s=bo;if(s!==null)throw s}}function lc(s,i,o,u){ym=!1;var f=s.updateQueue;Jr=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var U=x,G=U.next;U.next=null,E===null?g=G:E.next=G,E=U;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,x=Z.lastBaseUpdate,x!==E&&(x===null?Z.firstBaseUpdate=G:x.next=G,Z.lastBaseUpdate=U))}if(g!==null){var re=f.baseState;E=0,Z=G=U=null,x=g;do{var Q=x.lane&-536870913,W=Q!==x.lane;if(W?(Ke&Q)===Q:(u&Q)===Q){Q!==0&&Q===_o&&(ym=!0),Z!==null&&(Z=Z.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Ie=s,xe=x;Q=i;var rt=o;switch(xe.tag){case 1:if(Ie=xe.payload,typeof Ie=="function"){re=Ie.call(rt,re,Q);break e}re=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=xe.payload,Q=typeof Ie=="function"?Ie.call(rt,re,Q):Ie,Q==null)break e;re=y({},re,Q);break e;case 2:Jr=!0}}Q=x.callback,Q!==null&&(s.flags|=64,W&&(s.flags|=8192),W=f.callbacks,W===null?f.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:x.tag,payload:x.payload,callback:x.callback,next:null},Z===null?(G=Z=W,U=re):Z=Z.next=W,E|=Q;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;W=x,x=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);Z===null&&(U=re),f.baseState=U,f.firstBaseUpdate=G,f.lastBaseUpdate=Z,g===null&&(f.shared.lanes=0),li|=E,s.lanes=E,s.memoizedState=re}}function Xv(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function Jv(s,i){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)Xv(o[s],i)}var wo=J(null),uh=J(0);function Zv(s,i){s=yr,ce(uh,s),ce(wo,i),yr=s|i.baseLanes}function vm(){ce(uh,yr),ce(wo,wo.current)}function _m(){yr=uh.current,he(wo),he(uh)}var ti=0,Ue=null,nt=null,It=null,hh=!1,Eo=!1,Ea=!1,dh=0,cc=0,To=null,V1=0;function xt(){throw Error(r(321))}function bm(s,i){if(i===null)return!1;for(var o=0;o<i.length&&o<s.length;o++)if(!Nn(s[o],i[o]))return!1;return!0}function wm(s,i,o,u,f,g){return ti=g,Ue=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=s===null||s.memoizedState===null?M_:U_,Ea=!1,g=o(u,f),Ea=!1,Eo&&(g=t_(i,o,u,f)),e_(s),g}function e_(s){B.H=vh;var i=nt!==null&&nt.next!==null;if(ti=0,It=nt=Ue=null,hh=!1,cc=0,To=null,i)throw Error(r(300));s===null||Gt||(s=s.dependencies,s!==null&&ih(s)&&(Gt=!0))}function t_(s,i,o,u){Ue=s;var f=0;do{if(Eo&&(To=null),cc=0,Eo=!1,25<=f)throw Error(r(301));if(f+=1,It=nt=null,s.updateQueue!=null){var g=s.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}B.H=G1,g=i(o,u)}while(Eo);return g}function z1(){var s=B.H,i=s.useState()[0];return i=typeof i.then=="function"?uc(i):i,s=s.useState()[0],(nt!==null?nt.memoizedState:null)!==s&&(Ue.flags|=1024),i}function Em(){var s=dh!==0;return dh=0,s}function Tm(s,i,o){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~o}function Sm(s){if(hh){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}hh=!1}ti=0,It=nt=Ue=null,Eo=!1,cc=dh=0,To=null}function En(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ue.memoizedState=It=s:It=It.next=s,It}function Nt(){if(nt===null){var s=Ue.alternate;s=s!==null?s.memoizedState:null}else s=nt.next;var i=It===null?Ue.memoizedState:It.next;if(i!==null)It=i,nt=s;else{if(s===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));nt=s,s={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},It===null?Ue.memoizedState=It=s:It=It.next=s}return It}function xm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uc(s){var i=cc;return cc+=1,To===null&&(To=[]),s=Qv(To,s,i),i=Ue,(It===null?i.memoizedState:It.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?M_:U_),s}function fh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return uc(s);if(s.$$typeof===K)return on(s)}throw Error(r(438,String(s)))}function Am(s){var i=null,o=Ue.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ue.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=xm(),Ue.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(s),u=0;u<s;u++)o[u]=O;return i.index++,o}function hr(s,i){return typeof i=="function"?i(s):i}function mh(s){var i=Nt();return Rm(i,nt,s)}function Rm(s,i,o){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=s.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}i.baseQueue=f=g,u.pending=null}if(g=s.baseState,f===null)s.memoizedState=g;else{i=f.next;var x=E=null,U=null,G=i,Z=!1;do{var re=G.lane&-536870913;if(re!==G.lane?(Ke&re)===re:(ti&re)===re){var Q=G.revertLane;if(Q===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),re===_o&&(Z=!0);else if((ti&Q)===Q){G=G.next,Q===_o&&(Z=!0);continue}else re={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},U===null?(x=U=re,E=g):U=U.next=re,Ue.lanes|=Q,li|=Q;re=G.action,Ea&&o(g,re),g=G.hasEagerState?G.eagerState:o(g,re)}else Q={lane:re,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},U===null?(x=U=Q,E=g):U=U.next=Q,Ue.lanes|=re,li|=re;G=G.next}while(G!==null&&G!==i);if(U===null?E=g:U.next=x,!Nn(g,s.memoizedState)&&(Gt=!0,Z&&(o=bo,o!==null)))throw o;s.memoizedState=g,s.baseState=E,s.baseQueue=U,u.lastRenderedState=g}return f===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Cm(s){var i=Nt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=s;var u=o.dispatch,f=o.pending,g=i.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=s(g,E.action),E=E.next;while(E!==f);Nn(g,i.memoizedState)||(Gt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),o.lastRenderedState=g}return[g,u]}function n_(s,i,o){var u=Ue,f=Nt(),g=We;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=i();var E=!Nn((nt||f).memoizedState,o);E&&(f.memoizedState=o,Gt=!0),f=f.queue;var x=i_.bind(null,u,f,s);if(hc(2048,8,x,[s]),f.getSnapshot!==i||E||It!==null&&It.memoizedState.tag&1){if(u.flags|=2048,So(9,ph(),r_.bind(null,u,f,o,i),null),lt===null)throw Error(r(349));g||(ti&124)!==0||s_(u,i,o)}return o}function s_(s,i,o){s.flags|=16384,s={getSnapshot:i,value:o},i=Ue.updateQueue,i===null?(i=xm(),Ue.updateQueue=i,i.stores=[s]):(o=i.stores,o===null?i.stores=[s]:o.push(s))}function r_(s,i,o,u){i.value=o,i.getSnapshot=u,a_(i)&&o_(s)}function i_(s,i,o){return o(function(){a_(i)&&o_(s)})}function a_(s){var i=s.getSnapshot;s=s.value;try{var o=i();return!Nn(s,o)}catch{return!0}}function o_(s){var i=po(s,2);i!==null&&Mn(i,s,2)}function Im(s){var i=En();if(typeof s=="function"){var o=s;if(s=o(),Ea){Bn(!0);try{o()}finally{Bn(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:s},i}function l_(s,i,o,u){return s.baseState=o,Rm(s,nt,typeof u=="function"?u:hr)}function B1(s,i,o,u,f){if(yh(s))throw Error(r(485));if(s=i.action,s!==null){var g={payload:f,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};B.T!==null?o(!0):g.isTransition=!1,u(g),o=i.pending,o===null?(g.next=i.pending=g,c_(i,g)):(g.next=o.next,i.pending=o.next=g)}}function c_(s,i){var o=i.action,u=i.payload,f=s.state;if(i.isTransition){var g=B.T,E={};B.T=E;try{var x=o(f,u),U=B.S;U!==null&&U(E,x),u_(s,i,x)}catch(G){Nm(s,i,G)}finally{B.T=g}}else try{g=o(f,u),u_(s,i,g)}catch(G){Nm(s,i,G)}}function u_(s,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){h_(s,i,u)},function(u){return Nm(s,i,u)}):h_(s,i,o)}function h_(s,i,o){i.status="fulfilled",i.value=o,d_(i),s.state=o,i=s.pending,i!==null&&(o=i.next,o===i?s.pending=null:(o=o.next,i.next=o,c_(s,o)))}function Nm(s,i,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,d_(i),i=i.next;while(i!==u)}s.action=null}function d_(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function f_(s,i){return i}function m_(s,i){if(We){var o=lt.formState;if(o!==null){e:{var u=Ue;if(We){if(_t){t:{for(var f=_t,g=Ds;f.nodeType!==8;){if(!g){f=null;break t}if(f=ms(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){_t=ms(f.nextSibling),u=f.data==="F!";break e}}va(u)}u=!1}u&&(i=o[0])}}return o=En(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f_,lastRenderedState:i},o.queue=u,o=D_.bind(null,Ue,u),u.dispatch=o,u=Im(!1),g=jm.bind(null,Ue,!1,u.queue),u=En(),f={state:i,dispatch:null,action:s,pending:null},u.queue=f,o=B1.bind(null,Ue,f,g,o),f.dispatch=o,u.memoizedState=s,[i,o,!1]}function p_(s){var i=Nt();return g_(i,nt,s)}function g_(s,i,o){if(i=Rm(s,i,f_)[0],s=mh(hr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=uc(i)}catch(E){throw E===rc?lh:E}else u=i;i=Nt();var f=i.queue,g=f.dispatch;return o!==i.memoizedState&&(Ue.flags|=2048,So(9,ph(),q1.bind(null,f,o),null)),[u,g,s]}function q1(s,i){s.action=i}function y_(s){var i=Nt(),o=nt;if(o!==null)return g_(i,o,s);Nt(),i=i.memoizedState,o=Nt();var u=o.queue.dispatch;return o.memoizedState=s,[i,u,!1]}function So(s,i,o,u){return s={tag:s,create:o,deps:u,inst:i,next:null},i=Ue.updateQueue,i===null&&(i=xm(),Ue.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,i.lastEffect=s),s}function ph(){return{destroy:void 0,resource:void 0}}function v_(){return Nt().memoizedState}function gh(s,i,o,u){var f=En();u=u===void 0?null:u,Ue.flags|=s,f.memoizedState=So(1|i,ph(),o,u)}function hc(s,i,o,u){var f=Nt();u=u===void 0?null:u;var g=f.memoizedState.inst;nt!==null&&u!==null&&bm(u,nt.memoizedState.deps)?f.memoizedState=So(i,g,o,u):(Ue.flags|=s,f.memoizedState=So(1|i,g,o,u))}function __(s,i){gh(8390656,8,s,i)}function b_(s,i){hc(2048,8,s,i)}function w_(s,i){return hc(4,2,s,i)}function E_(s,i){return hc(4,4,s,i)}function T_(s,i){if(typeof i=="function"){s=s();var o=i(s);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function S_(s,i,o){o=o!=null?o.concat([s]):null,hc(4,4,T_.bind(null,i,s),o)}function km(){}function x_(s,i){var o=Nt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&bm(i,u[1])?u[0]:(o.memoizedState=[s,i],s)}function A_(s,i){var o=Nt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&bm(i,u[1]))return u[0];if(u=s(),Ea){Bn(!0);try{s()}finally{Bn(!1)}}return o.memoizedState=[u,i],u}function Om(s,i,o){return o===void 0||(ti&1073741824)!==0?s.memoizedState=i:(s.memoizedState=o,s=I0(),Ue.lanes|=s,li|=s,o)}function R_(s,i,o,u){return Nn(o,i)?o:wo.current!==null?(s=Om(s,o,u),Nn(s,i)||(Gt=!0),s):(ti&42)===0?(Gt=!0,s.memoizedState=o):(s=I0(),Ue.lanes|=s,li|=s,i)}function C_(s,i,o,u,f){var g=oe.p;oe.p=g!==0&&8>g?g:8;var E=B.T,x={};B.T=x,jm(s,!1,i,o);try{var U=f(),G=B.S;if(G!==null&&G(x,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var Z=L1(U,u);dc(s,i,Z,jn(s))}else dc(s,i,u,jn(s))}catch(re){dc(s,i,{then:function(){},status:"rejected",reason:re},jn())}finally{oe.p=g,B.T=E}}function $1(){}function Dm(s,i,o,u){if(s.tag!==5)throw Error(r(476));var f=I_(s).queue;C_(s,f,i,te,o===null?$1:function(){return N_(s),o(u)})}function I_(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:te},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:o},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function N_(s){var i=I_(s).next.queue;dc(s,i,{},jn())}function Pm(){return on(Nc)}function k_(){return Nt().memoizedState}function O_(){return Nt().memoizedState}function F1(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var o=jn();s=Zr(o);var u=ei(i,s,o);u!==null&&(Mn(u,i,o),ac(u,i,o)),i={cache:um()},s.payload=i;return}i=i.return}}function H1(s,i,o){var u=jn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},yh(s)?P_(i,o):(o=em(s,i,o,u),o!==null&&(Mn(o,s,u),j_(o,i,u)))}function D_(s,i,o){var u=jn();dc(s,i,o,u)}function dc(s,i,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(yh(s))P_(i,f);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,x=g(E,o);if(f.hasEagerState=!0,f.eagerState=x,Nn(x,E))return eh(s,i,f,0),lt===null&&Zu(),!1}catch{}finally{}if(o=em(s,i,f,u),o!==null)return Mn(o,s,u),j_(o,i,u),!0}return!1}function jm(s,i,o,u){if(u={lane:2,revertLane:fp(),action:u,hasEagerState:!1,eagerState:null,next:null},yh(s)){if(i)throw Error(r(479))}else i=em(s,o,u,2),i!==null&&Mn(i,s,2)}function yh(s){var i=s.alternate;return s===Ue||i!==null&&i===Ue}function P_(s,i){Eo=hh=!0;var o=s.pending;o===null?i.next=i:(i.next=o.next,o.next=i),s.pending=i}function j_(s,i,o){if((o&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,o|=u,i.lanes=o,zr(s,o)}}var vh={readContext:on,use:fh,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt},M_={readContext:on,use:fh,useCallback:function(s,i){return En().memoizedState=[s,i===void 0?null:i],s},useContext:on,useEffect:__,useImperativeHandle:function(s,i,o){o=o!=null?o.concat([s]):null,gh(4194308,4,T_.bind(null,i,s),o)},useLayoutEffect:function(s,i){return gh(4194308,4,s,i)},useInsertionEffect:function(s,i){gh(4,2,s,i)},useMemo:function(s,i){var o=En();i=i===void 0?null:i;var u=s();if(Ea){Bn(!0);try{s()}finally{Bn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(s,i,o){var u=En();if(o!==void 0){var f=o(i);if(Ea){Bn(!0);try{o(i)}finally{Bn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:f},u.queue=s,s=s.dispatch=H1.bind(null,Ue,s),[u.memoizedState,s]},useRef:function(s){var i=En();return s={current:s},i.memoizedState=s},useState:function(s){s=Im(s);var i=s.queue,o=D_.bind(null,Ue,i);return i.dispatch=o,[s.memoizedState,o]},useDebugValue:km,useDeferredValue:function(s,i){var o=En();return Om(o,s,i)},useTransition:function(){var s=Im(!1);return s=C_.bind(null,Ue,s.queue,!0,!1),En().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,o){var u=Ue,f=En();if(We){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),lt===null)throw Error(r(349));(Ke&124)!==0||s_(u,i,o)}f.memoizedState=o;var g={value:o,getSnapshot:i};return f.queue=g,__(i_.bind(null,u,g,s),[s]),u.flags|=2048,So(9,ph(),r_.bind(null,u,g,o,i),null),o},useId:function(){var s=En(),i=lt.identifierPrefix;if(We){var o=lr,u=or;o=(u&~(1<<32-mn(u)-1)).toString(32)+o,i=""+i+"R"+o,o=dh++,0<o&&(i+="H"+o.toString(32)),i+=""}else o=V1++,i=""+i+"r"+o.toString(32)+"";return s.memoizedState=i},useHostTransitionStatus:Pm,useFormState:m_,useActionState:m_,useOptimistic:function(s){var i=En();i.memoizedState=i.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=jm.bind(null,Ue,!0,o),o.dispatch=i,[s,i]},useMemoCache:Am,useCacheRefresh:function(){return En().memoizedState=F1.bind(null,Ue)}},U_={readContext:on,use:fh,useCallback:x_,useContext:on,useEffect:b_,useImperativeHandle:S_,useInsertionEffect:w_,useLayoutEffect:E_,useMemo:A_,useReducer:mh,useRef:v_,useState:function(){return mh(hr)},useDebugValue:km,useDeferredValue:function(s,i){var o=Nt();return R_(o,nt.memoizedState,s,i)},useTransition:function(){var s=mh(hr)[0],i=Nt().memoizedState;return[typeof s=="boolean"?s:uc(s),i]},useSyncExternalStore:n_,useId:k_,useHostTransitionStatus:Pm,useFormState:p_,useActionState:p_,useOptimistic:function(s,i){var o=Nt();return l_(o,nt,s,i)},useMemoCache:Am,useCacheRefresh:O_},G1={readContext:on,use:fh,useCallback:x_,useContext:on,useEffect:b_,useImperativeHandle:S_,useInsertionEffect:w_,useLayoutEffect:E_,useMemo:A_,useReducer:Cm,useRef:v_,useState:function(){return Cm(hr)},useDebugValue:km,useDeferredValue:function(s,i){var o=Nt();return nt===null?Om(o,s,i):R_(o,nt.memoizedState,s,i)},useTransition:function(){var s=Cm(hr)[0],i=Nt().memoizedState;return[typeof s=="boolean"?s:uc(s),i]},useSyncExternalStore:n_,useId:k_,useHostTransitionStatus:Pm,useFormState:y_,useActionState:y_,useOptimistic:function(s,i){var o=Nt();return nt!==null?l_(o,nt,s,i):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Am,useCacheRefresh:O_},xo=null,fc=0;function _h(s){var i=fc;return fc+=1,xo===null&&(xo=[]),Qv(xo,s,i)}function mc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function bh(s,i){throw i.$$typeof===b?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function L_(s){var i=s._init;return i(s._payload)}function V_(s){function i(q,z){if(s){var F=q.deletions;F===null?(q.deletions=[z],q.flags|=16):F.push(z)}}function o(q,z){if(!s)return null;for(;z!==null;)i(q,z),z=z.sibling;return null}function u(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function f(q,z){return q=ar(q,z),q.index=0,q.sibling=null,q}function g(q,z,F){return q.index=F,s?(F=q.alternate,F!==null?(F=F.index,F<z?(q.flags|=67108866,z):F):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function E(q){return s&&q.alternate===null&&(q.flags|=67108866),q}function x(q,z,F,ne){return z===null||z.tag!==6?(z=nm(F,q.mode,ne),z.return=q,z):(z=f(z,F),z.return=q,z)}function U(q,z,F,ne){var ye=F.type;return ye===N?Z(q,z,F.props.children,ne,F.key):z!==null&&(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&L_(ye)===z.type)?(z=f(z,F.props),mc(z,F),z.return=q,z):(z=nh(F.type,F.key,F.props,null,q.mode,ne),mc(z,F),z.return=q,z)}function G(q,z,F,ne){return z===null||z.tag!==4||z.stateNode.containerInfo!==F.containerInfo||z.stateNode.implementation!==F.implementation?(z=sm(F,q.mode,ne),z.return=q,z):(z=f(z,F.children||[]),z.return=q,z)}function Z(q,z,F,ne,ye){return z===null||z.tag!==7?(z=ma(F,q.mode,ne,ye),z.return=q,z):(z=f(z,F),z.return=q,z)}function re(q,z,F){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=nm(""+z,q.mode,F),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return F=nh(z.type,z.key,z.props,null,q.mode,F),mc(F,z),F.return=q,F;case C:return z=sm(z,q.mode,F),z.return=q,z;case S:var ne=z._init;return z=ne(z._payload),re(q,z,F)}if(be(z)||k(z))return z=ma(z,q.mode,F,null),z.return=q,z;if(typeof z.then=="function")return re(q,_h(z),F);if(z.$$typeof===K)return re(q,ah(q,z),F);bh(q,z)}return null}function Q(q,z,F,ne){var ye=z!==null?z.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ye!==null?null:x(q,z,""+F,ne);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return F.key===ye?U(q,z,F,ne):null;case C:return F.key===ye?G(q,z,F,ne):null;case S:return ye=F._init,F=ye(F._payload),Q(q,z,F,ne)}if(be(F)||k(F))return ye!==null?null:Z(q,z,F,ne,null);if(typeof F.then=="function")return Q(q,z,_h(F),ne);if(F.$$typeof===K)return Q(q,z,ah(q,F),ne);bh(q,F)}return null}function W(q,z,F,ne,ye){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get(F)||null,x(z,q,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:return q=q.get(ne.key===null?F:ne.key)||null,U(z,q,ne,ye);case C:return q=q.get(ne.key===null?F:ne.key)||null,G(z,q,ne,ye);case S:var ze=ne._init;return ne=ze(ne._payload),W(q,z,F,ne,ye)}if(be(ne)||k(ne))return q=q.get(F)||null,Z(z,q,ne,ye,null);if(typeof ne.then=="function")return W(q,z,F,_h(ne),ye);if(ne.$$typeof===K)return W(q,z,F,ah(z,ne),ye);bh(z,ne)}return null}function Ie(q,z,F,ne){for(var ye=null,ze=null,we=z,Ae=z=0,Qt=null;we!==null&&Ae<F.length;Ae++){we.index>Ae?(Qt=we,we=null):Qt=we.sibling;var Ye=Q(q,we,F[Ae],ne);if(Ye===null){we===null&&(we=Qt);break}s&&we&&Ye.alternate===null&&i(q,we),z=g(Ye,z,Ae),ze===null?ye=Ye:ze.sibling=Ye,ze=Ye,we=Qt}if(Ae===F.length)return o(q,we),We&&ga(q,Ae),ye;if(we===null){for(;Ae<F.length;Ae++)we=re(q,F[Ae],ne),we!==null&&(z=g(we,z,Ae),ze===null?ye=we:ze.sibling=we,ze=we);return We&&ga(q,Ae),ye}for(we=u(we);Ae<F.length;Ae++)Qt=W(we,q,Ae,F[Ae],ne),Qt!==null&&(s&&Qt.alternate!==null&&we.delete(Qt.key===null?Ae:Qt.key),z=g(Qt,z,Ae),ze===null?ye=Qt:ze.sibling=Qt,ze=Qt);return s&&we.forEach(function(yi){return i(q,yi)}),We&&ga(q,Ae),ye}function xe(q,z,F,ne){if(F==null)throw Error(r(151));for(var ye=null,ze=null,we=z,Ae=z=0,Qt=null,Ye=F.next();we!==null&&!Ye.done;Ae++,Ye=F.next()){we.index>Ae?(Qt=we,we=null):Qt=we.sibling;var yi=Q(q,we,Ye.value,ne);if(yi===null){we===null&&(we=Qt);break}s&&we&&yi.alternate===null&&i(q,we),z=g(yi,z,Ae),ze===null?ye=yi:ze.sibling=yi,ze=yi,we=Qt}if(Ye.done)return o(q,we),We&&ga(q,Ae),ye;if(we===null){for(;!Ye.done;Ae++,Ye=F.next())Ye=re(q,Ye.value,ne),Ye!==null&&(z=g(Ye,z,Ae),ze===null?ye=Ye:ze.sibling=Ye,ze=Ye);return We&&ga(q,Ae),ye}for(we=u(we);!Ye.done;Ae++,Ye=F.next())Ye=W(we,q,Ae,Ye.value,ne),Ye!==null&&(s&&Ye.alternate!==null&&we.delete(Ye.key===null?Ae:Ye.key),z=g(Ye,z,Ae),ze===null?ye=Ye:ze.sibling=Ye,ze=Ye);return s&&we.forEach(function(KR){return i(q,KR)}),We&&ga(q,Ae),ye}function rt(q,z,F,ne){if(typeof F=="object"&&F!==null&&F.type===N&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case T:e:{for(var ye=F.key;z!==null;){if(z.key===ye){if(ye=F.type,ye===N){if(z.tag===7){o(q,z.sibling),ne=f(z,F.props.children),ne.return=q,q=ne;break e}}else if(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===S&&L_(ye)===z.type){o(q,z.sibling),ne=f(z,F.props),mc(ne,F),ne.return=q,q=ne;break e}o(q,z);break}else i(q,z);z=z.sibling}F.type===N?(ne=ma(F.props.children,q.mode,ne,F.key),ne.return=q,q=ne):(ne=nh(F.type,F.key,F.props,null,q.mode,ne),mc(ne,F),ne.return=q,q=ne)}return E(q);case C:e:{for(ye=F.key;z!==null;){if(z.key===ye)if(z.tag===4&&z.stateNode.containerInfo===F.containerInfo&&z.stateNode.implementation===F.implementation){o(q,z.sibling),ne=f(z,F.children||[]),ne.return=q,q=ne;break e}else{o(q,z);break}else i(q,z);z=z.sibling}ne=sm(F,q.mode,ne),ne.return=q,q=ne}return E(q);case S:return ye=F._init,F=ye(F._payload),rt(q,z,F,ne)}if(be(F))return Ie(q,z,F,ne);if(k(F)){if(ye=k(F),typeof ye!="function")throw Error(r(150));return F=ye.call(F),xe(q,z,F,ne)}if(typeof F.then=="function")return rt(q,z,_h(F),ne);if(F.$$typeof===K)return rt(q,z,ah(q,F),ne);bh(q,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,z!==null&&z.tag===6?(o(q,z.sibling),ne=f(z,F),ne.return=q,q=ne):(o(q,z),ne=nm(F,q.mode,ne),ne.return=q,q=ne),E(q)):o(q,z)}return function(q,z,F,ne){try{fc=0;var ye=rt(q,z,F,ne);return xo=null,ye}catch(we){if(we===rc||we===lh)throw we;var ze=kn(29,we,null,q.mode);return ze.lanes=ne,ze.return=q,ze}finally{}}}var Ao=V_(!0),z_=V_(!1),Wn=J(null),Ps=null;function ni(s){var i=s.alternate;ce(Ut,Ut.current&1),ce(Wn,s),Ps===null&&(i===null||wo.current!==null||i.memoizedState!==null)&&(Ps=s)}function B_(s){if(s.tag===22){if(ce(Ut,Ut.current),ce(Wn,s),Ps===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(Ps=s)}}else si()}function si(){ce(Ut,Ut.current),ce(Wn,Wn.current)}function dr(s){he(Wn),Ps===s&&(Ps=null),he(Ut)}var Ut=J(0);function wh(s){for(var i=s;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||xp(o)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Mm(s,i,o,u){i=s.memoizedState,o=o(u,i),o=o==null?i:y({},i,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Um={enqueueSetState:function(s,i,o){s=s._reactInternals;var u=jn(),f=Zr(u);f.payload=i,o!=null&&(f.callback=o),i=ei(s,f,u),i!==null&&(Mn(i,s,u),ac(i,s,u))},enqueueReplaceState:function(s,i,o){s=s._reactInternals;var u=jn(),f=Zr(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=ei(s,f,u),i!==null&&(Mn(i,s,u),ac(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var o=jn(),u=Zr(o);u.tag=2,i!=null&&(u.callback=i),i=ei(s,u,o),i!==null&&(Mn(i,s,o),ac(i,s,o))}};function q_(s,i,o,u,f,g,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,g,E):i.prototype&&i.prototype.isPureReactComponent?!Wl(o,u)||!Wl(f,g):!0}function $_(s,i,o,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==s&&Um.enqueueReplaceState(i,i.state,null)}function Ta(s,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(s=s.defaultProps){o===i&&(o=y({},o));for(var f in s)o[f]===void 0&&(o[f]=s[f])}return o}var Eh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function F_(s){Eh(s)}function H_(s){console.error(s)}function G_(s){Eh(s)}function Th(s,i){try{var o=s.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function K_(s,i,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Lm(s,i,o){return o=Zr(o),o.tag=3,o.payload={element:null},o.callback=function(){Th(s,i)},o}function Q_(s){return s=Zr(s),s.tag=3,s}function Y_(s,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;s.payload=function(){return f(g)},s.callback=function(){K_(i,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){K_(i,o,u),typeof f!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var x=u.stack;this.componentDidCatch(u.value,{componentStack:x!==null?x:""})})}function K1(s,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&tc(i,o,f,!0),o=Wn.current,o!==null){switch(o.tag){case 13:return Ps===null?lp():o.alternate===null&&bt===0&&(bt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===fm?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),up(s,u,f)),!1;case 22:return o.flags|=65536,u===fm?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),up(s,u,f)),!1}throw Error(r(435,o.tag))}return up(s,u,f),lp(),!1}if(We)return i=Wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==am&&(s=Error(r(422),{cause:u}),ec(Gn(s,o)))):(u!==am&&(i=Error(r(423),{cause:u}),ec(Gn(i,o))),s=s.current.alternate,s.flags|=65536,f&=-f,s.lanes|=f,u=Gn(u,o),f=Lm(s.stateNode,u,f),gm(s,f),bt!==4&&(bt=2)),!1;var g=Error(r(520),{cause:u});if(g=Gn(g,o),wc===null?wc=[g]:wc.push(g),bt!==4&&(bt=2),i===null)return!0;u=Gn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,s=f&-f,o.lanes|=s,s=Lm(o.stateNode,u,s),gm(o,s),!1;case 1:if(i=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ci===null||!ci.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Q_(f),Y_(f,s,o,u),gm(o,f),!1}o=o.return}while(o!==null);return!1}var W_=Error(r(461)),Gt=!1;function Jt(s,i,o,u){i.child=s===null?z_(i,null,o,u):Ao(i,s.child,o,u)}function X_(s,i,o,u,f){o=o.render;var g=i.ref;if("ref"in u){var E={};for(var x in u)x!=="ref"&&(E[x]=u[x])}else E=u;return ba(i),u=wm(s,i,o,E,g,f),x=Em(),s!==null&&!Gt?(Tm(s,i,f),fr(s,i,f)):(We&&x&&rm(i),i.flags|=1,Jt(s,i,u,f),i.child)}function J_(s,i,o,u,f){if(s===null){var g=o.type;return typeof g=="function"&&!tm(g)&&g.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=g,Z_(s,i,g,u,f)):(s=nh(o.type,null,u,i,i.mode,f),s.ref=i.ref,s.return=i,i.child=s)}if(g=s.child,!Gm(s,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:Wl,o(E,u)&&s.ref===i.ref)return fr(s,i,f)}return i.flags|=1,s=ar(g,u),s.ref=i.ref,s.return=i,i.child=s}function Z_(s,i,o,u,f){if(s!==null){var g=s.memoizedProps;if(Wl(g,u)&&s.ref===i.ref)if(Gt=!1,i.pendingProps=u=g,Gm(s,f))(s.flags&131072)!==0&&(Gt=!0);else return i.lanes=s.lanes,fr(s,i,f)}return Vm(s,i,o,u,f)}function e0(s,i,o){var u=i.pendingProps,f=u.children,g=s!==null?s.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,s!==null){for(f=i.child=s.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return t0(s,i,u,o)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&oh(i,g!==null?g.cachePool:null),g!==null?Zv(i,g):vm(),B_(i);else return i.lanes=i.childLanes=536870912,t0(s,i,g!==null?g.baseLanes|o:o,o)}else g!==null?(oh(i,g.cachePool),Zv(i,g),si(),i.memoizedState=null):(s!==null&&oh(i,null),vm(),si());return Jt(s,i,f,o),i.child}function t0(s,i,o,u){var f=dm();return f=f===null?null:{parent:Mt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},s!==null&&oh(i,null),vm(),B_(i),s!==null&&tc(s,i,u,!0),null}function Sh(s,i){var o=i.ref;if(o===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(s===null||s.ref!==o)&&(i.flags|=4194816)}}function Vm(s,i,o,u,f){return ba(i),o=wm(s,i,o,u,void 0,f),u=Em(),s!==null&&!Gt?(Tm(s,i,f),fr(s,i,f)):(We&&u&&rm(i),i.flags|=1,Jt(s,i,o,f),i.child)}function n0(s,i,o,u,f,g){return ba(i),i.updateQueue=null,o=t_(i,u,o,f),e_(s),u=Em(),s!==null&&!Gt?(Tm(s,i,g),fr(s,i,g)):(We&&u&&rm(i),i.flags|=1,Jt(s,i,o,g),i.child)}function s0(s,i,o,u,f){if(ba(i),i.stateNode===null){var g=go,E=o.contextType;typeof E=="object"&&E!==null&&(g=on(E)),g=new o(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Um,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},mm(i),E=o.contextType,g.context=typeof E=="object"&&E!==null?on(E):go,g.state=i.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Mm(i,o,E,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Um.enqueueReplaceState(g,g.state,null),lc(i,u,g,f),oc(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){g=i.stateNode;var x=i.memoizedProps,U=Ta(o,x);g.props=U;var G=g.context,Z=o.contextType;E=go,typeof Z=="object"&&Z!==null&&(E=on(Z));var re=o.getDerivedStateFromProps;Z=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",x=i.pendingProps!==x,Z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x||G!==E)&&$_(i,g,u,E),Jr=!1;var Q=i.memoizedState;g.state=Q,lc(i,u,g,f),oc(),G=i.memoizedState,x||Q!==G||Jr?(typeof re=="function"&&(Mm(i,o,re,u),G=i.memoizedState),(U=Jr||q_(i,o,U,u,Q,G,E))?(Z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=G),g.props=u,g.state=G,g.context=E,u=U):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,pm(s,i),E=i.memoizedProps,Z=Ta(o,E),g.props=Z,re=i.pendingProps,Q=g.context,G=o.contextType,U=go,typeof G=="object"&&G!==null&&(U=on(G)),x=o.getDerivedStateFromProps,(G=typeof x=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==re||Q!==U)&&$_(i,g,u,U),Jr=!1,Q=i.memoizedState,g.state=Q,lc(i,u,g,f),oc();var W=i.memoizedState;E!==re||Q!==W||Jr||s!==null&&s.dependencies!==null&&ih(s.dependencies)?(typeof x=="function"&&(Mm(i,o,x,u),W=i.memoizedState),(Z=Jr||q_(i,o,Z,u,Q,W,U)||s!==null&&s.dependencies!==null&&ih(s.dependencies))?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,W,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,W,U)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===s.memoizedProps&&Q===s.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Q===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=W),g.props=u,g.state=W,g.context=U,u=Z):(typeof g.componentDidUpdate!="function"||E===s.memoizedProps&&Q===s.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Q===s.memoizedState||(i.flags|=1024),u=!1)}return g=u,Sh(s,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,s!==null&&u?(i.child=Ao(i,s.child,null,f),i.child=Ao(i,null,o,f)):Jt(s,i,o,f),i.memoizedState=g.state,s=i.child):s=fr(s,i,f),s}function r0(s,i,o,u){return Zl(),i.flags|=256,Jt(s,i,o,u),i.child}var zm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(s){return{baseLanes:s,cachePool:Hv()}}function qm(s,i,o){return s=s!==null?s.childLanes&~o:0,i&&(s|=Xn),s}function i0(s,i,o){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=s!==null&&s.memoizedState===null?!1:(Ut.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,s===null){if(We){if(f?ni(i):si(),We){var x=_t,U;if(U=x){e:{for(U=x,x=Ds;U.nodeType!==8;){if(!x){x=null;break e}if(U=ms(U.nextSibling),U===null){x=null;break e}}x=U}x!==null?(i.memoizedState={dehydrated:x,treeContext:pa!==null?{id:or,overflow:lr}:null,retryLane:536870912,hydrationErrors:null},U=kn(18,null,null,0),U.stateNode=x,U.return=i,i.child=U,vn=i,_t=null,U=!0):U=!1}U||va(i)}if(x=i.memoizedState,x!==null&&(x=x.dehydrated,x!==null))return xp(x)?i.lanes=32:i.lanes=536870912,null;dr(i)}return x=u.children,u=u.fallback,f?(si(),f=i.mode,x=xh({mode:"hidden",children:x},f),u=ma(u,f,o,null),x.return=i,u.return=i,x.sibling=u,i.child=x,f=i.child,f.memoizedState=Bm(o),f.childLanes=qm(s,E,o),i.memoizedState=zm,u):(ni(i),$m(i,x))}if(U=s.memoizedState,U!==null&&(x=U.dehydrated,x!==null)){if(g)i.flags&256?(ni(i),i.flags&=-257,i=Fm(s,i,o)):i.memoizedState!==null?(si(),i.child=s.child,i.flags|=128,i=null):(si(),f=u.fallback,x=i.mode,u=xh({mode:"visible",children:u.children},x),f=ma(f,x,o,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,Ao(i,s.child,null,o),u=i.child,u.memoizedState=Bm(o),u.childLanes=qm(s,E,o),i.memoizedState=zm,i=f);else if(ni(i),xp(x)){if(E=x.nextSibling&&x.nextSibling.dataset,E)var G=E.dgst;E=G,u=Error(r(419)),u.stack="",u.digest=E,ec({value:u,source:null,stack:null}),i=Fm(s,i,o)}else if(Gt||tc(s,i,o,!1),E=(o&s.childLanes)!==0,Gt||E){if(E=lt,E!==null&&(u=o&-o,u=(u&42)!==0?1:Dl(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==U.retryLane))throw U.retryLane=u,po(s,u),Mn(E,s,u),W_;x.data==="$?"||lp(),i=Fm(s,i,o)}else x.data==="$?"?(i.flags|=192,i.child=s.child,i=null):(s=U.treeContext,_t=ms(x.nextSibling),vn=i,We=!0,ya=null,Ds=!1,s!==null&&(Qn[Yn++]=or,Qn[Yn++]=lr,Qn[Yn++]=pa,or=s.id,lr=s.overflow,pa=i),i=$m(i,u.children),i.flags|=4096);return i}return f?(si(),f=u.fallback,x=i.mode,U=s.child,G=U.sibling,u=ar(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,G!==null?f=ar(G,f):(f=ma(f,x,o,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,x=s.child.memoizedState,x===null?x=Bm(o):(U=x.cachePool,U!==null?(G=Mt._currentValue,U=U.parent!==G?{parent:G,pool:G}:U):U=Hv(),x={baseLanes:x.baseLanes|o,cachePool:U}),f.memoizedState=x,f.childLanes=qm(s,E,o),i.memoizedState=zm,u):(ni(i),o=s.child,s=o.sibling,o=ar(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,s!==null&&(E=i.deletions,E===null?(i.deletions=[s],i.flags|=16):E.push(s)),i.child=o,i.memoizedState=null,o)}function $m(s,i){return i=xh({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function xh(s,i){return s=kn(22,s,null,i),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Fm(s,i,o){return Ao(i,s.child,null,o),s=$m(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function a0(s,i,o){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),lm(s.return,i,o)}function Hm(s,i,o,u,f){var g=s.memoizedState;g===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function o0(s,i,o){var u=i.pendingProps,f=u.revealOrder,g=u.tail;if(Jt(s,i,u.children,o),u=Ut.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&a0(s,o,i);else if(s.tag===19)a0(s,o,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}u&=1}switch(ce(Ut,u),f){case"forwards":for(o=i.child,f=null;o!==null;)s=o.alternate,s!==null&&wh(s)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Hm(i,!1,f,o,g);break;case"backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(s=f.alternate,s!==null&&wh(s)===null){i.child=f;break}s=f.sibling,f.sibling=o,o=f,f=s}Hm(i,!0,o,null,g);break;case"together":Hm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function fr(s,i,o){if(s!==null&&(i.dependencies=s.dependencies),li|=i.lanes,(o&i.childLanes)===0)if(s!==null){if(tc(s,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,o=ar(s,s.pendingProps),i.child=o,o.return=i;s.sibling!==null;)s=s.sibling,o=o.sibling=ar(s,s.pendingProps),o.return=i;o.sibling=null}return i.child}function Gm(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&ih(s)))}function Q1(s,i,o){switch(i.tag){case 3:me(i,i.stateNode.containerInfo),Xr(i,Mt,s.memoizedState.cache),Zl();break;case 27:case 5:Vn(i);break;case 4:me(i,i.stateNode.containerInfo);break;case 10:Xr(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ni(i),i.flags|=128,null):(o&i.child.childLanes)!==0?i0(s,i,o):(ni(i),s=fr(s,i,o),s!==null?s.sibling:null);ni(i);break;case 19:var f=(s.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(tc(s,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return o0(s,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Ut,Ut.current),u)break;return null;case 22:case 23:return i.lanes=0,e0(s,i,o);case 24:Xr(i,Mt,s.memoizedState.cache)}return fr(s,i,o)}function l0(s,i,o){if(s!==null)if(s.memoizedProps!==i.pendingProps)Gt=!0;else{if(!Gm(s,o)&&(i.flags&128)===0)return Gt=!1,Q1(s,i,o);Gt=(s.flags&131072)!==0}else Gt=!1,We&&(i.flags&1048576)!==0&&Lv(i,rh,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")tm(u)?(s=Ta(u,s),i.tag=1,i=s0(null,i,u,s,o)):(i.tag=0,i=Vm(null,i,u,s,o));else{if(u!=null){if(f=u.$$typeof,f===ee){i.tag=11,i=X_(null,i,u,s,o);break e}else if(f===M){i.tag=14,i=J_(null,i,u,s,o);break e}}throw i=Se(u)||u,Error(r(306,i,""))}}return i;case 0:return Vm(s,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Ta(u,i.pendingProps),s0(s,i,u,f,o);case 3:e:{if(me(i,i.stateNode.containerInfo),s===null)throw Error(r(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,pm(s,i),lc(i,u,null,o);var E=i.memoizedState;if(u=E.cache,Xr(i,Mt,u),u!==g.cache&&cm(i,[Mt],o,!0),oc(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=r0(s,i,u,o);break e}else if(u!==f){f=Gn(Error(r(424)),i),ec(f),i=r0(s,i,u,o);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(_t=ms(s.firstChild),vn=i,We=!0,ya=null,Ds=!0,o=z_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Zl(),u===f){i=fr(s,i,o);break e}Jt(s,i,u,o)}i=i.child}return i;case 26:return Sh(s,i),s===null?(o=db(i.type,null,i.pendingProps,null))?i.memoizedState=o:We||(o=i.type,s=i.pendingProps,u=Vh(Te.current).createElement(o),u[Et]=i,u[Xt]=s,en(u,o,s),Tt(u),i.stateNode=u):i.memoizedState=db(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return Vn(i),s===null&&We&&(u=i.stateNode=cb(i.type,i.pendingProps,Te.current),vn=i,Ds=!0,f=_t,di(i.type)?(Ap=f,_t=ms(u.firstChild)):_t=f),Jt(s,i,i.pendingProps.children,o),Sh(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&We&&((f=u=_t)&&(u=ER(u,i.type,i.pendingProps,Ds),u!==null?(i.stateNode=u,vn=i,_t=ms(u.firstChild),Ds=!1,f=!0):f=!1),f||va(i)),Vn(i),f=i.type,g=i.pendingProps,E=s!==null?s.memoizedProps:null,u=g.children,Ep(f,g)?u=null:E!==null&&Ep(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=wm(s,i,z1,null,null,o),Nc._currentValue=f),Sh(s,i),Jt(s,i,u,o),i.child;case 6:return s===null&&We&&((s=o=_t)&&(o=TR(o,i.pendingProps,Ds),o!==null?(i.stateNode=o,vn=i,_t=null,s=!0):s=!1),s||va(i)),null;case 13:return i0(s,i,o);case 4:return me(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=Ao(i,null,u,o):Jt(s,i,u,o),i.child;case 11:return X_(s,i,i.type,i.pendingProps,o);case 7:return Jt(s,i,i.pendingProps,o),i.child;case 8:return Jt(s,i,i.pendingProps.children,o),i.child;case 12:return Jt(s,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Xr(i,i.type,u.value),Jt(s,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,ba(i),f=on(f),u=u(f),i.flags|=1,Jt(s,i,u,o),i.child;case 14:return J_(s,i,i.type,i.pendingProps,o);case 15:return Z_(s,i,i.type,i.pendingProps,o);case 19:return o0(s,i,o);case 31:return u=i.pendingProps,o=i.mode,u={mode:u.mode,children:u.children},s===null?(o=xh(u,o),o.ref=i.ref,i.child=o,o.return=i,i=o):(o=ar(s.child,u),o.ref=i.ref,i.child=o,o.return=i,i=o),i;case 22:return e0(s,i,o);case 24:return ba(i),u=on(Mt),s===null?(f=dm(),f===null&&(f=lt,g=um(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),i.memoizedState={parent:u,cache:f},mm(i),Xr(i,Mt,f)):((s.lanes&o)!==0&&(pm(s,i),lc(i,null,null,o),oc()),f=s.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Xr(i,Mt,u)):(u=g.cache,Xr(i,Mt,u),u!==f.cache&&cm(i,[Mt],o,!0))),Jt(s,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function mr(s){s.flags|=4}function c0(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!yb(i)){if(i=Wn.current,i!==null&&((Ke&4194048)===Ke?Ps!==null:(Ke&62914560)!==Ke&&(Ke&536870912)===0||i!==Ps))throw ic=fm,Gv;s.flags|=8192}}function Ah(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Lr():536870912,s.lanes|=i,No|=i)}function pc(s,i){if(!We)switch(s.tailMode){case"hidden":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function yt(s){var i=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(i)for(var f=s.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=s,f=f.sibling;else for(f=s.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=s,f=f.sibling;return s.subtreeFlags|=u,s.childLanes=o,i}function Y1(s,i,o){var u=i.pendingProps;switch(im(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(i),null;case 1:return yt(i),null;case 3:return o=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ur(Mt),at(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Jl(i)?mr(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Bv())),yt(i),null;case 26:return o=i.memoizedState,s===null?(mr(i),o!==null?(yt(i),c0(i,o)):(yt(i),i.flags&=-16777217)):o?o!==s.memoizedState?(mr(i),yt(i),c0(i,o)):(yt(i),i.flags&=-16777217):(s.memoizedProps!==u&&mr(i),yt(i),i.flags&=-16777217),null;case 27:zn(i),o=Te.current;var f=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==u&&mr(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return yt(i),null}s=fe.current,Jl(i)?Vv(i):(s=cb(f,u,o),i.stateNode=s,mr(i))}return yt(i),null;case 5:if(zn(i),o=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&mr(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return yt(i),null}if(s=fe.current,Jl(i))Vv(i);else{switch(f=Vh(Te.current),s){case 1:s=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=f.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?s.multiple=!0:u.size&&(s.size=u.size);break;default:s=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}s[Et]=i,s[Xt]=u;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)s.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=s;e:switch(en(s,o,u),o){case"button":case"input":case"select":case"textarea":s=!!u.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&mr(i)}}return yt(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&mr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(s=Te.current,Jl(i)){if(s=i.stateNode,o=i.memoizedProps,u=null,f=vn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}s[Et]=i,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||nb(s.nodeValue,o)),s||va(i)}else s=Vh(s).createTextNode(u),s[Et]=i,i.stateNode=s}return yt(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(f=Jl(i),u!==null&&u.dehydrated!==null){if(s===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Et]=i}else Zl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;yt(i),f=!1}else f=Bv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(dr(i),i):(dr(i),null)}if(dr(i),(i.flags&128)!==0)return i.lanes=o,i;if(o=u!==null,s=s!==null&&s.memoizedState!==null,o){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==s&&o&&(i.child.flags|=8192),Ah(i,i.updateQueue),yt(i),null;case 4:return at(),s===null&&yp(i.stateNode.containerInfo),yt(i),null;case 10:return ur(i.type),yt(i),null;case 19:if(he(Ut),f=i.memoizedState,f===null)return yt(i),null;if(u=(i.flags&128)!==0,g=f.rendering,g===null)if(u)pc(f,!1);else{if(bt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(g=wh(s),g!==null){for(i.flags|=128,pc(f,!1),s=g.updateQueue,i.updateQueue=s,Ah(i,s),i.subtreeFlags=0,s=o,o=i.child;o!==null;)Uv(o,s),o=o.sibling;return ce(Ut,Ut.current&1|2),i.child}s=s.sibling}f.tail!==null&&wn()>Ih&&(i.flags|=128,u=!0,pc(f,!1),i.lanes=4194304)}else{if(!u)if(s=wh(g),s!==null){if(i.flags|=128,u=!0,s=s.updateQueue,i.updateQueue=s,Ah(i,s),pc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!We)return yt(i),null}else 2*wn()-f.renderingStartTime>Ih&&o!==536870912&&(i.flags|=128,u=!0,pc(f,!1),i.lanes=4194304);f.isBackwards?(g.sibling=i.child,i.child=g):(s=f.last,s!==null?s.sibling=g:i.child=g,f.last=g)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=wn(),i.sibling=null,s=Ut.current,ce(Ut,u?s&1|2:s&1),i):(yt(i),null);case 22:case 23:return dr(i),_m(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(yt(i),i.subtreeFlags&6&&(i.flags|=8192)):yt(i),o=i.updateQueue,o!==null&&Ah(i,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),s!==null&&he(wa),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ur(Mt),yt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function W1(s,i){switch(im(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ur(Mt),at(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return zn(i),null;case 13:if(dr(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Zl()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return he(Ut),null;case 4:return at(),null;case 10:return ur(i.type),null;case 22:case 23:return dr(i),_m(),s!==null&&he(wa),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ur(Mt),null;case 25:return null;default:return null}}function u0(s,i){switch(im(i),i.tag){case 3:ur(Mt),at();break;case 26:case 27:case 5:zn(i);break;case 4:at();break;case 13:dr(i);break;case 19:he(Ut);break;case 10:ur(i.type);break;case 22:case 23:dr(i),_m(),s!==null&&he(wa);break;case 24:ur(Mt)}}function gc(s,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&s)===s){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(x){it(i,i.return,x)}}function ri(s,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&s)===s){var E=u.inst,x=E.destroy;if(x!==void 0){E.destroy=void 0,f=i;var U=o,G=x;try{G()}catch(Z){it(f,U,Z)}}}u=u.next}while(u!==g)}}catch(Z){it(i,i.return,Z)}}function h0(s){var i=s.updateQueue;if(i!==null){var o=s.stateNode;try{Jv(i,o)}catch(u){it(s,s.return,u)}}}function d0(s,i,o){o.props=Ta(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){it(s,i,u)}}function yc(s,i){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(f){it(s,i,f)}}function js(s,i){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){it(s,i,f)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){it(s,i,f)}else o.current=null}function f0(s){var i=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){it(s,s.return,f)}}function Km(s,i,o){try{var u=s.stateNode;yR(u,s.type,o,i),u[Xt]=i}catch(f){it(s,s.return,f)}}function m0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&di(s.type)||s.tag===4}function Qm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||m0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&di(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ym(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(s),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Lh));else if(u!==4&&(u===27&&di(s.type)&&(o=s.stateNode,i=null),s=s.child,s!==null))for(Ym(s,i,o),s=s.sibling;s!==null;)Ym(s,i,o),s=s.sibling}function Rh(s,i,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?o.insertBefore(s,i):o.appendChild(s);else if(u!==4&&(u===27&&di(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Rh(s,i,o),s=s.sibling;s!==null;)Rh(s,i,o),s=s.sibling}function p0(s){var i=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);en(i,u,o),i[Et]=s,i[Xt]=o}catch(g){it(s,s.return,g)}}var pr=!1,At=!1,Wm=!1,g0=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function X1(s,i){if(s=s.containerInfo,bp=Hh,s=Rv(s),Qf(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,x=-1,U=-1,G=0,Z=0,re=s,Q=null;t:for(;;){for(var W;re!==o||f!==0&&re.nodeType!==3||(x=E+f),re!==g||u!==0&&re.nodeType!==3||(U=E+u),re.nodeType===3&&(E+=re.nodeValue.length),(W=re.firstChild)!==null;)Q=re,re=W;for(;;){if(re===s)break t;if(Q===o&&++G===f&&(x=E),Q===g&&++Z===u&&(U=E),(W=re.nextSibling)!==null)break;re=Q,Q=re.parentNode}re=W}o=x===-1||U===-1?null:{start:x,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(wp={focusedElem:s,selectionRange:o},Hh=!1,Kt=i;Kt!==null;)if(i=Kt,s=i.child,(i.subtreeFlags&1024)!==0&&s!==null)s.return=i,Kt=s;else for(;Kt!==null;){switch(i=Kt,g=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&g!==null){s=void 0,o=i,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var Ie=Ta(o.type,f,o.elementType===o.type);s=u.getSnapshotBeforeUpdate(Ie,g),u.__reactInternalSnapshotBeforeUpdate=s}catch(xe){it(o,o.return,xe)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,o=s.nodeType,o===9)Sp(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Sp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,Kt=s;break}Kt=i.return}}function y0(s,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ii(s,o),u&4&&gc(5,o);break;case 1:if(ii(s,o),u&4)if(s=o.stateNode,i===null)try{s.componentDidMount()}catch(E){it(o,o.return,E)}else{var f=Ta(o.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(f,i,s.__reactInternalSnapshotBeforeUpdate)}catch(E){it(o,o.return,E)}}u&64&&h0(o),u&512&&yc(o,o.return);break;case 3:if(ii(s,o),u&64&&(s=o.updateQueue,s!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Jv(s,i)}catch(E){it(o,o.return,E)}}break;case 27:i===null&&u&4&&p0(o);case 26:case 5:ii(s,o),i===null&&u&4&&f0(o),u&512&&yc(o,o.return);break;case 12:ii(s,o);break;case 13:ii(s,o),u&4&&b0(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=aR.bind(null,o),SR(s,o))));break;case 22:if(u=o.memoizedState!==null||pr,!u){i=i!==null&&i.memoizedState!==null||At,f=pr;var g=At;pr=u,(At=i)&&!g?ai(s,o,(o.subtreeFlags&8772)!==0):ii(s,o),pr=f,At=g}break;case 30:break;default:ii(s,o)}}function v0(s){var i=s.alternate;i!==null&&(s.alternate=null,v0(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Za(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var pt=null,Tn=!1;function gr(s,i,o){for(o=o.child;o!==null;)_0(s,i,o),o=o.sibling}function _0(s,i,o){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(jr,o)}catch{}switch(o.tag){case 26:At||js(o,i),gr(s,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:At||js(o,i);var u=pt,f=Tn;di(o.type)&&(pt=o.stateNode,Tn=!1),gr(s,i,o),Ac(o.stateNode),pt=u,Tn=f;break;case 5:At||js(o,i);case 6:if(u=pt,f=Tn,pt=null,gr(s,i,o),pt=u,Tn=f,pt!==null)if(Tn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(o.stateNode)}catch(g){it(o,i,g)}else try{pt.removeChild(o.stateNode)}catch(g){it(o,i,g)}break;case 18:pt!==null&&(Tn?(s=pt,ob(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),Pc(s)):ob(pt,o.stateNode));break;case 4:u=pt,f=Tn,pt=o.stateNode.containerInfo,Tn=!0,gr(s,i,o),pt=u,Tn=f;break;case 0:case 11:case 14:case 15:At||ri(2,o,i),At||ri(4,o,i),gr(s,i,o);break;case 1:At||(js(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&d0(o,i,u)),gr(s,i,o);break;case 21:gr(s,i,o);break;case 22:At=(u=At)||o.memoizedState!==null,gr(s,i,o),At=u;break;default:gr(s,i,o)}}function b0(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Pc(s)}catch(o){it(i,i.return,o)}}function J1(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new g0),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new g0),i;default:throw Error(r(435,s.tag))}}function Xm(s,i){var o=J1(s);i.forEach(function(u){var f=oR.bind(null,s,u);o.has(u)||(o.add(u),u.then(f,f))})}function On(s,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=s,E=i,x=E;e:for(;x!==null;){switch(x.tag){case 27:if(di(x.type)){pt=x.stateNode,Tn=!1;break e}break;case 5:pt=x.stateNode,Tn=!1;break e;case 3:case 4:pt=x.stateNode.containerInfo,Tn=!0;break e}x=x.return}if(pt===null)throw Error(r(160));_0(g,E,f),pt=null,Tn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)w0(i,s),i=i.sibling}var fs=null;function w0(s,i){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:On(i,s),Dn(s),u&4&&(ri(3,s,s.return),gc(3,s),ri(5,s,s.return));break;case 1:On(i,s),Dn(s),u&512&&(At||o===null||js(o,o.return)),u&64&&pr&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=fs;if(On(i,s),Dn(s),u&512&&(At||o===null||js(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Br]||g[Et]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),en(g,u,o),g[Et]=s,Tt(g),u=g;break e;case"link":var E=pb("link","href",f).get(u+(o.href||""));if(E){for(var x=0;x<E.length;x++)if(g=E[x],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(x,1);break t}}g=f.createElement(u),en(g,u,o),f.head.appendChild(g);break;case"meta":if(E=pb("meta","content",f).get(u+(o.content||""))){for(x=0;x<E.length;x++)if(g=E[x],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(x,1);break t}}g=f.createElement(u),en(g,u,o),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[Et]=s,Tt(g),u=g}s.stateNode=u}else gb(f,s.type,s.stateNode);else s.stateNode=mb(f,u,s.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?gb(f,s.type,s.stateNode):mb(f,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Km(s,s.memoizedProps,o.memoizedProps)}break;case 27:On(i,s),Dn(s),u&512&&(At||o===null||js(o,o.return)),o!==null&&u&4&&Km(s,s.memoizedProps,o.memoizedProps);break;case 5:if(On(i,s),Dn(s),u&512&&(At||o===null||js(o,o.return)),s.flags&32){f=s.stateNode;try{Fn(f,"")}catch(W){it(s,s.return,W)}}u&4&&s.stateNode!=null&&(f=s.memoizedProps,Km(s,f,o!==null?o.memoizedProps:f)),u&1024&&(Wm=!0);break;case 6:if(On(i,s),Dn(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(W){it(s,s.return,W)}}break;case 3:if(qh=null,f=fs,fs=zh(i.containerInfo),On(i,s),fs=f,Dn(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Pc(i.containerInfo)}catch(W){it(s,s.return,W)}Wm&&(Wm=!1,E0(s));break;case 4:u=fs,fs=zh(s.stateNode.containerInfo),On(i,s),Dn(s),fs=u;break;case 12:On(i,s),Dn(s);break;case 13:On(i,s),Dn(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(sp=wn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Xm(s,u)));break;case 22:f=s.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,G=pr,Z=At;if(pr=G||f,At=Z||U,On(i,s),At=Z,pr=G,Dn(s),u&8192)e:for(i=s.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||U||pr||At||Sa(s)),o=null,i=s;;){if(i.tag===5||i.tag===26){if(o===null){U=o=i;try{if(g=U.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{x=U.stateNode;var re=U.memoizedProps.style,Q=re!=null&&re.hasOwnProperty("display")?re.display:null;x.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(W){it(U,U.return,W)}}}else if(i.tag===6){if(o===null){U=i;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(W){it(U,U.return,W)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Xm(s,o))));break;case 19:On(i,s),Dn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Xm(s,u)));break;case 30:break;case 21:break;default:On(i,s),Dn(s)}}function Dn(s){var i=s.flags;if(i&2){try{for(var o,u=s.return;u!==null;){if(m0(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var f=o.stateNode,g=Qm(s);Rh(s,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(Fn(E,""),o.flags&=-33);var x=Qm(s);Rh(s,x,E);break;case 3:case 4:var U=o.stateNode.containerInfo,G=Qm(s);Ym(s,G,U);break;default:throw Error(r(161))}}catch(Z){it(s,s.return,Z)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function E0(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;E0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function ii(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)y0(s,i.alternate,i),i=i.sibling}function Sa(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:ri(4,i,i.return),Sa(i);break;case 1:js(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&d0(i,i.return,o),Sa(i);break;case 27:Ac(i.stateNode);case 26:case 5:js(i,i.return),Sa(i);break;case 22:i.memoizedState===null&&Sa(i);break;case 30:Sa(i);break;default:Sa(i)}s=s.sibling}}function ai(s,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=s,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:ai(f,g,o),gc(4,g);break;case 1:if(ai(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){it(u,u.return,G)}if(u=g,f=u.updateQueue,f!==null){var x=u.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)Xv(U[f],x)}catch(G){it(u,u.return,G)}}o&&E&64&&h0(g),yc(g,g.return);break;case 27:p0(g);case 26:case 5:ai(f,g,o),o&&u===null&&E&4&&f0(g),yc(g,g.return);break;case 12:ai(f,g,o);break;case 13:ai(f,g,o),o&&E&4&&b0(f,g);break;case 22:g.memoizedState===null&&ai(f,g,o),yc(g,g.return);break;case 30:break;default:ai(f,g,o)}i=i.sibling}}function Jm(s,i){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&nc(o))}function Zm(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&nc(s))}function Ms(s,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)T0(s,i,o,u),i=i.sibling}function T0(s,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ms(s,i,o,u),f&2048&&gc(9,i);break;case 1:Ms(s,i,o,u);break;case 3:Ms(s,i,o,u),f&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&nc(s)));break;case 12:if(f&2048){Ms(s,i,o,u),s=i.stateNode;try{var g=i.memoizedProps,E=g.id,x=g.onPostCommit;typeof x=="function"&&x(E,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){it(i,i.return,U)}}else Ms(s,i,o,u);break;case 13:Ms(s,i,o,u);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?Ms(s,i,o,u):vc(s,i):g._visibility&2?Ms(s,i,o,u):(g._visibility|=2,Ro(s,i,o,u,(i.subtreeFlags&10256)!==0)),f&2048&&Jm(E,i);break;case 24:Ms(s,i,o,u),f&2048&&Zm(i.alternate,i);break;default:Ms(s,i,o,u)}}function Ro(s,i,o,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=s,E=i,x=o,U=u,G=E.flags;switch(E.tag){case 0:case 11:case 15:Ro(g,E,x,U,f),gc(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?Ro(g,E,x,U,f):vc(g,E):(Z._visibility|=2,Ro(g,E,x,U,f)),f&&G&2048&&Jm(E.alternate,E);break;case 24:Ro(g,E,x,U,f),f&&G&2048&&Zm(E.alternate,E);break;default:Ro(g,E,x,U,f)}i=i.sibling}}function vc(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=s,u=i,f=u.flags;switch(u.tag){case 22:vc(o,u),f&2048&&Jm(u.alternate,u);break;case 24:vc(o,u),f&2048&&Zm(u.alternate,u);break;default:vc(o,u)}i=i.sibling}}var _c=8192;function Co(s){if(s.subtreeFlags&_c)for(s=s.child;s!==null;)S0(s),s=s.sibling}function S0(s){switch(s.tag){case 26:Co(s),s.flags&_c&&s.memoizedState!==null&&UR(fs,s.memoizedState,s.memoizedProps);break;case 5:Co(s);break;case 3:case 4:var i=fs;fs=zh(s.stateNode.containerInfo),Co(s),fs=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=_c,_c=16777216,Co(s),_c=i):Co(s));break;default:Co(s)}}function x0(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function bc(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Kt=u,R0(u,s)}x0(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)A0(s),s=s.sibling}function A0(s){switch(s.tag){case 0:case 11:case 15:bc(s),s.flags&2048&&ri(9,s,s.return);break;case 3:bc(s);break;case 12:bc(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Ch(s)):bc(s);break;default:bc(s)}}function Ch(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Kt=u,R0(u,s)}x0(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:ri(8,i,i.return),Ch(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ch(i));break;default:Ch(i)}s=s.sibling}}function R0(s,i){for(;Kt!==null;){var o=Kt;switch(o.tag){case 0:case 11:case 15:ri(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:nc(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Kt=u;else e:for(o=s;Kt!==null;){u=Kt;var f=u.sibling,g=u.return;if(v0(u),u===o){Kt=null;break e}if(f!==null){f.return=g,Kt=f;break e}Kt=g}}}var Z1={getCacheForType:function(s){var i=on(Mt),o=i.data.get(s);return o===void 0&&(o=s(),i.data.set(s,o)),o}},eR=typeof WeakMap=="function"?WeakMap:Map,Ze=0,lt=null,Be=null,Ke=0,et=0,Pn=null,oi=!1,Io=!1,ep=!1,yr=0,bt=0,li=0,xa=0,tp=0,Xn=0,No=0,wc=null,Sn=null,np=!1,sp=0,Ih=1/0,Nh=null,ci=null,Zt=0,ui=null,ko=null,Oo=0,rp=0,ip=null,C0=null,Ec=0,ap=null;function jn(){if((Ze&2)!==0&&Ke!==0)return Ke&-Ke;if(B.T!==null){var s=_o;return s!==0?s:fp()}return Zs()}function I0(){Xn===0&&(Xn=(Ke&536870912)===0||We?Ol():536870912);var s=Wn.current;return s!==null&&(s.flags|=32),Xn}function Mn(s,i,o){(s===lt&&(et===2||et===9)||s.cancelPendingCommit!==null)&&(Do(s,0),hi(s,Ke,Xn,!1)),wt(s,o),((Ze&2)===0||s!==lt)&&(s===lt&&((Ze&2)===0&&(xa|=o),bt===4&&hi(s,Ke,Xn,!1)),Us(s))}function N0(s,i,o){if((Ze&6)!==0)throw Error(r(327));var u=!o&&(i&124)===0&&(i&s.expiredLanes)===0||Ur(s,i),f=u?sR(s,i):cp(s,i,!0),g=u;do{if(f===0){Io&&!u&&hi(s,i,0,!1);break}else{if(o=s.current.alternate,g&&!tR(o)){f=cp(s,i,!1),g=!1;continue}if(f===2){if(g=i,s.errorRecoveryDisabledLanes&g)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var x=s;f=wc;var U=x.current.memoizedState.isDehydrated;if(U&&(Do(x,E).flags|=256),E=cp(x,E,!1),E!==2){if(ep&&!U){x.errorRecoveryDisabledLanes|=g,xa|=g,f=4;break e}g=Sn,Sn=f,g!==null&&(Sn===null?Sn=g:Sn.push.apply(Sn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){Do(s,0),hi(s,i,0,!0);break}e:{switch(u=s,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:hi(u,i,Xn,!oi);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=sp+300-wn(),10<f)){if(hi(u,i,Xn,!oi),qn(u,0,!0)!==0)break e;u.timeoutHandle=ib(k0.bind(null,u,o,Sn,Nh,np,i,Xn,xa,No,oi,g,2,-0,0),f);break e}k0(u,o,Sn,Nh,np,i,Xn,xa,No,oi,g,0,-0,0)}}break}while(!0);Us(s)}function k0(s,i,o,u,f,g,E,x,U,G,Z,re,Q,W){if(s.timeoutHandle=-1,re=i.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(Ic={stylesheets:null,count:0,unsuspend:MR},S0(i),re=LR(),re!==null)){s.cancelPendingCommit=re(L0.bind(null,s,i,g,o,u,f,E,x,U,Z,1,Q,W)),hi(s,g,E,!G);return}L0(s,i,g,o,u,f,E,x,U)}function tR(s){for(var i=s;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!Nn(g(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function hi(s,i,o,u){i&=~tp,i&=~xa,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var f=i;0<f;){var g=31-mn(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&Vr(s,o,i)}function kh(){return(Ze&6)===0?(Tc(0),!1):!0}function op(){if(Be!==null){if(et===0)var s=Be.return;else s=Be,cr=_a=null,Sm(s),xo=null,fc=0,s=Be;for(;s!==null;)u0(s.alternate,s),s=s.return;Be=null}}function Do(s,i){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,_R(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),op(),lt=s,Be=o=ar(s.current,null),Ke=i,et=0,Pn=null,oi=!1,Io=Ur(s,i),ep=!1,No=Xn=tp=xa=li=bt=0,Sn=wc=null,np=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var f=31-mn(u),g=1<<f;i|=s[f],u&=~g}return yr=i,Zu(),o}function O0(s,i){Ue=null,B.H=vh,i===rc||i===lh?(i=Yv(),et=3):i===Gv?(i=Yv(),et=4):et=i===W_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Pn=i,Be===null&&(bt=1,Th(s,Gn(i,s.current)))}function D0(){var s=B.H;return B.H=vh,s===null?vh:s}function P0(){var s=B.A;return B.A=Z1,s}function lp(){bt=4,oi||(Ke&4194048)!==Ke&&Wn.current!==null||(Io=!0),(li&134217727)===0&&(xa&134217727)===0||lt===null||hi(lt,Ke,Xn,!1)}function cp(s,i,o){var u=Ze;Ze|=2;var f=D0(),g=P0();(lt!==s||Ke!==i)&&(Nh=null,Do(s,i)),i=!1;var E=bt;e:do try{if(et!==0&&Be!==null){var x=Be,U=Pn;switch(et){case 8:op(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(i=!0);var G=et;if(et=0,Pn=null,Po(s,x,U,G),o&&Io){E=0;break e}break;default:G=et,et=0,Pn=null,Po(s,x,U,G)}}nR(),E=bt;break}catch(Z){O0(s,Z)}while(!0);return i&&s.shellSuspendCounter++,cr=_a=null,Ze=u,B.H=f,B.A=g,Be===null&&(lt=null,Ke=0,Zu()),E}function nR(){for(;Be!==null;)j0(Be)}function sR(s,i){var o=Ze;Ze|=2;var u=D0(),f=P0();lt!==s||Ke!==i?(Nh=null,Ih=wn()+500,Do(s,i)):Io=Ur(s,i);e:do try{if(et!==0&&Be!==null){i=Be;var g=Pn;t:switch(et){case 1:et=0,Pn=null,Po(s,i,g,1);break;case 2:case 9:if(Kv(g)){et=0,Pn=null,M0(i);break}i=function(){et!==2&&et!==9||lt!==s||(et=7),Us(s)},g.then(i,i);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:Kv(g)?(et=0,Pn=null,M0(i)):(et=0,Pn=null,Po(s,i,g,7));break;case 5:var E=null;switch(Be.tag){case 26:E=Be.memoizedState;case 5:case 27:var x=Be;if(!E||yb(E)){et=0,Pn=null;var U=x.sibling;if(U!==null)Be=U;else{var G=x.return;G!==null?(Be=G,Oh(G)):Be=null}break t}}et=0,Pn=null,Po(s,i,g,5);break;case 6:et=0,Pn=null,Po(s,i,g,6);break;case 8:op(),bt=6;break e;default:throw Error(r(462))}}rR();break}catch(Z){O0(s,Z)}while(!0);return cr=_a=null,B.H=u,B.A=f,Ze=o,Be!==null?0:(lt=null,Ke=0,Zu(),bt)}function rR(){for(;Be!==null&&!Uf();)j0(Be)}function j0(s){var i=l0(s.alternate,s,yr);s.memoizedProps=s.pendingProps,i===null?Oh(s):Be=i}function M0(s){var i=s,o=i.alternate;switch(i.tag){case 15:case 0:i=n0(o,i,i.pendingProps,i.type,void 0,Ke);break;case 11:i=n0(o,i,i.pendingProps,i.type.render,i.ref,Ke);break;case 5:Sm(i);default:u0(o,i),i=Be=Uv(i,yr),i=l0(o,i,yr)}s.memoizedProps=s.pendingProps,i===null?Oh(s):Be=i}function Po(s,i,o,u){cr=_a=null,Sm(i),xo=null,fc=0;var f=i.return;try{if(K1(s,f,i,o,Ke)){bt=1,Th(s,Gn(o,s.current)),Be=null;return}}catch(g){if(f!==null)throw Be=f,g;bt=1,Th(s,Gn(o,s.current)),Be=null;return}i.flags&32768?(We||u===1?s=!0:Io||(Ke&536870912)!==0?s=!1:(oi=s=!0,(u===2||u===9||u===3||u===6)&&(u=Wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),U0(i,s)):Oh(i)}function Oh(s){var i=s;do{if((i.flags&32768)!==0){U0(i,oi);return}s=i.return;var o=Y1(i.alternate,i,yr);if(o!==null){Be=o;return}if(i=i.sibling,i!==null){Be=i;return}Be=i=s}while(i!==null);bt===0&&(bt=5)}function U0(s,i){do{var o=W1(s.alternate,s);if(o!==null){o.flags&=32767,Be=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(s=s.sibling,s!==null)){Be=s;return}Be=s=o}while(s!==null);bt=6,Be=null}function L0(s,i,o,u,f,g,E,x,U){s.cancelPendingCommit=null;do Dh();while(Zt!==0);if((Ze&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=Zf,Mu(s,o,g,E,x,U),s===lt&&(Be=lt=null,Ke=0),ko=i,ui=s,Oo=o,rp=g,ip=f,C0=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,lR(Js,function(){return $0(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=B.T,B.T=null,f=oe.p,oe.p=2,E=Ze,Ze|=4;try{X1(s,i,o)}finally{Ze=E,oe.p=f,B.T=u}}Zt=1,V0(),z0(),B0()}}function V0(){if(Zt===1){Zt=0;var s=ui,i=ko,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=B.T,B.T=null;var u=oe.p;oe.p=2;var f=Ze;Ze|=4;try{w0(i,s);var g=wp,E=Rv(s.containerInfo),x=g.focusedElem,U=g.selectionRange;if(E!==x&&x&&x.ownerDocument&&Av(x.ownerDocument.documentElement,x)){if(U!==null&&Qf(x)){var G=U.start,Z=U.end;if(Z===void 0&&(Z=G),"selectionStart"in x)x.selectionStart=G,x.selectionEnd=Math.min(Z,x.value.length);else{var re=x.ownerDocument||document,Q=re&&re.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),Ie=x.textContent.length,xe=Math.min(U.start,Ie),rt=U.end===void 0?xe:Math.min(U.end,Ie);!W.extend&&xe>rt&&(E=rt,rt=xe,xe=E);var q=xv(x,xe),z=xv(x,rt);if(q&&z&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==z.node||W.focusOffset!==z.offset)){var F=re.createRange();F.setStart(q.node,q.offset),W.removeAllRanges(),xe>rt?(W.addRange(F),W.extend(z.node,z.offset)):(F.setEnd(z.node,z.offset),W.addRange(F))}}}}for(re=[],W=x;W=W.parentNode;)W.nodeType===1&&re.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<re.length;x++){var ne=re[x];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Hh=!!bp,wp=bp=null}finally{Ze=f,oe.p=u,B.T=o}}s.current=i,Zt=2}}function z0(){if(Zt===2){Zt=0;var s=ui,i=ko,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=B.T,B.T=null;var u=oe.p;oe.p=2;var f=Ze;Ze|=4;try{y0(s,i.alternate,i)}finally{Ze=f,oe.p=u,B.T=o}}Zt=3}}function B0(){if(Zt===4||Zt===3){Zt=0,Nl();var s=ui,i=ko,o=Oo,u=C0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Zt=5:(Zt=0,ko=ui=null,q0(s,s.pendingLanes));var f=s.pendingLanes;if(f===0&&(ci=null),Pl(o),i=i.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(jr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=B.T,f=oe.p,oe.p=2,B.T=null;try{for(var g=s.onRecoverableError,E=0;E<u.length;E++){var x=u[E];g(x.value,{componentStack:x.stack})}}finally{B.T=i,oe.p=f}}(Oo&3)!==0&&Dh(),Us(s),f=s.pendingLanes,(o&4194090)!==0&&(f&42)!==0?s===ap?Ec++:(Ec=0,ap=s):Ec=0,Tc(0)}}function q0(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,nc(i)))}function Dh(s){return V0(),z0(),B0(),$0()}function $0(){if(Zt!==5)return!1;var s=ui,i=rp;rp=0;var o=Pl(Oo),u=B.T,f=oe.p;try{oe.p=32>o?32:o,B.T=null,o=ip,ip=null;var g=ui,E=Oo;if(Zt=0,ko=ui=null,Oo=0,(Ze&6)!==0)throw Error(r(331));var x=Ze;if(Ze|=4,A0(g.current),T0(g,g.current,E,o),Ze=x,Tc(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(jr,g)}catch{}return!0}finally{oe.p=f,B.T=u,q0(s,i)}}function F0(s,i,o){i=Gn(o,i),i=Lm(s.stateNode,i,2),s=ei(s,i,2),s!==null&&(wt(s,2),Us(s))}function it(s,i,o){if(s.tag===3)F0(s,s,o);else for(;i!==null;){if(i.tag===3){F0(i,s,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ci===null||!ci.has(u))){s=Gn(o,s),o=Q_(2),u=ei(i,o,2),u!==null&&(Y_(o,u,i,s),wt(u,2),Us(u));break}}i=i.return}}function up(s,i,o){var u=s.pingCache;if(u===null){u=s.pingCache=new eR;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(ep=!0,f.add(o),s=iR.bind(null,s,i,o),i.then(s,s))}function iR(s,i,o){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,lt===s&&(Ke&o)===o&&(bt===4||bt===3&&(Ke&62914560)===Ke&&300>wn()-sp?(Ze&2)===0&&Do(s,0):tp|=o,No===Ke&&(No=0)),Us(s)}function H0(s,i){i===0&&(i=Lr()),s=po(s,i),s!==null&&(wt(s,i),Us(s))}function aR(s){var i=s.memoizedState,o=0;i!==null&&(o=i.retryLane),H0(s,o)}function oR(s,i){var o=0;switch(s.tag){case 13:var u=s.stateNode,f=s.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),H0(s,o)}function lR(s,i){return Fi(s,i)}var Ph=null,jo=null,hp=!1,jh=!1,dp=!1,Aa=0;function Us(s){s!==jo&&s.next===null&&(jo===null?Ph=jo=s:jo=jo.next=s),jh=!0,hp||(hp=!0,uR())}function Tc(s,i){if(!dp&&jh){dp=!0;do for(var o=!1,u=Ph;u!==null;){if(s!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,x=u.pingedLanes;g=(1<<31-mn(42|s)+1)-1,g&=f&~(E&~x),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Y0(u,g))}else g=Ke,g=qn(u,u===lt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Ur(u,g)||(o=!0,Y0(u,g));u=u.next}while(o);dp=!1}}function cR(){G0()}function G0(){jh=hp=!1;var s=0;Aa!==0&&(vR()&&(s=Aa),Aa=0);for(var i=wn(),o=null,u=Ph;u!==null;){var f=u.next,g=K0(u,i);g===0?(u.next=null,o===null?Ph=f:o.next=f,f===null&&(jo=o)):(o=u,(s!==0||(g&3)!==0)&&(jh=!0)),u=f}Tc(s)}function K0(s,i){for(var o=s.suspendedLanes,u=s.pingedLanes,f=s.expirationTimes,g=s.pendingLanes&-62914561;0<g;){var E=31-mn(g),x=1<<E,U=f[E];U===-1?((x&o)===0||(x&u)!==0)&&(f[E]=Xa(x,i)):U<=i&&(s.expiredLanes|=x),g&=~x}if(i=lt,o=Ke,o=qn(s,s===i?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===i&&(et===2||et===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Wa(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Ur(s,o)){if(i=o&-o,i===s.callbackPriority)return i;switch(u!==null&&Wa(u),Pl(o)){case 2:case 8:o=Ft;break;case 32:o=Js;break;case 268435456:o=kl;break;default:o=Js}return u=Q0.bind(null,s),o=Fi(o,u),s.callbackPriority=i,s.callbackNode=o,i}return u!==null&&u!==null&&Wa(u),s.callbackPriority=2,s.callbackNode=null,2}function Q0(s,i){if(Zt!==0&&Zt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Dh()&&s.callbackNode!==o)return null;var u=Ke;return u=qn(s,s===lt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(N0(s,u,i),K0(s,wn()),s.callbackNode!=null&&s.callbackNode===o?Q0.bind(null,s):null)}function Y0(s,i){if(Dh())return null;N0(s,i,!0)}function uR(){bR(function(){(Ze&6)!==0?Fi(Pt,cR):G0()})}function fp(){return Aa===0&&(Aa=Ol()),Aa}function W0(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ls(""+s)}function X0(s,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,s.id&&o.setAttribute("form",s.id),i.parentNode.insertBefore(o,i),s=new FormData(s),o.parentNode.removeChild(o),s}function hR(s,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var g=W0((f[Xt]||null).action),E=u.submitter;E&&(i=(i=E[Xt]||null)?W0(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var x=new ia("action","action",null,u,f);s.push({event:x,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Aa!==0){var U=E?X0(f,E):new FormData(f);Dm(o,{pending:!0,data:U,method:f.method,action:g},null,U)}}else typeof g=="function"&&(x.preventDefault(),U=E?X0(f,E):new FormData(f),Dm(o,{pending:!0,data:U,method:f.method,action:g},g,U))},currentTarget:f}]})}}for(var mp=0;mp<Jf.length;mp++){var pp=Jf[mp],dR=pp.toLowerCase(),fR=pp[0].toUpperCase()+pp.slice(1);ds(dR,"on"+fR)}ds(Nv,"onAnimationEnd"),ds(kv,"onAnimationIteration"),ds(Ov,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(N1,"onTransitionRun"),ds(k1,"onTransitionStart"),ds(O1,"onTransitionCancel"),ds(Dv,"onTransitionEnd"),Is("onMouseEnter",["mouseout","mouseover"]),Is("onMouseLeave",["mouseout","mouseover"]),Is("onPointerEnter",["pointerout","pointerover"]),Is("onPointerLeave",["pointerout","pointerover"]),Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sc));function J0(s,i){i=(i&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var E=u.length-1;0<=E;E--){var x=u[E],U=x.instance,G=x.currentTarget;if(x=x.listener,U!==g&&f.isPropagationStopped())break e;g=x,f.currentTarget=G;try{g(f)}catch(Z){Eh(Z)}f.currentTarget=null,g=U}else for(E=0;E<u.length;E++){if(x=u[E],U=x.instance,G=x.currentTarget,x=x.listener,U!==g&&f.isPropagationStopped())break e;g=x,f.currentTarget=G;try{g(f)}catch(Z){Eh(Z)}f.currentTarget=null,g=U}}}}function qe(s,i){var o=i[Gi];o===void 0&&(o=i[Gi]=new Set);var u=s+"__bubble";o.has(u)||(Z0(i,s,2,!1),o.add(u))}function gp(s,i,o){var u=0;i&&(u|=4),Z0(o,s,u,i)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function yp(s){if(!s[Mh]){s[Mh]=!0,Uu.forEach(function(o){o!=="selectionchange"&&(mR.has(o)||gp(o,!1,s),gp(o,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Mh]||(i[Mh]=!0,gp("selectionchange",!1,i))}}function Z0(s,i,o,u){switch(Tb(i)){case 2:var f=BR;break;case 8:f=qR;break;default:f=kp}o=f.bind(null,i,o,s),f=void 0,!rr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?s.addEventListener(i,o,{capture:!0,passive:f}):s.addEventListener(i,o,!0):f!==void 0?s.addEventListener(i,o,{passive:f}):s.addEventListener(i,o,!1)}function vp(s,i,o,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var x=u.stateNode.containerInfo;if(x===f)break;if(E===4)for(E=u.return;E!==null;){var U=E.tag;if((U===3||U===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;x!==null;){if(E=As(x),E===null)return;if(U=E.tag,U===5||U===6||U===26||U===27){u=g=E;continue e}x=x.parentNode}}u=u.return}na(function(){var G=g,Z=Bl(o),re=[];e:{var Q=Pv.get(s);if(Q!==void 0){var W=ia,Ie=s;switch(s){case"keypress":if(sa(o)===0)break e;case"keydown":case"keyup":W=uo;break;case"focusin":Ie="focus",W=oo;break;case"focusout":Ie="blur",W=oo;break;case"beforeblur":case"afterblur":W=oo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=ua;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Fu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Wr;break;case Nv:case kv:case Ov:W=$l;break;case Dv:W=_;break;case"scroll":case"scrollend":W=oa;break;case"wheel":W=A;break;case"copy":case"cut":case"paste":W=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Gl;break;case"toggle":case"beforetoggle":W=X}var xe=(i&4)!==0,rt=!xe&&(s==="scroll"||s==="scrollend"),q=xe?Q!==null?Q+"Capture":null:Q;xe=[];for(var z=G,F;z!==null;){var ne=z;if(F=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||F===null||q===null||(ne=Qr(z,q),ne!=null&&xe.push(xc(z,ne,F))),rt)break;z=z.return}0<xe.length&&(Q=new W(Q,Ie,null,o,Z),re.push({event:Q,listeners:xe}))}}if((i&7)===0){e:{if(Q=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",Q&&o!==zl&&(Ie=o.relatedTarget||o.fromElement)&&(As(Ie)||Ie[er]))break e;if((W||Q)&&(Q=Z.window===Z?Z:(Q=Z.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(Ie=o.relatedTarget||o.toElement,W=G,Ie=Ie?As(Ie):null,Ie!==null&&(rt=l(Ie),xe=Ie.tag,Ie!==rt||xe!==5&&xe!==27&&xe!==6)&&(Ie=null)):(W=null,Ie=G),W!==Ie)){if(xe=ua,ne="onMouseLeave",q="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(xe=Gl,ne="onPointerLeave",q="onPointerEnter",z="pointer"),rt=W==null?Q:qr(W),F=Ie==null?Q:qr(Ie),Q=new xe(ne,z+"leave",W,o,Z),Q.target=rt,Q.relatedTarget=F,ne=null,As(Z)===G&&(xe=new xe(q,z+"enter",Ie,o,Z),xe.target=F,xe.relatedTarget=rt,ne=xe),rt=ne,W&&Ie)t:{for(xe=W,q=Ie,z=0,F=xe;F;F=Mo(F))z++;for(F=0,ne=q;ne;ne=Mo(ne))F++;for(;0<z-F;)xe=Mo(xe),z--;for(;0<F-z;)q=Mo(q),F--;for(;z--;){if(xe===q||q!==null&&xe===q.alternate)break t;xe=Mo(xe),q=Mo(q)}xe=null}else xe=null;W!==null&&eb(re,Q,W,xe,!1),Ie!==null&&rt!==null&&eb(re,rt,Ie,xe,!0)}}e:{if(Q=G?qr(G):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var ye=_v;else if(yv(Q))if(bv)ye=R1;else{ye=x1;var ze=S1}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&ro(G.elementType)&&(ye=_v):ye=A1;if(ye&&(ye=ye(s,G))){vv(re,ye,o,Z);break e}ze&&ze(s,Q,G),s==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&Ul(Q,"number",Q.value)}switch(ze=G?qr(G):window,s){case"focusin":(yv(ze)||ze.contentEditable==="true")&&(ho=ze,Yf=G,Xl=null);break;case"focusout":Xl=Yf=ho=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,Cv(re,o,Z);break;case"selectionchange":if(I1)break;case"keydown":case"keyup":Cv(re,o,Z)}var we;if(Oe)e:{switch(s){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else hs?cs(s,o)&&(Ae="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(Ae="onCompositionStart");Ae&&(St&&o.locale!=="ko"&&(hs||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&hs&&(we=$u()):(Hn=Z,ot="value"in Hn?Hn.value:Hn.textContent,hs=!0)),ze=Uh(G,Ae),0<ze.length&&(Ae=new Hl(Ae,s,null,o,Z),re.push({event:Ae,listeners:ze}),we?Ae.data=we:(we=us(o),we!==null&&(Ae.data=we)))),(we=Je?Kl(s,o):w1(s,o))&&(Ae=Uh(G,"onBeforeInput"),0<Ae.length&&(ze=new Hl("onBeforeInput","beforeinput",null,o,Z),re.push({event:ze,listeners:Ae}),ze.data=we)),hR(re,s,G,o,Z)}J0(re,i)})}function xc(s,i,o){return{instance:s,listener:i,currentTarget:o}}function Uh(s,i){for(var o=i+"Capture",u=[];s!==null;){var f=s,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Qr(s,o),f!=null&&u.unshift(xc(s,f,g)),f=Qr(s,i),f!=null&&u.push(xc(s,f,g))),s.tag===3)return u;s=s.return}return[]}function Mo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function eb(s,i,o,u,f){for(var g=i._reactName,E=[];o!==null&&o!==u;){var x=o,U=x.alternate,G=x.stateNode;if(x=x.tag,U!==null&&U===u)break;x!==5&&x!==26&&x!==27||G===null||(U=G,f?(G=Qr(o,g),G!=null&&E.unshift(xc(o,G,U))):f||(G=Qr(o,g),G!=null&&E.push(xc(o,G,U)))),o=o.return}E.length!==0&&s.push({event:i,listeners:E})}var pR=/\r\n?/g,gR=/\u0000|\uFFFD/g;function tb(s){return(typeof s=="string"?s:""+s).replace(pR,`
`).replace(gR,"")}function nb(s,i){return i=tb(i),tb(s)===i}function Lh(){}function st(s,i,o,u,f,g){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Fn(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Fn(s,""+u);break;case"className":Xi(s,"class",u);break;case"tabIndex":Xi(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Xi(s,o,u);break;case"style":Vl(s,u,g);break;case"data":if(i!=="object"){Xi(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=ls(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(i!=="input"&&st(s,i,"name",f.name,f,null),st(s,i,"formEncType",f.formEncType,f,null),st(s,i,"formMethod",f.formMethod,f,null),st(s,i,"formTarget",f.formTarget,f,null)):(st(s,i,"encType",f.encType,f,null),st(s,i,"method",f.method,f,null),st(s,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=ls(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=Lh);break;case"onScroll":u!=null&&qe("scroll",s);break;case"onScrollEnd":u!=null&&qe("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=ls(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":qe("beforetoggle",s),qe("toggle",s),Wi(s,"popover",u);break;case"xlinkActuate":$n(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":$n(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":$n(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":$n(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":$n(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":$n(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":$n(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":$n(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":$n(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Wi(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=zu.get(o)||o,Wi(s,o,u))}}function _p(s,i,o,u,f,g){switch(o){case"style":Vl(s,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(r(60));s.innerHTML=o}}break;case"children":typeof u=="string"?Fn(s,u):(typeof u=="number"||typeof u=="bigint")&&Fn(s,""+u);break;case"onScroll":u!=null&&qe("scroll",s);break;case"onScrollEnd":u!=null&&qe("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Lh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qi.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),g=s[Xt]||null,g=g!=null?g[o]:null,typeof g=="function"&&s.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(i,u,f);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Wi(s,o,u)}}}function en(s,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",s),qe("load",s);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:st(s,i,g,E,o,null)}}f&&st(s,i,"srcSet",o.srcSet,o,null),u&&st(s,i,"src",o.src,o,null);return;case"input":qe("invalid",s);var x=g=E=f=null,U=null,G=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":E=Z;break;case"checked":U=Z;break;case"defaultChecked":G=Z;break;case"value":g=Z;break;case"defaultValue":x=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,i));break;default:st(s,i,u,Z,o,null)}}Ml(s,g,x,U,G,E,f,!1),Hr(s);return;case"select":qe("invalid",s),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(x=o[f],x!=null))switch(f){case"value":g=x;break;case"defaultValue":E=x;break;case"multiple":u=x;default:st(s,i,f,x,o,null)}i=g,o=E,s.multiple=!!u,i!=null?Gr(s,!!u,i,!1):o!=null&&Gr(s,!!u,o,!0);return;case"textarea":qe("invalid",s),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(x=o[E],x!=null))switch(E){case"value":u=x;break;case"defaultValue":f=x;break;case"children":g=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:st(s,i,E,x,o,null)}Vu(s,u,f,g),Hr(s);return;case"option":for(U in o)if(o.hasOwnProperty(U)&&(u=o[U],u!=null))switch(U){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:st(s,i,U,u,o,null)}return;case"dialog":qe("beforetoggle",s),qe("toggle",s),qe("cancel",s),qe("close",s);break;case"iframe":case"object":qe("load",s);break;case"video":case"audio":for(u=0;u<Sc.length;u++)qe(Sc[u],s);break;case"image":qe("error",s),qe("load",s);break;case"details":qe("toggle",s);break;case"embed":case"source":case"link":qe("error",s),qe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(u=o[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:st(s,i,G,u,o,null)}return;default:if(ro(i)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&_p(s,i,Z,u,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(u=o[x],u!=null&&st(s,i,x,u,o,null))}function yR(s,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,x=null,U=null,G=null,Z=null;for(W in o){var re=o[W];if(o.hasOwnProperty(W)&&re!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":U=re;default:u.hasOwnProperty(W)||st(s,i,W,null,u,re)}}for(var Q in u){var W=u[Q];if(re=o[Q],u.hasOwnProperty(Q)&&(W!=null||re!=null))switch(Q){case"type":g=W;break;case"name":f=W;break;case"checked":G=W;break;case"defaultChecked":Z=W;break;case"value":E=W;break;case"defaultValue":x=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:W!==re&&st(s,i,Q,W,u,re)}}jl(s,E,x,U,G,Z,g,f);return;case"select":W=E=x=Q=null;for(g in o)if(U=o[g],o.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":W=U;default:u.hasOwnProperty(g)||st(s,i,g,null,u,U)}for(f in u)if(g=u[f],U=o[f],u.hasOwnProperty(f)&&(g!=null||U!=null))switch(f){case"value":Q=g;break;case"defaultValue":x=g;break;case"multiple":E=g;default:g!==U&&st(s,i,f,g,u,U)}i=x,o=E,u=W,Q!=null?Gr(s,!!o,Q,!1):!!u!=!!o&&(i!=null?Gr(s,!!o,i,!0):Gr(s,!!o,o?[]:"",!1));return;case"textarea":W=Q=null;for(x in o)if(f=o[x],o.hasOwnProperty(x)&&f!=null&&!u.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:st(s,i,x,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":Q=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&st(s,i,E,f,u,g)}Lu(s,Q,W);return;case"option":for(var Ie in o)if(Q=o[Ie],o.hasOwnProperty(Ie)&&Q!=null&&!u.hasOwnProperty(Ie))switch(Ie){case"selected":s.selected=!1;break;default:st(s,i,Ie,null,u,Q)}for(U in u)if(Q=u[U],W=o[U],u.hasOwnProperty(U)&&Q!==W&&(Q!=null||W!=null))switch(U){case"selected":s.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:st(s,i,U,Q,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in o)Q=o[xe],o.hasOwnProperty(xe)&&Q!=null&&!u.hasOwnProperty(xe)&&st(s,i,xe,null,u,Q);for(G in u)if(Q=u[G],W=o[G],u.hasOwnProperty(G)&&Q!==W&&(Q!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:st(s,i,G,Q,u,W)}return;default:if(ro(i)){for(var rt in o)Q=o[rt],o.hasOwnProperty(rt)&&Q!==void 0&&!u.hasOwnProperty(rt)&&_p(s,i,rt,void 0,u,Q);for(Z in u)Q=u[Z],W=o[Z],!u.hasOwnProperty(Z)||Q===W||Q===void 0&&W===void 0||_p(s,i,Z,Q,u,W);return}}for(var q in o)Q=o[q],o.hasOwnProperty(q)&&Q!=null&&!u.hasOwnProperty(q)&&st(s,i,q,null,u,Q);for(re in u)Q=u[re],W=o[re],!u.hasOwnProperty(re)||Q===W||Q==null&&W==null||st(s,i,re,Q,u,W)}var bp=null,wp=null;function Vh(s){return s.nodeType===9?s:s.ownerDocument}function sb(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rb(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function Ep(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Tp=null;function vR(){var s=window.event;return s&&s.type==="popstate"?s===Tp?!1:(Tp=s,!0):(Tp=null,!1)}var ib=typeof setTimeout=="function"?setTimeout:void 0,_R=typeof clearTimeout=="function"?clearTimeout:void 0,ab=typeof Promise=="function"?Promise:void 0,bR=typeof queueMicrotask=="function"?queueMicrotask:typeof ab<"u"?function(s){return ab.resolve(null).then(s).catch(wR)}:ib;function wR(s){setTimeout(function(){throw s})}function di(s){return s==="head"}function ob(s,i){var o=i,u=0,f=0;do{var g=o.nextSibling;if(s.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=s.ownerDocument;if(o&1&&Ac(E.documentElement),o&2&&Ac(E.body),o&4)for(o=E.head,Ac(o),E=o.firstChild;E;){var x=E.nextSibling,U=E.nodeName;E[Br]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=x}}if(f===0){s.removeChild(g),Pc(i);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Pc(i)}function Sp(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Sp(o),Za(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function ER(s,i,o,u){for(;s.nodeType===1;){var f=o;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Br])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(g=s.getAttribute("rel"),g==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(g!==f.rel||s.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||s.getAttribute("title")!==(f.title==null?null:f.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(g=s.getAttribute("src"),(g!==(f.src==null?null:f.src)||s.getAttribute("type")!==(f.type==null?null:f.type)||s.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&s.getAttribute("name")===g)return s}else return s;if(s=ms(s.nextSibling),s===null)break}return null}function TR(s,i,o){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=ms(s.nextSibling),s===null))return null;return s}function xp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function SR(s,i){var o=s.ownerDocument;if(s.data!=="$?"||o.readyState==="complete")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function ms(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}var Ap=null;function lb(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(i===0)return s;i--}else o==="/$"&&i++}s=s.previousSibling}return null}function cb(s,i,o){switch(i=Vh(o),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Ac(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Za(s)}var Jn=new Map,ub=new Set;function zh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var vr=oe.d;oe.d={f:xR,r:AR,D:RR,C:CR,L:IR,m:NR,X:OR,S:kR,M:DR};function xR(){var s=vr.f(),i=kh();return s||i}function AR(s){var i=Rs(s);i!==null&&i.tag===5&&i.type==="form"?N_(i):vr.r(s)}var Uo=typeof document>"u"?null:document;function hb(s,i,o){var u=Uo;if(u&&typeof i=="string"&&i){var f=Ht(i);f='link[rel="'+s+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),ub.has(f)||(ub.add(f),s={rel:s,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),en(i,"link",s),Tt(i),u.head.appendChild(i)))}}function RR(s){vr.D(s),hb("dns-prefetch",s,null)}function CR(s,i){vr.C(s,i),hb("preconnect",s,i)}function IR(s,i,o){vr.L(s,i,o);var u=Uo;if(u&&s&&i){var f='link[rel="preload"][as="'+Ht(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ht(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ht(o.imageSizes)+'"]')):f+='[href="'+Ht(s)+'"]';var g=f;switch(i){case"style":g=Lo(s);break;case"script":g=Vo(s)}Jn.has(g)||(s=y({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:s,as:i},o),Jn.set(g,s),u.querySelector(f)!==null||i==="style"&&u.querySelector(Rc(g))||i==="script"&&u.querySelector(Cc(g))||(i=u.createElement("link"),en(i,"link",s),Tt(i),u.head.appendChild(i)))}}function NR(s,i){vr.m(s,i);var o=Uo;if(o&&s){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Ht(u)+'"][href="'+Ht(s)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Vo(s)}if(!Jn.has(g)&&(s=y({rel:"modulepreload",href:s},i),Jn.set(g,s),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Cc(g)))return}u=o.createElement("link"),en(u,"link",s),Tt(u),o.head.appendChild(u)}}}function kR(s,i,o){vr.S(s,i,o);var u=Uo;if(u&&s){var f=$r(u).hoistableStyles,g=Lo(s);i=i||"default";var E=f.get(g);if(!E){var x={loading:0,preload:null};if(E=u.querySelector(Rc(g)))x.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":i},o),(o=Jn.get(g))&&Rp(s,o);var U=E=u.createElement("link");Tt(U),en(U,"link",s),U._p=new Promise(function(G,Z){U.onload=G,U.onerror=Z}),U.addEventListener("load",function(){x.loading|=1}),U.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Bh(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:x},f.set(g,E)}}}function OR(s,i){vr.X(s,i);var o=Uo;if(o&&s){var u=$r(o).hoistableScripts,f=Vo(s),g=u.get(f);g||(g=o.querySelector(Cc(f)),g||(s=y({src:s,async:!0},i),(i=Jn.get(f))&&Cp(s,i),g=o.createElement("script"),Tt(g),en(g,"link",s),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function DR(s,i){vr.M(s,i);var o=Uo;if(o&&s){var u=$r(o).hoistableScripts,f=Vo(s),g=u.get(f);g||(g=o.querySelector(Cc(f)),g||(s=y({src:s,async:!0,type:"module"},i),(i=Jn.get(f))&&Cp(s,i),g=o.createElement("script"),Tt(g),en(g,"link",s),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function db(s,i,o,u){var f=(f=Te.current)?zh(f):null;if(!f)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Lo(o.href),o=$r(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=Lo(o.href);var g=$r(f).hoistableStyles,E=g.get(s);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(s,E),(g=f.querySelector(Rc(s)))&&!g._p&&(E.instance=g,E.state.loading=5),Jn.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Jn.set(s,o),g||PR(f,s,o,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Vo(o),o=$r(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Lo(s){return'href="'+Ht(s)+'"'}function Rc(s){return'link[rel="stylesheet"]['+s+"]"}function fb(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function PR(s,i,o,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),en(i,"link",o),Tt(i),s.head.appendChild(i))}function Vo(s){return'[src="'+Ht(s)+'"]'}function Cc(s){return"script[async]"+s}function mb(s,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+Ht(o.href)+'"]');if(u)return i.instance=u,Tt(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Tt(u),en(u,"style",f),Bh(u,o.precedence,s),i.instance=u;case"stylesheet":f=Lo(o.href);var g=s.querySelector(Rc(f));if(g)return i.state.loading|=4,i.instance=g,Tt(g),g;u=fb(o),(f=Jn.get(f))&&Rp(u,f),g=(s.ownerDocument||s).createElement("link"),Tt(g);var E=g;return E._p=new Promise(function(x,U){E.onload=x,E.onerror=U}),en(g,"link",u),i.state.loading|=4,Bh(g,o.precedence,s),i.instance=g;case"script":return g=Vo(o.src),(f=s.querySelector(Cc(g)))?(i.instance=f,Tt(f),f):(u=o,(f=Jn.get(g))&&(u=y({},o),Cp(u,f)),s=s.ownerDocument||s,f=s.createElement("script"),Tt(f),en(f,"link",u),s.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Bh(u,o.precedence,s));return i.instance}function Bh(s,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var x=u[E];if(x.dataset.precedence===i)g=x;else if(g!==f)break}g?g.parentNode.insertBefore(s,g.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(s,i.firstChild))}function Rp(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function Cp(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var qh=null;function pb(s,i,o){if(qh===null){var u=new Map,f=qh=new Map;f.set(o,u)}else f=qh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),f=0;f<o.length;f++){var g=o[f];if(!(g[Br]||g[Et]||s==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=s+E;var x=u.get(E);x?x.push(g):u.set(E,[g])}}return u}function gb(s,i,o){s=s.ownerDocument||s,s.head.insertBefore(o,i==="title"?s.querySelector("head > title"):null)}function jR(s,i,o){if(o===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function yb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ic=null;function MR(){}function UR(s,i,o){if(Ic===null)throw Error(r(475));var u=Ic;if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Lo(o.href),g=s.querySelector(Rc(f));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(u.count++,u=$h.bind(u),s.then(u,u)),i.state.loading|=4,i.instance=g,Tt(g);return}g=s.ownerDocument||s,o=fb(o),(f=Jn.get(f))&&Rp(o,f),g=g.createElement("link"),Tt(g);var E=g;E._p=new Promise(function(x,U){E.onload=x,E.onerror=U}),en(g,"link",o),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=$h.bind(u),s.addEventListener("load",i),s.addEventListener("error",i))}}function LR(){if(Ic===null)throw Error(r(475));var s=Ic;return s.stylesheets&&s.count===0&&Ip(s,s.stylesheets),0<s.count?function(i){var o=setTimeout(function(){if(s.stylesheets&&Ip(s,s.stylesheets),s.unsuspend){var u=s.unsuspend;s.unsuspend=null,u()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(o)}}:null}function $h(){if(this.count--,this.count===0){if(this.stylesheets)Ip(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Fh=null;function Ip(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Fh=new Map,i.forEach(VR,s),Fh=null,$h.call(s))}function VR(s,i){if(!(i.state.loading&4)){var o=Fh.get(s);if(o)var u=o.get(null);else{o=new Map,Fh.set(s,o);for(var f=s.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=i.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=$h.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(f,s.firstChild)),i.state.loading|=4}}var Nc={$$typeof:K,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function zR(s,i,o,u,f,g,E,x){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ja(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ja(0),this.hiddenUpdates=Ja(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function vb(s,i,o,u,f,g,E,x,U,G,Z,re){return s=new zR(s,i,o,E,x,U,G,re),i=1,g===!0&&(i|=24),g=kn(3,null,null,i),s.current=g,g.stateNode=s,i=um(),i.refCount++,s.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:i},mm(g),s}function _b(s){return s?(s=go,s):go}function bb(s,i,o,u,f,g){f=_b(f),u.context===null?u.context=f:u.pendingContext=f,u=Zr(i),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=ei(s,u,i),o!==null&&(Mn(o,s,i),ac(o,s,i))}function wb(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<i?o:i}}function Np(s,i){wb(s,i),(s=s.alternate)&&wb(s,i)}function Eb(s){if(s.tag===13){var i=po(s,67108864);i!==null&&Mn(i,s,67108864),Np(s,67108864)}}var Hh=!0;function BR(s,i,o,u){var f=B.T;B.T=null;var g=oe.p;try{oe.p=2,kp(s,i,o,u)}finally{oe.p=g,B.T=f}}function qR(s,i,o,u){var f=B.T;B.T=null;var g=oe.p;try{oe.p=8,kp(s,i,o,u)}finally{oe.p=g,B.T=f}}function kp(s,i,o,u){if(Hh){var f=Op(u);if(f===null)vp(s,i,u,Gh,o),Sb(s,u);else if(FR(f,s,i,o,u))u.stopPropagation();else if(Sb(s,u),i&4&&-1<$R.indexOf(s)){for(;f!==null;){var g=Rs(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=is(g.pendingLanes);if(E!==0){var x=g;for(x.pendingLanes|=2,x.entangledLanes|=2;E;){var U=1<<31-mn(E);x.entanglements[1]|=U,E&=~U}Us(g),(Ze&6)===0&&(Ih=wn()+500,Tc(0))}}break;case 13:x=po(g,2),x!==null&&Mn(x,g,2),kh(),Np(g,2)}if(g=Op(u),g===null&&vp(s,i,u,Gh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else vp(s,i,u,null,o)}}function Op(s){return s=Bl(s),Dp(s)}var Gh=null;function Dp(s){if(Gh=null,s=As(s),s!==null){var i=l(s);if(i===null)s=null;else{var o=i.tag;if(o===13){if(s=c(i),s!==null)return s;s=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Gh=s,null}function Tb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Du()){case Pt:return 2;case Ft:return 8;case Js:case Lf:return 32;case kl:return 268435456;default:return 32}default:return 32}}var Pp=!1,fi=null,mi=null,pi=null,kc=new Map,Oc=new Map,gi=[],$R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sb(s,i){switch(s){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":kc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(i.pointerId)}}function Dc(s,i,o,u,f,g){return s===null||s.nativeEvent!==g?(s={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Rs(i),i!==null&&Eb(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),s)}function FR(s,i,o,u,f){switch(i){case"focusin":return fi=Dc(fi,s,i,o,u,f),!0;case"dragenter":return mi=Dc(mi,s,i,o,u,f),!0;case"mouseover":return pi=Dc(pi,s,i,o,u,f),!0;case"pointerover":var g=f.pointerId;return kc.set(g,Dc(kc.get(g)||null,s,i,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Oc.set(g,Dc(Oc.get(g)||null,s,i,o,u,f)),!0}return!1}function xb(s){var i=As(s.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){s.blockedOn=i,Bf(s.priority,function(){if(o.tag===13){var u=jn();u=Dl(u);var f=po(o,u);f!==null&&Mn(f,o,u),Np(o,u)}});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Kh(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var o=Op(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);zl=u,o.target.dispatchEvent(u),zl=null}else return i=Rs(o),i!==null&&Eb(i),s.blockedOn=o,!1;i.shift()}return!0}function Ab(s,i,o){Kh(s)&&o.delete(i)}function HR(){Pp=!1,fi!==null&&Kh(fi)&&(fi=null),mi!==null&&Kh(mi)&&(mi=null),pi!==null&&Kh(pi)&&(pi=null),kc.forEach(Ab),Oc.forEach(Ab)}function Qh(s,i){s.blockedOn===i&&(s.blockedOn=null,Pp||(Pp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HR)))}var Yh=null;function Rb(s){Yh!==s&&(Yh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Yh===s&&(Yh=null);for(var i=0;i<s.length;i+=3){var o=s[i],u=s[i+1],f=s[i+2];if(typeof u!="function"){if(Dp(u||o)===null)continue;break}var g=Rs(o);g!==null&&(s.splice(i,3),i-=3,Dm(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Pc(s){function i(U){return Qh(U,s)}fi!==null&&Qh(fi,s),mi!==null&&Qh(mi,s),pi!==null&&Qh(pi,s),kc.forEach(i),Oc.forEach(i);for(var o=0;o<gi.length;o++){var u=gi[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<gi.length&&(o=gi[0],o.blockedOn===null);)xb(o),o.blockedOn===null&&gi.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[Xt]||null;if(typeof g=="function")E||Rb(o);else if(E){var x=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Xt]||null)x=E.formAction;else if(Dp(f)!==null)continue}else x=E.action;typeof x=="function"?o[u+1]=x:(o.splice(u,3),u-=3),Rb(o)}}}function jp(s){this._internalRoot=s}Wh.prototype.render=jp.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=jn();bb(o,u,s,i,null,null)},Wh.prototype.unmount=jp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;bb(s.current,2,null,s,null,null),kh(),i[er]=null}};function Wh(s){this._internalRoot=s}Wh.prototype.unstable_scheduleHydration=function(s){if(s){var i=Zs();s={blockedOn:null,target:s,priority:i};for(var o=0;o<gi.length&&i!==0&&i<gi[o].priority;o++);gi.splice(o,0,s),o===0&&xb(s)}};var Cb=e.version;if(Cb!=="19.1.1")throw Error(r(527,Cb,"19.1.1"));oe.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=m(i),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var GR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{jr=Xh.inject(GR),rn=Xh}catch{}}return Mc.createRoot=function(s,i){if(!a(s))throw Error(r(299));var o=!1,u="",f=F_,g=H_,E=G_,x=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(x=i.unstable_transitionCallbacks)),i=vb(s,1,!1,null,null,o,u,f,g,E,x,null),s[er]=i.current,yp(s),new jp(i)},Mc.hydrateRoot=function(s,i,o){if(!a(s))throw Error(r(299));var u=!1,f="",g=F_,E=H_,x=G_,U=null,G=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(U=o.unstable_transitionCallbacks),o.formState!==void 0&&(G=o.formState)),i=vb(s,1,!0,i,o??null,u,f,g,E,x,U,G),i.context=_b(null),o=i.current,u=jn(),u=Dl(u),f=Zr(u),f.callback=null,ei(o,f,u),o=u,i.current.lanes=o,wt(i,o),Us(i),s[er]=i.current,yp(s),new Wh(i)},Mc.version="19.1.1",Mc}var Lb;function sC(){if(Lb)return Lp.exports;Lb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lp.exports=nC(),Lp.exports}var rC=sC();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Vb="popstate";function iC(n={}){function e(r,a){let{pathname:l,search:c,hash:d}=r.location;return pg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:nu(a)}return oC(e,t,null,n)}function qt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Qs(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aC(){return Math.random().toString(36).substring(2,10)}function zb(n,e){return{usr:n.state,key:n.key,idx:e}}function pg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?pu(e):e,state:t,key:e&&e.key||r||aC()}}function nu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function pu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function oC(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,d="POP",m=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function b(){d="POP";let V=y(),$=V==null?null:V-p;p=V,m&&m({action:d,location:L.location,delta:$})}function T(V,$){d="PUSH";let Y=pg(L.location,V,$);p=y()+1;let K=zb(Y,p),ee=L.createHref(Y);try{c.pushState(K,"",ee)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;a.location.assign(ee)}l&&m&&m({action:d,location:L.location,delta:1})}function C(V,$){d="REPLACE";let Y=pg(L.location,V,$);p=y();let K=zb(Y,p),ee=L.createHref(Y);c.replaceState(K,"",ee),l&&m&&m({action:d,location:L.location,delta:0})}function N(V){return lC(V)}let L={get action(){return d},get location(){return n(a,c)},listen(V){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Vb,b),m=V,()=>{a.removeEventListener(Vb,b),m=null}},createHref(V){return e(a,V)},createURL:N,encodeLocation(V){let $=N(V);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:T,replace:C,go(V){return c.go(V)}};return L}function lC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),qt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:nu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function dT(n,e,t="/"){return cC(n,e,t,!1)}function cC(n,e,t,r){let a=typeof e=="string"?pu(e):e,l=Rr(a.pathname||"/",t);if(l==null)return null;let c=fT(n);uC(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=wC(l);d=_C(c[m],p,r)}return d}function fT(n,e=[],t=[],r="",a=!1){let l=(c,d,m=a,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&m)return;qt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let b=xr([r,y.relativePath]),T=t.concat(y);c.children&&c.children.length>0&&(qt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),fT(c.children,e,T,b,m)),!(c.path==null&&!c.index)&&e.push({path:b,score:yC(b,c.index),routesMeta:T})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let m of mT(c.path))l(c,d,!0,m)}),e}function mT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=mT(r.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function uC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:vC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var hC=/^:[\w-]+$/,dC=3,fC=2,mC=1,pC=10,gC=-2,Bb=n=>n==="*";function yC(n,e){let t=n.split("/"),r=t.length;return t.some(Bb)&&(r+=gC),e&&(r+=fC),t.filter(a=>!Bb(a)).reduce((a,l)=>a+(hC.test(l)?dC:l===""?mC:pC),r)}function vC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function _C(n,e,t=!1){let{routesMeta:r}=n,a={},l="/",c=[];for(let d=0;d<r.length;++d){let m=r[d],p=d===r.length-1,y=l==="/"?e:e.slice(l.length)||"/",b=xd({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),T=m.route;if(!b&&p&&t&&!r[r.length-1].route.index&&(b=xd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:xr([l,b.pathname]),pathnameBase:xC(xr([l,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(l=xr([l,b.pathnameBase]))}return c}function xd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=bC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:b},T)=>{if(y==="*"){let N=d[T]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const C=d[T];return b&&!C?p[y]=void 0:p[y]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function bC(n,e=!1,t=!0){Qs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(r.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function wC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Rr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function EC(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?pu(n):n;return{pathname:t?t.startsWith("/")?t:TC(t,e):e,search:AC(r),hash:RC(a)}}function TC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function qp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pT(n){let e=SC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function gT(n,e,t,r=!1){let a;typeof n=="string"?a=pu(n):(a={...n},qt(!a.pathname||!a.pathname.includes("?"),qp("?","pathname","search",a)),qt(!a.pathname||!a.pathname.includes("#"),qp("#","pathname","hash",a)),qt(!a.search||!a.search.includes("#"),qp("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let b=e.length-1;if(!r&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),b-=1;a.pathname=T.join("/")}d=b>=0?e[b]:"/"}let m=EC(a,d),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var xr=n=>n.join("/").replace(/\/\/+/g,"/"),xC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),AC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,RC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function CC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var yT=["POST","PUT","PATCH","DELETE"];new Set(yT);var IC=["GET",...yT];new Set(IC);var vl=D.createContext(null);vl.displayName="DataRouter";var of=D.createContext(null);of.displayName="DataRouterState";D.createContext(!1);var vT=D.createContext({isTransitioning:!1});vT.displayName="ViewTransition";var NC=D.createContext(new Map);NC.displayName="Fetchers";var kC=D.createContext(null);kC.displayName="Await";var Xs=D.createContext(null);Xs.displayName="Navigation";var lf=D.createContext(null);lf.displayName="Location";var Or=D.createContext({outlet:null,matches:[],isDataRoute:!1});Or.displayName="Route";var oy=D.createContext(null);oy.displayName="RouteError";function OC(n,{relative:e}={}){qt(gu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=D.useContext(Xs),{hash:a,pathname:l,search:c}=yu(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:xr([t,l])),r.createHref({pathname:d,search:c,hash:a})}function gu(){return D.useContext(lf)!=null}function Fa(){return qt(gu(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(lf).location}var _T="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bT(n){D.useContext(Xs).static||D.useLayoutEffect(n)}function DC(){let{isDataRoute:n}=D.useContext(Or);return n?GC():PC()}function PC(){qt(gu(),"useNavigate() may be used only in the context of a <Router> component.");let n=D.useContext(vl),{basename:e,navigator:t}=D.useContext(Xs),{matches:r}=D.useContext(Or),{pathname:a}=Fa(),l=JSON.stringify(pT(r)),c=D.useRef(!1);return bT(()=>{c.current=!0}),D.useCallback((m,p={})=>{if(Qs(c.current,_T),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=gT(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:xr([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,n])}D.createContext(null);function yu(n,{relative:e}={}){let{matches:t}=D.useContext(Or),{pathname:r}=Fa(),a=JSON.stringify(pT(t));return D.useMemo(()=>gT(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function jC(n,e,t,r,a){qt(gu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=D.useContext(Xs),{matches:c}=D.useContext(Or),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",y=d?d.pathnameBase:"/",b=d&&d.route;{let Y=b&&b.path||"";wT(p,!b||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let T=Fa(),C;C=T;let N=C.pathname||"/",L=N;if(y!=="/"){let Y=y.replace(/^\//,"").split("/");L="/"+N.replace(/^\//,"").split("/").slice(Y.length).join("/")}let V=dT(n,{pathname:L});return Qs(b||V!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Qs(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),zC(V&&V.map(Y=>Object.assign({},Y,{params:Object.assign({},m,Y.params),pathname:xr([y,l.encodeLocation?l.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?y:xr([y,l.encodeLocation?l.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),c,t,r,a)}function MC(){let n=HC(),e=CC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:l},"ErrorBoundary")," or"," ",D.createElement("code",{style:l},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:a},t):null,c)}var UC=D.createElement(MC,null),LC=class extends D.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?D.createElement(Or.Provider,{value:this.props.routeContext},D.createElement(oy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VC({routeContext:n,match:e,children:t}){let r=D.useContext(vl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Or.Provider,{value:n},t)}function zC(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let p=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);qt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let d=!1,m=-1;if(t)for(let p=0;p<l.length;p++){let y=l[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=p),y.route.id){let{loaderData:b,errors:T}=t,C=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||C){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((p,y,b)=>{let T,C=!1,N=null,L=null;t&&(T=c&&y.route.id?c[y.route.id]:void 0,N=y.route.errorElement||UC,d&&(m<0&&b===0?(wT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,L=null):m===b&&(C=!0,L=y.route.hydrateFallbackElement||null)));let V=e.concat(l.slice(0,b+1)),$=()=>{let Y;return T?Y=N:C?Y=L:y.route.Component?Y=D.createElement(y.route.Component,null):y.route.element?Y=y.route.element:Y=p,D.createElement(VC,{match:y,routeContext:{outlet:p,matches:V,isDataRoute:t!=null},children:Y})};return t&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?D.createElement(LC,{location:t.location,revalidation:t.revalidation,component:N,error:T,children:$(),routeContext:{outlet:null,matches:V,isDataRoute:!0},unstable_onError:r}):$()},null)}function ly(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BC(n){let e=D.useContext(vl);return qt(e,ly(n)),e}function qC(n){let e=D.useContext(of);return qt(e,ly(n)),e}function $C(n){let e=D.useContext(Or);return qt(e,ly(n)),e}function cy(n){let e=$C(n),t=e.matches[e.matches.length-1];return qt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function FC(){return cy("useRouteId")}function HC(){let n=D.useContext(oy),e=qC("useRouteError"),t=cy("useRouteError");return n!==void 0?n:e.errors?.[t]}function GC(){let{router:n}=BC("useNavigate"),e=cy("useNavigate"),t=D.useRef(!1);return bT(()=>{t.current=!0}),D.useCallback(async(a,l={})=>{Qs(t.current,_T),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var qb={};function wT(n,e,t){!e&&!qb[n]&&(qb[n]=!0,Qs(!1,t))}D.memo(KC);function KC({routes:n,future:e,state:t,unstable_onError:r}){return jC(n,void 0,t,r,e)}function QC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1}){qt(!gu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=pu(t));let{pathname:m="/",search:p="",hash:y="",state:b=null,key:T="default"}=t,C=D.useMemo(()=>{let N=Rr(m,c);return N==null?null:{location:{pathname:N,search:p,hash:y,state:b,key:T},navigationType:r}},[c,m,p,y,b,T,r]);return Qs(C!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:D.createElement(Xs.Provider,{value:d},D.createElement(lf.Provider,{children:e,value:C}))}var fd="get",md="application/x-www-form-urlencoded";function cf(n){return n!=null&&typeof n.tagName=="string"}function YC(n){return cf(n)&&n.tagName.toLowerCase()==="button"}function WC(n){return cf(n)&&n.tagName.toLowerCase()==="form"}function XC(n){return cf(n)&&n.tagName.toLowerCase()==="input"}function JC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZC(n,e){return n.button===0&&(!e||e==="_self")&&!JC(n)}var Jh=null;function eI(){if(Jh===null)try{new FormData(document.createElement("form"),0),Jh=!1}catch{Jh=!0}return Jh}var tI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $p(n){return n!=null&&!tI.has(n)?(Qs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${md}"`),null):n}function nI(n,e){let t,r,a,l,c;if(WC(n)){let d=n.getAttribute("action");r=d?Rr(d,e):null,t=n.getAttribute("method")||fd,a=$p(n.getAttribute("enctype"))||md,l=new FormData(n)}else if(YC(n)||XC(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(r=m?Rr(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||fd,a=$p(n.getAttribute("formenctype"))||$p(d.getAttribute("enctype"))||md,l=new FormData(d,n),!eI()){let{name:p,type:y,value:b}=n;if(y==="image"){let T=p?`${p}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else p&&l.append(p,b)}}else{if(cf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fd,r=null,a=md,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function sI(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Rr(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function rI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function aI(n,e,t){let r=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await rI(l,t);return c.links?c.links():[]}return[]}));return uI(r.flat(1).filter(iI).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function $b(n,e,t,r,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>t[p].pathname!==m.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{let y=r.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function oI(n,e,{includeHydrateFallback:t}={}){return lI(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function lI(n){return[...new Set(n)]}function cI(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function uI(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let l=JSON.stringify(cI(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function ET(){let n=D.useContext(vl);return uy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function hI(){let n=D.useContext(of);return uy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var hy=D.createContext(void 0);hy.displayName="FrameworkContext";function TT(){let n=D.useContext(hy);return uy(n,"You must render this element inside a <HydratedRouter> element"),n}function dI(n,e){let t=D.useContext(hy),[r,a]=D.useState(!1),[l,c]=D.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:b}=e,T=D.useRef(null);D.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let L=$=>{$.forEach(Y=>{c(Y.isIntersecting)})},V=new IntersectionObserver(L,{threshold:.5});return T.current&&V.observe(T.current),()=>{V.disconnect()}}},[n]),D.useEffect(()=>{if(r){let L=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(L)}}},[r]);let C=()=>{a(!0)},N=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:Uc(d,C),onBlur:Uc(m,N),onMouseEnter:Uc(p,C),onMouseLeave:Uc(y,N),onTouchStart:Uc(b,C)}]:[!1,T,{}]}function Uc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function fI({page:n,...e}){let{router:t}=ET(),r=D.useMemo(()=>dT(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?D.createElement(pI,{page:n,matches:r,...e}):null}function mI(n){let{manifest:e,routeModules:t}=TT(),[r,a]=D.useState([]);return D.useEffect(()=>{let l=!1;return aI(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),r}function pI({page:n,matches:e,...t}){let r=Fa(),{manifest:a,routeModules:l}=TT(),{basename:c}=ET(),{loaderData:d,matches:m}=hI(),p=D.useMemo(()=>$b(n,e,m,a,r,"data"),[n,e,m,a,r]),y=D.useMemo(()=>$b(n,e,m,a,r,"assets"),[n,e,m,a,r]),b=D.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let N=new Set,L=!1;if(e.forEach($=>{let Y=a.routes[$.route.id];!Y||!Y.hasLoader||(!p.some(K=>K.route.id===$.route.id)&&$.route.id in d&&l[$.route.id]?.shouldRevalidate||Y.hasClientLoader?L=!0:N.add($.route.id))}),N.size===0)return[];let V=sI(n,c,"data");return L&&N.size>0&&V.searchParams.set("_routes",e.filter($=>N.has($.route.id)).map($=>$.route.id).join(",")),[V.pathname+V.search]},[c,d,r,a,p,e,n,l]),T=D.useMemo(()=>oI(y,a),[y,a]),C=mI(y);return D.createElement(D.Fragment,null,b.map(N=>D.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),T.map(N=>D.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),C.map(({key:N,link:L})=>D.createElement("link",{key:N,nonce:t.nonce,...L})))}function gI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ST=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ST&&(window.__reactRouterVersion="7.9.1")}catch{}function yI({basename:n,children:e,window:t}){let r=D.useRef();r.current==null&&(r.current=iC({window:t,v5Compat:!0}));let a=r.current,[l,c]=D.useState({action:a.action,location:a.location}),d=D.useCallback(m=>{D.startTransition(()=>c(m))},[c]);return D.useLayoutEffect(()=>a.listen(d),[a,d]),D.createElement(QC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var xT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AT=D.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:y,viewTransition:b,...T},C){let{basename:N}=D.useContext(Xs),L=typeof p=="string"&&xT.test(p),V,$=!1;if(typeof p=="string"&&L&&(V=p,ST))try{let R=new URL(window.location.href),O=p.startsWith("//")?new URL(R.protocol+p):new URL(p),j=Rr(O.pathname,N);O.origin===R.origin&&j!=null?p=j+O.search+O.hash:$=!0}catch{Qs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=OC(p,{relative:a}),[K,ee,le]=dI(r,T),ae=wI(p,{replace:c,state:d,target:m,preventScrollReset:y,relative:a,viewTransition:b});function M(R){e&&e(R),R.defaultPrevented||ae(R)}let S=D.createElement("a",{...T,...le,href:V||Y,onClick:$||l?e:M,ref:gI(C,ee),target:m,"data-discover":!L&&t==="render"?"true":void 0});return K&&!L?D.createElement(D.Fragment,null,S,D.createElement(fI,{page:Y})):S});AT.displayName="Link";var vI=D.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},y){let b=yu(c,{relative:p.relative}),T=Fa(),C=D.useContext(of),{navigator:N,basename:L}=D.useContext(Xs),V=C!=null&&AI(b)&&d===!0,$=N.encodeLocation?N.encodeLocation(b).pathname:b.pathname,Y=T.pathname,K=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),K=K?K.toLowerCase():null,$=$.toLowerCase()),K&&L&&(K=Rr(K,L)||K);const ee=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let le=Y===$||!a&&Y.startsWith($)&&Y.charAt(ee)==="/",ae=K!=null&&(K===$||!a&&K.startsWith($)&&K.charAt($.length)==="/"),M={isActive:le,isPending:ae,isTransitioning:V},S=le?e:void 0,R;typeof r=="function"?R=r(M):R=[r,le?"active":null,ae?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(M):l;return D.createElement(AT,{...p,"aria-current":S,className:R,ref:y,style:O,to:c,viewTransition:d},typeof m=="function"?m(M):m)});vI.displayName="NavLink";var _I=D.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:c=fd,action:d,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:b,...T},C)=>{let N=SI(),L=xI(d,{relative:p}),V=c.toLowerCase()==="get"?"get":"post",$=typeof d=="string"&&xT.test(d),Y=K=>{if(m&&m(K),K.defaultPrevented)return;K.preventDefault();let ee=K.nativeEvent.submitter,le=ee?.getAttribute("formmethod")||c;N(ee||K.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:b})};return D.createElement("form",{ref:C,method:V,action:L,onSubmit:r?m:Y,...T,"data-discover":!$&&n==="render"?"true":void 0})});_I.displayName="Form";function bI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RT(n){let e=D.useContext(vl);return qt(e,bI(n)),e}function wI(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=DC(),m=Fa(),p=yu(n,{relative:l});return D.useCallback(y=>{if(ZC(y,e)){y.preventDefault();let b=t!==void 0?t:nu(m)===nu(p);d(n,{replace:b,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,t,r,e,n,a,l,c])}var EI=0,TI=()=>`__${String(++EI)}__`;function SI(){let{router:n}=RT("useSubmit"),{basename:e}=D.useContext(Xs),t=FC();return D.useCallback(async(r,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=nI(r,e);if(a.navigate===!1){let y=a.fetcherKey||TI();await n.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function xI(n,{relative:e}={}){let{basename:t}=D.useContext(Xs),r=D.useContext(Or);qt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...yu(n||".",{relative:e})},c=Fa();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(y=>y==="")){d.delete("index"),m.filter(b=>b).forEach(b=>d.append("index",b));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xr([t,l.pathname])),nu(l)}function AI(n,{relative:e}={}){let t=D.useContext(vT);qt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=RT("useViewTransitionState"),a=yu(n,{relative:e});if(!t.isTransitioning)return!1;let l=Rr(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Rr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return xd(a.pathname,c)!=null||xd(a.pathname,l)!=null}function CT(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=CT(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function IT(){for(var n,e,t=0,r="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=CT(n))&&(r&&(r+=" "),r+=e);return r}const dy="-",RI=n=>{const e=II(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const d=c.split(dy);return d[0]===""&&d.length!==1&&d.shift(),NT(d,e)||CI(c)},getConflictingClassGroupIds:(c,d)=>{const m=t[c]||[];return d&&r[c]?[...m,...r[c]]:m}}},NT=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),a=r?NT(n.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const l=n.join(dy);return e.validators.find(({validator:c})=>c(l))?.classGroupId},Fb=/^\[(.+)\]$/,CI=n=>{if(Fb.test(n)){const e=Fb.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},II=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const a in t)gg(t[a],r,a,e);return r},gg=(n,e,t,r)=>{n.forEach(a=>{if(typeof a=="string"){const l=a===""?e:Hb(e,a);l.classGroupId=t;return}if(typeof a=="function"){if(NI(a)){gg(a(r),e,t,r);return}e.validators.push({validator:a,classGroupId:t});return}Object.entries(a).forEach(([l,c])=>{gg(c,Hb(e,l),t,r)})})},Hb=(n,e)=>{let t=n;return e.split(dy).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},NI=n=>n.isThemeGetter,kI=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const a=(l,c)=>{t.set(l,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(l){let c=t.get(l);if(c!==void 0)return c;if((c=r.get(l))!==void 0)return a(l,c),c},set(l,c){t.has(l)?t.set(l,c):a(l,c)}}},yg="!",vg=":",OI=vg.length,DI=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=a=>{const l=[];let c=0,d=0,m=0,p;for(let N=0;N<a.length;N++){let L=a[N];if(c===0&&d===0){if(L===vg){l.push(a.slice(m,N)),m=N+OI;continue}if(L==="/"){p=N;continue}}L==="["?c++:L==="]"?c--:L==="("?d++:L===")"&&d--}const y=l.length===0?a:a.substring(m),b=PI(y),T=b!==y,C=p&&p>m?p-m:void 0;return{modifiers:l,hasImportantModifier:T,baseClassName:b,maybePostfixModifierPosition:C}};if(e){const a=e+vg,l=r;r=c=>c.startsWith(a)?l(c.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const a=r;r=l=>t({className:l,parseClassName:a})}return r},PI=n=>n.endsWith(yg)?n.substring(0,n.length-1):n.startsWith(yg)?n.substring(1):n,jI=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let l=[];return r.forEach(c=>{c[0]==="["||e[c]?(a.push(...l.sort(),c),l=[]):l.push(c)}),a.push(...l.sort()),a}},MI=n=>({cache:kI(n.cacheSize),parseClassName:DI(n),sortModifiers:jI(n),...RI(n)}),UI=/\s+/,LI=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:l}=e,c=[],d=n.trim().split(UI);let m="";for(let p=d.length-1;p>=0;p-=1){const y=d[p],{isExternal:b,modifiers:T,hasImportantModifier:C,baseClassName:N,maybePostfixModifierPosition:L}=t(y);if(b){m=y+(m.length>0?" "+m:m);continue}let V=!!L,$=r(V?N.substring(0,L):N);if(!$){if(!V){m=y+(m.length>0?" "+m:m);continue}if($=r(N),!$){m=y+(m.length>0?" "+m:m);continue}V=!1}const Y=l(T).join(":"),K=C?Y+yg:Y,ee=K+$;if(c.includes(ee))continue;c.push(ee);const le=a($,V);for(let ae=0;ae<le.length;++ae){const M=le[ae];c.push(K+M)}m=y+(m.length>0?" "+m:m)}return m};function VI(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=kT(e))&&(r&&(r+=" "),r+=t);return r}const kT=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=kT(n[r]))&&(t&&(t+=" "),t+=e);return t};function zI(n,...e){let t,r,a,l=c;function c(m){const p=e.reduce((y,b)=>b(y),n());return t=MI(p),r=t.cache.get,a=t.cache.set,l=d,d(m)}function d(m){const p=r(m);if(p)return p;const y=LI(m,t);return a(m,y),y}return function(){return l(VI.apply(null,arguments))}}const Lt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},OT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,DT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,BI=/^\d+\/\d+$/,qI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$I=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,HI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,GI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zo=n=>BI.test(n),Le=n=>!!n&&!Number.isNaN(Number(n)),vi=n=>!!n&&Number.isInteger(Number(n)),Fp=n=>n.endsWith("%")&&Le(n.slice(0,-1)),_r=n=>qI.test(n),KI=()=>!0,QI=n=>$I.test(n)&&!FI.test(n),PT=()=>!1,YI=n=>HI.test(n),WI=n=>GI.test(n),XI=n=>!ve(n)&&!_e(n),JI=n=>_l(n,UT,PT),ve=n=>OT.test(n),Ra=n=>_l(n,LT,QI),Hp=n=>_l(n,sN,Le),Gb=n=>_l(n,jT,PT),ZI=n=>_l(n,MT,WI),Zh=n=>_l(n,VT,YI),_e=n=>DT.test(n),Lc=n=>bl(n,LT),eN=n=>bl(n,rN),Kb=n=>bl(n,jT),tN=n=>bl(n,UT),nN=n=>bl(n,MT),ed=n=>bl(n,VT,!0),_l=(n,e,t)=>{const r=OT.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},bl=(n,e,t=!1)=>{const r=DT.exec(n);return r?r[1]?e(r[1]):t:!1},jT=n=>n==="position"||n==="percentage",MT=n=>n==="image"||n==="url",UT=n=>n==="length"||n==="size"||n==="bg-size",LT=n=>n==="length",sN=n=>n==="number",rN=n=>n==="family-name",VT=n=>n==="shadow",iN=()=>{const n=Lt("color"),e=Lt("font"),t=Lt("text"),r=Lt("font-weight"),a=Lt("tracking"),l=Lt("leading"),c=Lt("breakpoint"),d=Lt("container"),m=Lt("spacing"),p=Lt("radius"),y=Lt("shadow"),b=Lt("inset-shadow"),T=Lt("text-shadow"),C=Lt("drop-shadow"),N=Lt("blur"),L=Lt("perspective"),V=Lt("aspect"),$=Lt("ease"),Y=Lt("animate"),K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],le=()=>[...ee(),_e,ve],ae=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],S=()=>[_e,ve,m],R=()=>[zo,"full","auto",...S()],O=()=>[vi,"none","subgrid",_e,ve],j=()=>["auto",{span:["full",vi,_e,ve]},vi,_e,ve],k=()=>[vi,"auto",_e,ve],I=()=>["auto","min","max","fr",_e,ve],Se=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],be=()=>["start","end","center","stretch","center-safe","end-safe"],B=()=>["auto",...S()],oe=()=>[zo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],te=()=>[n,_e,ve],ue=()=>[...ee(),Kb,Gb,{position:[_e,ve]}],P=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",tN,JI,{size:[_e,ve]}],he=()=>[Fp,Lc,Ra],ce=()=>["","none","full",p,_e,ve],fe=()=>["",Le,Lc,Ra],Ne=()=>["solid","dashed","dotted","double"],Te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ve=()=>[Le,Fp,Kb,Gb],me=()=>["","none",N,_e,ve],at=()=>["none",Le,_e,ve],Vn=()=>["none",Le,_e,ve],zn=()=>[Le,_e,ve],rs=()=>[zo,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[_r],breakpoint:[_r],color:[KI],container:[_r],"drop-shadow":[_r],ease:["in","out","in-out"],font:[XI],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[_r],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[_r],shadow:[_r],spacing:["px",Le],text:[_r],"text-shadow":[_r],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zo,ve,_e,V]}],container:["container"],columns:[{columns:[Le,ve,_e,d]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:le()}],overflow:[{overflow:ae()}],"overflow-x":[{"overflow-x":ae()}],"overflow-y":[{"overflow-y":ae()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[vi,"auto",_e,ve]}],basis:[{basis:[zo,"full","auto",d,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Le,zo,"auto","initial","none",ve]}],grow:[{grow:["",Le,_e,ve]}],shrink:[{shrink:["",Le,_e,ve]}],order:[{order:[vi,"first","last","none",_e,ve]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":I()}],"auto-rows":[{"auto-rows":I()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...Se(),"normal"]}],"justify-items":[{"justify-items":[...be(),"normal"]}],"justify-self":[{"justify-self":["auto",...be()]}],"align-content":[{content:["normal",...Se()]}],"align-items":[{items:[...be(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...be(),{baseline:["","last"]}]}],"place-content":[{"place-content":Se()}],"place-items":[{"place-items":[...be(),"baseline"]}],"place-self":[{"place-self":["auto",...be()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:B()}],mx:[{mx:B()}],my:[{my:B()}],ms:[{ms:B()}],me:[{me:B()}],mt:[{mt:B()}],mr:[{mr:B()}],mb:[{mb:B()}],ml:[{ml:B()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:oe()}],w:[{w:[d,"screen",...oe()]}],"min-w":[{"min-w":[d,"screen","none",...oe()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...oe()]}],h:[{h:["screen","lh",...oe()]}],"min-h":[{"min-h":["screen","lh","none",...oe()]}],"max-h":[{"max-h":["screen","lh",...oe()]}],"font-size":[{text:["base",t,Lc,Ra]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,_e,Hp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fp,ve]}],"font-family":[{font:[eN,ve,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,_e,ve]}],"line-clamp":[{"line-clamp":[Le,"none",_e,Hp]}],leading:[{leading:[l,...S()]}],"list-image":[{"list-image":["none",_e,ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",_e,ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:te()}],"text-color":[{text:te()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[Le,"from-font","auto",_e,Ra]}],"text-decoration-color":[{decoration:te()}],"underline-offset":[{"underline-offset":[Le,"auto",_e,ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e,ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e,ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ue()}],"bg-repeat":[{bg:P()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},vi,_e,ve],radial:["",_e,ve],conic:[vi,_e,ve]},nN,ZI]}],"bg-color":[{bg:te()}],"gradient-from-pos":[{from:he()}],"gradient-via-pos":[{via:he()}],"gradient-to-pos":[{to:he()}],"gradient-from":[{from:te()}],"gradient-via":[{via:te()}],"gradient-to":[{to:te()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ne(),"hidden","none"]}],"divide-style":[{divide:[...Ne(),"hidden","none"]}],"border-color":[{border:te()}],"border-color-x":[{"border-x":te()}],"border-color-y":[{"border-y":te()}],"border-color-s":[{"border-s":te()}],"border-color-e":[{"border-e":te()}],"border-color-t":[{"border-t":te()}],"border-color-r":[{"border-r":te()}],"border-color-b":[{"border-b":te()}],"border-color-l":[{"border-l":te()}],"divide-color":[{divide:te()}],"outline-style":[{outline:[...Ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Le,_e,ve]}],"outline-w":[{outline:["",Le,Lc,Ra]}],"outline-color":[{outline:te()}],shadow:[{shadow:["","none",y,ed,Zh]}],"shadow-color":[{shadow:te()}],"inset-shadow":[{"inset-shadow":["none",b,ed,Zh]}],"inset-shadow-color":[{"inset-shadow":te()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:te()}],"ring-offset-w":[{"ring-offset":[Le,Ra]}],"ring-offset-color":[{"ring-offset":te()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":te()}],"text-shadow":[{"text-shadow":["none",T,ed,Zh]}],"text-shadow-color":[{"text-shadow":te()}],opacity:[{opacity:[Le,_e,ve]}],"mix-blend":[{"mix-blend":[...Te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Te()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Le]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ve()}],"mask-image-linear-from-color":[{"mask-linear-from":te()}],"mask-image-linear-to-color":[{"mask-linear-to":te()}],"mask-image-t-from-pos":[{"mask-t-from":Ve()}],"mask-image-t-to-pos":[{"mask-t-to":Ve()}],"mask-image-t-from-color":[{"mask-t-from":te()}],"mask-image-t-to-color":[{"mask-t-to":te()}],"mask-image-r-from-pos":[{"mask-r-from":Ve()}],"mask-image-r-to-pos":[{"mask-r-to":Ve()}],"mask-image-r-from-color":[{"mask-r-from":te()}],"mask-image-r-to-color":[{"mask-r-to":te()}],"mask-image-b-from-pos":[{"mask-b-from":Ve()}],"mask-image-b-to-pos":[{"mask-b-to":Ve()}],"mask-image-b-from-color":[{"mask-b-from":te()}],"mask-image-b-to-color":[{"mask-b-to":te()}],"mask-image-l-from-pos":[{"mask-l-from":Ve()}],"mask-image-l-to-pos":[{"mask-l-to":Ve()}],"mask-image-l-from-color":[{"mask-l-from":te()}],"mask-image-l-to-color":[{"mask-l-to":te()}],"mask-image-x-from-pos":[{"mask-x-from":Ve()}],"mask-image-x-to-pos":[{"mask-x-to":Ve()}],"mask-image-x-from-color":[{"mask-x-from":te()}],"mask-image-x-to-color":[{"mask-x-to":te()}],"mask-image-y-from-pos":[{"mask-y-from":Ve()}],"mask-image-y-to-pos":[{"mask-y-to":Ve()}],"mask-image-y-from-color":[{"mask-y-from":te()}],"mask-image-y-to-color":[{"mask-y-to":te()}],"mask-image-radial":[{"mask-radial":[_e,ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ve()}],"mask-image-radial-from-color":[{"mask-radial-from":te()}],"mask-image-radial-to-color":[{"mask-radial-to":te()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ee()}],"mask-image-conic-pos":[{"mask-conic":[Le]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ve()}],"mask-image-conic-from-color":[{"mask-conic-from":te()}],"mask-image-conic-to-color":[{"mask-conic-to":te()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ue()}],"mask-repeat":[{mask:P()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",_e,ve]}],filter:[{filter:["","none",_e,ve]}],blur:[{blur:me()}],brightness:[{brightness:[Le,_e,ve]}],contrast:[{contrast:[Le,_e,ve]}],"drop-shadow":[{"drop-shadow":["","none",C,ed,Zh]}],"drop-shadow-color":[{"drop-shadow":te()}],grayscale:[{grayscale:["",Le,_e,ve]}],"hue-rotate":[{"hue-rotate":[Le,_e,ve]}],invert:[{invert:["",Le,_e,ve]}],saturate:[{saturate:[Le,_e,ve]}],sepia:[{sepia:["",Le,_e,ve]}],"backdrop-filter":[{"backdrop-filter":["","none",_e,ve]}],"backdrop-blur":[{"backdrop-blur":me()}],"backdrop-brightness":[{"backdrop-brightness":[Le,_e,ve]}],"backdrop-contrast":[{"backdrop-contrast":[Le,_e,ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Le,_e,ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Le,_e,ve]}],"backdrop-invert":[{"backdrop-invert":["",Le,_e,ve]}],"backdrop-opacity":[{"backdrop-opacity":[Le,_e,ve]}],"backdrop-saturate":[{"backdrop-saturate":[Le,_e,ve]}],"backdrop-sepia":[{"backdrop-sepia":["",Le,_e,ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",_e,ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Le,"initial",_e,ve]}],ease:[{ease:["linear","initial",$,_e,ve]}],delay:[{delay:[Le,_e,ve]}],animate:[{animate:["none",Y,_e,ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[L,_e,ve]}],"perspective-origin":[{"perspective-origin":le()}],rotate:[{rotate:at()}],"rotate-x":[{"rotate-x":at()}],"rotate-y":[{"rotate-y":at()}],"rotate-z":[{"rotate-z":at()}],scale:[{scale:Vn()}],"scale-x":[{"scale-x":Vn()}],"scale-y":[{"scale-y":Vn()}],"scale-z":[{"scale-z":Vn()}],"scale-3d":["scale-3d"],skew:[{skew:zn()}],"skew-x":[{"skew-x":zn()}],"skew-y":[{"skew-y":zn()}],transform:[{transform:[_e,ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:le()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:rs()}],"translate-x":[{"translate-x":rs()}],"translate-y":[{"translate-y":rs()}],"translate-z":[{"translate-z":rs()}],"translate-none":["translate-none"],accent:[{accent:te()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:te()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e,ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e,ve]}],fill:[{fill:["none",...te()]}],"stroke-w":[{stroke:[Le,Lc,Ra,Hp]}],stroke:[{stroke:["none",...te()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},aN=zI(iN);function ht(...n){return aN(IT(n))}const zT=D.forwardRef(({className:n,...e},t)=>v.jsx("div",{ref:t,className:ht("flex h-full w-full flex-col overflow-hidden",n),...e}));zT.displayName="Sidebar";const BT=D.forwardRef(({className:n,...e},t)=>v.jsx("div",{ref:t,className:ht("flex flex-1 flex-col gap-2 p-2",n),...e}));BT.displayName="SidebarContent";const qT=D.forwardRef(({className:n,...e},t)=>v.jsx("div",{ref:t,className:ht("flex flex-col gap-2",n),...e}));qT.displayName="SidebarGroup";const $T=D.forwardRef(({className:n,...e},t)=>v.jsx("div",{ref:t,className:ht("flex flex-col gap-1",n),...e}));$T.displayName="SidebarGroupContent";const FT=D.forwardRef(({className:n,...e},t)=>v.jsx("ul",{ref:t,className:ht("flex flex-col gap-1",n),...e}));FT.displayName="SidebarMenu";const HT=D.forwardRef(({className:n,...e},t)=>v.jsx("li",{ref:t,className:ht("list-none",n),...e}));HT.displayName="SidebarMenuItem";const GT=D.forwardRef(({className:n,isActive:e,...t},r)=>v.jsx("button",{ref:r,className:ht("flex w-full items-center gap-2 rounded-md p-2 text-left text-sm transition-colors hover:bg-accent hover:text-accent-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",e&&"bg-accent text-accent-foreground",n),...t}));GT.displayName="SidebarMenuButton";const oN=({children:n,defaultOpen:e=!1})=>{const[t,r]=D.useState(e);return v.jsx("div",{className:ht("flex",t?"sidebar-open":"sidebar-closed"),children:v.jsx("div",{className:"sidebar-context","data-open":t,children:D.Children.map(n,a=>D.cloneElement(a,{open:t,setOpen:r}))})})},KT=D.forwardRef(({className:n,open:e,setOpen:t,...r},a)=>v.jsx("button",{ref:a,onClick:()=>t(!e),className:ht("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-9 w-9",n),...r,children:v.jsx("svg",{className:ht("h-4 w-4 transition-transform",e&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}));KT.displayName="SidebarTrigger";const lN=({activeTab:n,setActiveTab:e,onSidebarToggle:t})=>{const[r,a]=D.useState(!1);D.useEffect(()=>{t&&t(r)},[r,t]);const l=[{id:"Users",label:"Create Users",icon:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})},{id:"Questions",label:"Create Questions",icon:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"surveys",label:"Create Survey",icon:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})},{id:"assignuser",label:"Assign User",icon:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}];return v.jsx(oN,{defaultOpen:!1,children:v.jsx(zT,{className:`mt-4 hidden lg:flex h-screen fixed left-0 top-0 pt-20 z-40 bg-white shadow-lg transition-all duration-300 ${r?"w-64":"w-16"}`,children:v.jsxs(BT,{children:[v.jsx("div",{className:"flex justify-end p-2",children:v.jsx(KT,{open:r,setOpen:a,className:"hover:bg-gray-100"})}),v.jsx(qT,{children:v.jsx($T,{children:v.jsx(FT,{children:l.map(c=>v.jsx(HT,{children:v.jsx(GT,{onClick:()=>e(c.id),isActive:n===c.id,className:`w-full justify-start px-3 py-2 ${n===c.id?"bg-gray-100 border-r-2 border-black text-black font-medium":"text-gray-700"}`,title:r?"":c.label,children:v.jsxs("div",{className:"flex items-center min-w-0",children:[v.jsx("div",{className:"flex-shrink-0",children:c.icon}),r&&v.jsx("span",{className:"ml-3 text-sm truncate transition-opacity duration-300",children:c.label})]})})},c.id))})})})]})})})},Qb=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Yb=IT,QT=(n,e)=>t=>{var r;if(e?.variants==null)return Yb(n,t?.class,t?.className);const{variants:a,defaultVariants:l}=e,c=Object.keys(a).map(p=>{const y=t?.[p],b=l?.[p];if(y===null)return null;const T=Qb(y)||Qb(b);return a[p][T]}),d=t&&Object.entries(t).reduce((p,y)=>{let[b,T]=y;return T===void 0||(p[b]=T),p},{}),m=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,y)=>{let{class:b,className:T,...C}=y;return Object.entries(C).every(N=>{let[L,V]=N;return Array.isArray(V)?V.includes({...l,...d}[L]):{...l,...d}[L]===V})?[...p,b,T]:p},[]);return Yb(n,c,m,t?.class,t?.className)},cN=QT("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),De=D.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...a},l)=>v.jsx("button",{className:ht(cN({variant:e,size:t,className:n})),ref:l,...a}));De.displayName="Button";var YT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Wb=Ma.createContext&&Ma.createContext(YT),uN=["attr","size","title"];function hN(n,e){if(n==null)return{};var t=dN(n,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function dN(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Ad(){return Ad=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ad.apply(this,arguments)}function Xb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,r)}return t}function Rd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xb(Object(t),!0).forEach(function(r){fN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xb(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function fN(n,e,t){return e=mN(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function mN(n){var e=pN(n,"string");return typeof e=="symbol"?e:e+""}function pN(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function WT(n){return n&&n.map((e,t)=>Ma.createElement(e.tag,Rd({key:t},e.attr),WT(e.child)))}function gN(n){return e=>Ma.createElement(yN,Ad({attr:Rd({},n.attr)},e),WT(n.child))}function yN(n){var e=t=>{var{attr:r,size:a,title:l}=n,c=hN(n,uN),d=a||t.size||"1em",m;return t.className&&(m=t.className),n.className&&(m=(m?m+" ":"")+n.className),Ma.createElement("svg",Ad({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:m,style:Rd(Rd({color:n.color||t.color},t.style),n.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&Ma.createElement("title",null,l),n.children)};return Wb!==void 0?Ma.createElement(Wb.Consumer,null,t=>e(t)):e(YT)}function XT(n){return gN({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"},child:[]}]})(n)}const JT=({setActiveTab:n,onLogout:e,isSuperAdmin:t=!1})=>{const[r,a]=D.useState(!1),[l,c]=D.useState(!1),d=[{id:"Users",label:"Create Users"},{id:"Questions",label:"Create Questions"},{id:"surveys",label:"Create Survey"},{id:"assignuser",label:"Assign User"}];return v.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white shadow-sm border-b z-50",children:[v.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 lg:px-10 py-3 sm:py-4 lg:py-4",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("button",{onClick:()=>a(!r),className:"lg:hidden p-2 rounded-md hover:bg-gray-100",children:v.jsxs("div",{className:"w-5 h-5 flex flex-col justify-center space-y-1",children:[v.jsx("div",{className:"w-full h-0.5 bg-gray-600"}),v.jsx("div",{className:"w-full h-0.5 bg-gray-600"}),v.jsx("div",{className:"w-full h-0.5 bg-gray-600"})]})}),v.jsxs("h1",{className:"text-gray-800",children:[v.jsx("span",{className:"text-sm sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-medium",children:"V-Survey"}),v.jsx("span",{className:"text-sm sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-extralight ml-1",children:"Portal"})]})]}),v.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 lg:space-x-4",children:[!t&&v.jsxs(De,{onClick:()=>n("surveys"),className:"bg-purple-700 text-xs sm:text-sm px-3 sm:px-4 lg:px-6 py-2 sm:py-3",children:[v.jsx("span",{className:"hidden sm:inline",children:"+ Create Survey"}),v.jsx("span",{className:"sm:hidden",children:"+ Survey"})]}),v.jsxs("div",{className:"relative",children:[v.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 sm:space-x-3 hover:bg-gray-50 rounded-lg p-2",children:[v.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-300 rounded-full"}),v.jsx("span",{className:"hidden sm:inline text-gray-700 font-medium text-sm",children:t?"Super Admin":"Chris Loo"}),v.jsx(XT,{className:"text-base"})]}),l&&v.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border z-50",children:v.jsx("button",{onClick:()=>{e(),c(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:"Logout"})})]})]})]}),r&&v.jsx("div",{className:"lg:hidden bg-white border-t shadow-lg",children:d.map(m=>v.jsx("button",{onClick:()=>{n(m.id),a(!1)},className:"w-full text-left px-6 py-4 hover:bg-gray-50 border-b border-gray-100 text-sm text-gray-700",children:m.label},m.id))}),l&&v.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})},bn=D.forwardRef(({className:n,...e},t)=>v.jsx("div",{ref:t,className:ht("rounded-xl border bg-card text-card-foreground shadow",n),...e}));bn.displayName="Card";const ys=D.forwardRef(({className:n,...e},t)=>v.jsx("div",{ref:t,className:ht("flex flex-col space-y-1.5 p-6",n),...e}));ys.displayName="CardHeader";const ns=D.forwardRef(({className:n,...e},t)=>v.jsx("h3",{ref:t,className:ht("font-semibold leading-none tracking-tight",n),...e}));ns.displayName="CardTitle";const vN=D.forwardRef(({className:n,...e},t)=>v.jsx("p",{ref:t,className:ht("text-sm text-muted-foreground",n),...e}));vN.displayName="CardDescription";const hn=D.forwardRef(({className:n,...e},t)=>v.jsx("div",{ref:t,className:ht("p-6 pt-0",n),...e}));hn.displayName="CardContent";const _N=D.forwardRef(({className:n,...e},t)=>v.jsx("div",{ref:t,className:ht("flex items-center p-6 pt-0",n),...e}));_N.displayName="CardFooter";const mt=D.forwardRef(({className:n,type:e,...t},r)=>v.jsx("input",{type:e,className:ht("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:r,...t}));mt.displayName="Input";const _g=({open:n,onOpenChange:e,children:t})=>(D.useEffect(()=>{const r=a=>{a.key==="Escape"&&n&&e(!1)};return n&&(document.addEventListener("keydown",r),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",r),document.body.style.overflow="unset"}},[n,e]),n?v.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>e&&e(!1)}),t]}):null),Cd=D.forwardRef(({className:n,children:e,...t},r)=>v.jsx("div",{ref:r,className:ht("relative z-50 grid w-full max-w-lg gap-4 border bg-background p-6 shadow-lg duration-200 sm:rounded-lg",n),...t,children:e}));Cd.displayName="DialogContent";const Id=({className:n,...e})=>v.jsx("div",{className:ht("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Id.displayName="DialogHeader";const Nd=D.forwardRef(({className:n,...e},t)=>v.jsx("h3",{ref:t,className:ht("text-lg font-semibold leading-none tracking-tight",n),...e}));Nd.displayName="DialogTitle";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Jb=n=>{const e=wN(n);return e.charAt(0).toUpperCase()+e.slice(1)},ZT=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),EN=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=D.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:c,...d},m)=>D.createElement("svg",{ref:m,...TN,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:ZT("lucide",a),...!l&&!EN(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,y])=>D.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=(n,e)=>{const t=D.forwardRef(({className:r,...a},l)=>D.createElement(SN,{ref:l,iconNode:e,className:ZT(`lucide-${bN(Jb(n))}`,`lucide-${n}`,r),...a}));return t.displayName=Jb(n),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],bg=Cn("building",xN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],RN=Cn("chart-column",AN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],IN=Cn("chevron-left",CN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],kN=Cn("chevron-right",NN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],eS=Cn("mail",ON);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tS=Cn("pen-line",DN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],su=Cn("plus",PN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],MN=Cn("search",jN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],uf=Cn("trash-2",UN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kd=Cn("user-check",LN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],zN=Cn("user-plus",VN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Od=Cn("user-x",BN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Dd=Cn("users",qN);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],FN=Cn("x",$N),nS=({className:n,...e})=>v.jsx("svg",{className:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",...e,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),HN=({className:n,...e})=>v.jsx("svg",{className:n,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",...e,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),hf=({profile:n,onProfileEdit:e,onLogout:t,onCreateSurvey:r,onNavigateToSurveys:a})=>{const[l,c]=D.useState(!1);return v.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white shadow-sm border-b z-50",children:[v.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 lg:px-10 py-3 sm:py-4 lg:py-4",children:[v.jsxs("div",{className:"flex items-center justify-between flex-1",children:[v.jsxs("h1",{className:"text-gray-800 cursor-pointer hover:text-blue-600 transition-colors",onClick:a,children:[v.jsx("span",{className:"text-sm sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-medium",children:"V-Survey"}),v.jsx("span",{className:"text-sm sm:text-lg md:text-xl lg:text-2xl xl:text-3xl font-extralight ml-1",children:"Portal"})]}),r&&v.jsxs(De,{onClick:r,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 mr-4",children:[v.jsx(su,{className:"w-4 h-4"}),"Create Survey"]})]}),v.jsx("div",{className:"flex items-center space-x-2 sm:space-x-3 lg:space-x-4",children:v.jsxs("div",{className:"relative",children:[v.jsxs("button",{onClick:()=>c(!l),className:"flex items-center space-x-2 sm:space-x-3 hover:bg-gray-50 rounded-lg p-2",children:[v.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full border border-gray-300 flex items-center justify-center bg-gray-50 overflow-hidden",children:n?.profileImage?v.jsx("img",{src:n.profileImage,alt:n.name,className:"w-full h-full object-cover"}):v.jsx(nS,{className:"w-5 h-5 text-gray-400"})}),v.jsx("span",{className:"hidden sm:inline text-gray-700 font-medium text-sm",children:n?.name||"Client Admin"}),v.jsx(XT,{className:"text-base"})]}),l&&v.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border z-50",children:[v.jsx("button",{onClick:()=>{e(),c(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:"Profile"}),v.jsx("button",{onClick:()=>{t(),c(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md",children:"Logout"})]})]})})]}),l&&v.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})},GN=()=>{};var Zb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let a=n.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},KN=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const a=n[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},rS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=l>>2,b=(l&3)<<4|d>>4;let T=(d&15)<<2|p>>6,C=p&63;m||(C=64,c||(T=64)),r.push(t[y],t[b],t[T],t[C])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const b=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||p==null||b==null)throw new QN;const T=l<<2|d>>4;if(r.push(T),p!==64){const C=d<<4&240|p>>2;if(r.push(C),b!==64){const N=p<<6&192|b;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class QN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YN=function(n){const e=sS(n);return rS.encodeByteArray(e,!0)},Pd=function(n){return YN(n).replace(/\./g,"")},iS=function(n){try{return rS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=()=>WN().__FIREBASE_DEFAULTS__,JN=()=>{if(typeof process>"u"||typeof Zb>"u")return;const n=Zb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&iS(n[1]);return e&&JSON.parse(e)},df=()=>{try{return GN()||XN()||JN()||ZN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aS=n=>df()?.emulatorHosts?.[n],ek=n=>{const e=aS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},oS=()=>df()?.config,lS=n=>df()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tk=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Pd(JSON.stringify(t)),Pd(JSON.stringify(c)),""].join(".")}const Hc={};function sk(){const n={prod:[],emulator:[]};for(const e of Object.keys(Hc))Hc[e]?n.emulator.push(e):n.prod.push(e);return n}function rk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ew=!1;function uS(n,e){if(typeof window>"u"||typeof document>"u"||!wl(window.location.host)||Hc[n]===e||Hc[n]||ew)return;Hc[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",l=sk().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{ew=!0,c()},T}function y(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=rk(r),C=t("text"),N=document.getElementById(C)||document.createElement("span"),L=t("learnmore"),V=document.getElementById(L)||document.createElement("a"),$=t("preprendIcon"),Y=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const K=T.element;d(K),y(V,L);const ee=p();m(Y,$),K.append(Y,N,V,ee),document.body.appendChild(K)}l?(N.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ik(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function ak(){const n=df()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ok(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ck(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uk(){return!ak()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dS(){try{return typeof indexedDB=="object"}catch{return!1}}function fS(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}function hk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="FirebaseError";class Ts extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=dk,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ha.prototype.create)}}class Ha{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?fk(l,r):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Ts(a,d,r)}}function fk(n,e){return n.replace(mk,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const mk=/\{\$([^}]+)}/g;function pk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Di(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=n[a],c=e[a];if(tw(l)&&tw(c)){if(!Di(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function tw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function zc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function gk(n,e){const t=new yk(n,e);return t.subscribe.bind(t)}class yk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vk(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Gp),a.error===void 0&&(a.error=Gp),a.complete===void 0&&(a.complete=Gp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=1e3,bk=2,wk=14400*1e3,Ek=.5;function nw(n,e=_k,t=bk){const r=e*Math.pow(t,n),a=Math.round(Ek*r*(Math.random()-.5)*2);return Math.min(wk,r+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(n){return n&&n._delegate?n._delegate:n}class bs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new tk;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xk(e))try{this.getOrInitializeService({instanceIdentifier:Na})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Na){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Na){return this.instances.has(e)}getOptions(e=Na){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Sk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Na){return this.component?this.component.multipleInstances?e:Na:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sk(n){return n===Na?void 0:n}function xk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const Rk={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},Ck=Fe.INFO,Ik={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},Nk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),a=Ik[e];if(a)console[a](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ff{constructor(e){this.name=e,this._logLevel=Ck,this._logHandler=Nk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const kk=(n,e)=>e.some(t=>n instanceof t);let sw,rw;function Ok(){return sw||(sw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dk(){return rw||(rw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mS=new WeakMap,wg=new WeakMap,pS=new WeakMap,Kp=new WeakMap,fy=new WeakMap;function Pk(n){const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ci(n.result)),a()},c=()=>{r(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&mS.set(t,n)}).catch(()=>{}),fy.set(e,n),e}function jk(n){if(wg.has(n))return;const e=new Promise((t,r)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});wg.set(n,e)}let Eg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ci(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Mk(n){Eg=n(Eg)}function Uk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Qp(this),e,...t);return pS.set(r,e.sort?e.sort():[e]),Ci(r)}:Dk().includes(n)?function(...e){return n.apply(Qp(this),e),Ci(mS.get(this))}:function(...e){return Ci(n.apply(Qp(this),e))}}function Lk(n){return typeof n=="function"?Uk(n):(n instanceof IDBTransaction&&jk(n),kk(n,Ok())?new Proxy(n,Eg):n)}function Ci(n){if(n instanceof IDBRequest)return Pk(n);if(Kp.has(n))return Kp.get(n);const e=Lk(n);return e!==n&&(Kp.set(n,e),fy.set(e,n)),e}const Qp=n=>fy.get(n);function gS(n,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=Ci(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Ci(c.result),m.oldVersion,m.newVersion,Ci(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const Vk=["get","getKey","getAll","getAllKeys","count"],zk=["put","add","delete","clear"],Yp=new Map;function iw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yp.get(e))return Yp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=zk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||Vk.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Yp.set(e,l),l}Mk(n=>({...n,get:(e,t,r)=>iw(e,t)||n.get(e,t,r),has:(e,t)=>!!iw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function qk(n){return n.getComponent()?.type==="VERSION"}const Tg="@firebase/app",aw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new ff("@firebase/app"),$k="@firebase/app-compat",Fk="@firebase/analytics-compat",Hk="@firebase/analytics",Gk="@firebase/app-check-compat",Kk="@firebase/app-check",Qk="@firebase/auth",Yk="@firebase/auth-compat",Wk="@firebase/database",Xk="@firebase/data-connect",Jk="@firebase/database-compat",Zk="@firebase/functions",e2="@firebase/functions-compat",t2="@firebase/installations",n2="@firebase/installations-compat",s2="@firebase/messaging",r2="@firebase/messaging-compat",i2="@firebase/performance",a2="@firebase/performance-compat",o2="@firebase/remote-config",l2="@firebase/remote-config-compat",c2="@firebase/storage",u2="@firebase/storage-compat",h2="@firebase/firestore",d2="@firebase/ai",f2="@firebase/firestore-compat",m2="firebase",p2="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="[DEFAULT]",g2={[Tg]:"fire-core",[$k]:"fire-core-compat",[Hk]:"fire-analytics",[Fk]:"fire-analytics-compat",[Kk]:"fire-app-check",[Gk]:"fire-app-check-compat",[Qk]:"fire-auth",[Yk]:"fire-auth-compat",[Wk]:"fire-rtdb",[Xk]:"fire-data-connect",[Jk]:"fire-rtdb-compat",[Zk]:"fire-fn",[e2]:"fire-fn-compat",[t2]:"fire-iid",[n2]:"fire-iid-compat",[s2]:"fire-fcm",[r2]:"fire-fcm-compat",[i2]:"fire-perf",[a2]:"fire-perf-compat",[o2]:"fire-rc",[l2]:"fire-rc-compat",[c2]:"fire-gcs",[u2]:"fire-gcs-compat",[h2]:"fire-fst",[f2]:"fire-fst-compat",[d2]:"fire-vertex","fire-js":"fire-js",[m2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new Map,y2=new Map,xg=new Map;function ow(n,e){try{n.container.addComponent(e)}catch(t){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ys(n){const e=n.name;if(xg.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;xg.set(e,n);for(const t of jd.values())ow(t,n);for(const t of y2.values())ow(t,n);return!0}function Ga(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new Ha("app","Firebase",v2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=p2;function mf(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Sg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw Ii.create("bad-app-name",{appName:String(a)});if(t||(t=oS()),!t)throw Ii.create("no-options");const l=jd.get(a);if(l){if(Di(t,l.options)&&Di(r,l.config))return l;throw Ii.create("duplicate-app",{appName:a})}const c=new Ak(a);for(const m of xg.values())c.addComponent(m);const d=new _2(t,r,c);return jd.set(a,d),d}function my(n=Sg){const e=jd.get(n);if(!e&&n===Sg&&oS())return mf();if(!e)throw Ii.create("no-app",{appName:n});return e}function ss(n,e,t){let r=g2[n]??n;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(c.join(" "));return}Ys(new bs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="firebase-heartbeat-database",w2=1,ru="firebase-heartbeat-store";let Wp=null;function yS(){return Wp||(Wp=gS(b2,w2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ru)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ii.create("idb-open",{originalErrorMessage:n.message})})),Wp}async function E2(n){try{const t=(await yS()).transaction(ru),r=await t.objectStore(ru).get(vS(n));return await t.done,r}catch(e){if(e instanceof Ts)Cr.warn(e.message);else{const t=Ii.create("idb-get",{originalErrorMessage:e?.message});Cr.warn(t.message)}}}async function lw(n,e){try{const r=(await yS()).transaction(ru,"readwrite");await r.objectStore(ru).put(e,vS(n)),await r.done}catch(t){if(t instanceof Ts)Cr.warn(t.message);else{const r=Ii.create("idb-set",{originalErrorMessage:t?.message});Cr.warn(r.message)}}}function vS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=1024,S2=30;class x2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new R2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>S2){const a=C2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Cr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=cw(),{heartbeatsToSend:t,unsentEntries:r}=A2(this._heartbeatsCache.heartbeats),a=Pd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Cr.warn(e),""}}}function cw(){return new Date().toISOString().substring(0,10)}function A2(n,e=T2){const t=[];let r=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),uw(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),uw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class R2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dS()?fS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await E2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return lw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return lw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function uw(n){return Pd(JSON.stringify({version:2,heartbeats:n})).length}function C2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(n){Ys(new bs("platform-logger",e=>new Bk(e),"PRIVATE")),Ys(new bs("heartbeat",e=>new x2(e),"PRIVATE")),ss(Tg,aw,n),ss(Tg,aw,"esm2020"),ss("fire-js","")}I2("");var N2="firebase",k2="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(N2,k2,"app");const _S="@firebase/installations",py="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=1e4,wS=`w:${py}`,ES="FIS_v2",O2="https://firebaseinstallations.googleapis.com/v1",D2=3600*1e3,P2="installations",j2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ua=new Ha(P2,j2,M2);function TS(n){return n instanceof Ts&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS({projectId:n}){return`${O2}/projects/${n}/installations`}function xS(n){return{token:n.token,requestStatus:2,expiresIn:L2(n.expiresIn),creationTime:Date.now()}}async function AS(n,e){const r=(await e.json()).error;return Ua.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function RS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function U2(n,{refreshToken:e}){const t=RS(n);return t.append("Authorization",V2(e)),t}async function CS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function L2(n){return Number(n.replace("s","000"))}function V2(n){return`${ES} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=SS(n),a=RS(n),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={fid:t,authVersion:ES,appId:n.appId,sdkVersion:wS},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await CS(()=>fetch(r,d));if(m.ok){const p=await m.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:xS(p.authToken)}}else throw await AS("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=/^[cdef][\w-]{21}$/,Ag="";function $2(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=F2(n);return q2.test(t)?t:Ag}catch{return Ag}}function F2(n){return B2(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=new Map;function kS(n,e){const t=pf(n);OS(t,e),H2(t,e)}function OS(n,e){const t=NS.get(n);if(t)for(const r of t)r(e)}function H2(n,e){const t=G2();t&&t.postMessage({key:n,fid:e}),K2()}let Da=null;function G2(){return!Da&&"BroadcastChannel"in self&&(Da=new BroadcastChannel("[Firebase] FID Change"),Da.onmessage=n=>{OS(n.data.key,n.data.fid)}),Da}function K2(){NS.size===0&&Da&&(Da.close(),Da=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="firebase-installations-database",Y2=1,La="firebase-installations-store";let Xp=null;function gy(){return Xp||(Xp=gS(Q2,Y2,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(La)}}})),Xp}async function Md(n,e){const t=pf(n),a=(await gy()).transaction(La,"readwrite"),l=a.objectStore(La),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&kS(n,e.fid),e}async function DS(n){const e=pf(n),r=(await gy()).transaction(La,"readwrite");await r.objectStore(La).delete(e),await r.done}async function gf(n,e){const t=pf(n),a=(await gy()).transaction(La,"readwrite"),l=a.objectStore(La),c=await l.get(t),d=e(c);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!c||c.fid!==d.fid)&&kS(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yy(n){let e;const t=await gf(n.appConfig,r=>{const a=W2(r),l=X2(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===Ag?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function W2(n){const e=n||{fid:$2(),registrationStatus:0};return PS(e)}function X2(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Ua.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=J2(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Z2(n)}:{installationEntry:e}}async function J2(n,e){try{const t=await z2(n,e);return Md(n.appConfig,t)}catch(t){throw TS(t)&&t.customData.serverCode===409?await DS(n.appConfig):await Md(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Z2(n){let e=await hw(n.appConfig);for(;e.registrationStatus===1;)await IS(100),e=await hw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await yy(n);return r||t}return e}function hw(n){return gf(n,e=>{if(!e)throw Ua.create("installation-not-found");return PS(e)})}function PS(n){return eO(n)?{fid:n.fid,registrationStatus:0}:n}function eO(n){return n.registrationStatus===1&&n.registrationTime+bS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO({appConfig:n,heartbeatServiceProvider:e},t){const r=nO(n,t),a=U2(n,t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={installation:{sdkVersion:wS,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await CS(()=>fetch(r,d));if(m.ok){const p=await m.json();return xS(p)}else throw await AS("Generate Auth Token",m)}function nO(n,{fid:e}){return`${SS(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vy(n,e=!1){let t;const r=await gf(n.appConfig,l=>{if(!jS(l))throw Ua.create("not-registered");const c=l.authToken;if(!e&&iO(c))return l;if(c.requestStatus===1)return t=sO(n,e),l;{if(!navigator.onLine)throw Ua.create("app-offline");const d=oO(l);return t=rO(n,d),d}});return t?await t:r.authToken}async function sO(n,e){let t=await dw(n.appConfig);for(;t.authToken.requestStatus===1;)await IS(100),t=await dw(n.appConfig);const r=t.authToken;return r.requestStatus===0?vy(n,e):r}function dw(n){return gf(n,e=>{if(!jS(e))throw Ua.create("not-registered");const t=e.authToken;return lO(t)?{...e,authToken:{requestStatus:0}}:e})}async function rO(n,e){try{const t=await tO(n,e),r={...e,authToken:t};return await Md(n.appConfig,r),t}catch(t){if(TS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await DS(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Md(n.appConfig,r)}throw t}}function jS(n){return n!==void 0&&n.registrationStatus===2}function iO(n){return n.requestStatus===2&&!aO(n)}function aO(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+D2}function oO(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function lO(n){return n.requestStatus===1&&n.requestTime+bS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cO(n){const e=n,{installationEntry:t,registrationPromise:r}=await yy(e);return r?r.catch(console.error):vy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(n,e=!1){const t=n;return await hO(t),(await vy(t,e)).token}async function hO(n){const{registrationPromise:e}=await yy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(n){if(!n||!n.options)throw Jp("App Configuration");if(!n.name)throw Jp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Jp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Jp(n){return Ua.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="installations",fO="installations-internal",mO=n=>{const e=n.getProvider("app").getImmediate(),t=dO(e),r=Ga(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},pO=n=>{const e=n.getProvider("app").getImmediate(),t=Ga(e,MS).getImmediate();return{getId:()=>cO(t),getToken:a=>uO(t,a)}};function gO(){Ys(new bs(MS,mO,"PUBLIC")),Ys(new bs(fO,pO,"PRIVATE"))}gO();ss(_S,py);ss(_S,py,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="analytics",yO="firebase_id",vO="origin",_O=60*1e3,bO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_y="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new ff("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ln=new Ha("analytics","Analytics",wO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(n){if(!n.startsWith(_y)){const e=Ln.create("invalid-gtag-resource",{gtagURL:n});return Rn.warn(e.message),""}return n}function US(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function TO(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function SO(n,e){const t=TO("firebase-js-sdk-policy",{createScriptURL:EO}),r=document.createElement("script"),a=`${_y}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}function xO(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function AO(n,e,t,r,a,l){const c=r[a];try{if(c)await e[c];else{const m=(await US(t)).find(p=>p.measurementId===a);m&&await e[m.appId]}}catch(d){Rn.error(d)}n("config",a,l)}async function RO(n,e,t,r,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const d=await US(t);for(const m of c){const p=d.find(b=>b.measurementId===m),y=p&&e[p.appId];if(y)l.push(y);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",r,a||{})}catch(l){Rn.error(l)}}function CO(n,e,t,r){async function a(l,...c){try{if(l==="event"){const[d,m]=c;await RO(n,e,t,d,m)}else if(l==="config"){const[d,m]=c;await AO(n,e,t,r,d,m)}else if(l==="consent"){const[d,m]=c;n("consent",d,m)}else if(l==="get"){const[d,m,p]=c;n("get",d,m,p)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){Rn.error(d)}}return a}function IO(n,e,t,r,a){let l=function(...c){window[r].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=CO(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function NO(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(_y)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=30,OO=1e3;class DO{constructor(e={},t=OO){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const LS=new DO;function PO(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function jO(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:PO(t)},a=bO.replace("{app-id}",e),l=await fetch(a,r);if(l.status!==200&&l.status!==304){let c="";try{const d=await l.json();d.error?.message&&(c=d.error.message)}catch{}throw Ln.create("config-fetch-failed",{httpStatus:l.status,responseMessage:c})}return l.json()}async function MO(n,e=LS,t){const{appId:r,apiKey:a,measurementId:l}=n.options;if(!r)throw Ln.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:r};throw Ln.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new VO;return setTimeout(async()=>{d.abort()},_O),VS({appId:r,apiKey:a,measurementId:l},c,d,e)}async function VS(n,{throttleEndTimeMillis:e,backoffCount:t},r,a=LS){const{appId:l,measurementId:c}=n;try{await UO(r,e)}catch(d){if(c)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:l,measurementId:c};throw d}try{const d=await jO(n);return a.deleteThrottleMetadata(l),d}catch(d){const m=d;if(!LO(m)){if(a.deleteThrottleMetadata(l),c)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:c};throw d}const p=Number(m?.customData?.httpStatus)===503?nw(t,a.intervalMillis,kO):nw(t,a.intervalMillis),y={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return a.setThrottleMetadata(l,y),Rn.debug(`Calling attemptFetch again in ${p} millis`),VS(n,y,r,a)}}function UO(n,e){return new Promise((t,r)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),r(Ln.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function LO(n){if(!(n instanceof Ts)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class VO{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function zO(n,e,t,r,a){if(a&&a.global){n("event",t,r);return}else{const l=await e,c={...r,send_to:l};n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(){if(dS())try{await fS()}catch(n){return Rn.warn(Ln.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Rn.warn(Ln.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qO(n,e,t,r,a,l,c){const d=MO(n);d.then(T=>{t[T.measurementId]=T.appId,n.options.measurementId&&T.measurementId!==n.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>Rn.error(T)),e.push(d);const m=BO().then(T=>{if(T)return r.getId()}),[p,y]=await Promise.all([d,m]);NO(l)||SO(l,p.measurementId),a("js",new Date);const b=c?.config??{};return b[vO]="firebase",b.update=!0,y!=null&&(b[yO]=y),a("config",p.measurementId,b),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.app=e}_delete(){return delete Gc[this.app.options.appId],Promise.resolve()}}let Gc={},fw=[];const mw={};let Zp="dataLayer",FO="gtag",pw,zS,gw=!1;function HO(){const n=[];if(hS()&&n.push("This is a browser extension environment."),hk()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,a)=>`(${a+1}) ${r}`).join(" "),t=Ln.create("invalid-analytics-context",{errorInfo:e});Rn.warn(t.message)}}function GO(n,e,t){HO();const r=n.options.appId;if(!r)throw Ln.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ln.create("no-api-key");if(Gc[r]!=null)throw Ln.create("already-exists",{id:r});if(!gw){xO(Zp);const{wrappedGtag:l,gtagCore:c}=IO(Gc,fw,mw,Zp,FO);zS=l,pw=c,gw=!0}return Gc[r]=qO(n,fw,mw,e,pw,Zp,t),new $O(n)}function KO(n=my()){n=Ct(n);const e=Ga(n,Ud);return e.isInitialized()?e.getImmediate():QO(n)}function QO(n,e={}){const t=Ga(n,Ud);if(t.isInitialized()){const a=t.getImmediate();if(Di(e,t.getOptions()))return a;throw Ln.create("already-initialized")}return t.initialize({options:e})}function YO(n,e,t,r){n=Ct(n),zO(zS,Gc[n.app.options.appId],e,t,r).catch(a=>Rn.error(a))}const yw="@firebase/analytics",vw="0.10.18";function WO(){Ys(new bs(Ud,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return GO(r,a,t)},"PUBLIC")),Ys(new bs("analytics-internal",n,"PRIVATE")),ss(yw,vw),ss(yw,vw,"esm2020");function n(e){try{const t=e.getProvider(Ud).getImmediate();return{logEvent:(r,a,l)=>YO(t,r,a,l)}}catch(t){throw Ln.create("interop-component-reg-failed",{reason:t})}}}WO();var _w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,BS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,S){function R(){}R.prototype=S.prototype,M.F=S.prototype,M.prototype=new R,M.prototype.constructor=M,M.D=function(O,j,k){for(var I=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)I[Se-2]=arguments[Se];return S.prototype[j].apply(O,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,S,R){R||(R=0);const O=Array(16);if(typeof S=="string")for(var j=0;j<16;++j)O[j]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(j=0;j<16;++j)O[j]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=M.g[0],R=M.g[1],j=M.g[2];let k=M.g[3],I;I=S+(k^R&(j^k))+O[0]+3614090360&4294967295,S=R+(I<<7&4294967295|I>>>25),I=k+(j^S&(R^j))+O[1]+3905402710&4294967295,k=S+(I<<12&4294967295|I>>>20),I=j+(R^k&(S^R))+O[2]+606105819&4294967295,j=k+(I<<17&4294967295|I>>>15),I=R+(S^j&(k^S))+O[3]+3250441966&4294967295,R=j+(I<<22&4294967295|I>>>10),I=S+(k^R&(j^k))+O[4]+4118548399&4294967295,S=R+(I<<7&4294967295|I>>>25),I=k+(j^S&(R^j))+O[5]+1200080426&4294967295,k=S+(I<<12&4294967295|I>>>20),I=j+(R^k&(S^R))+O[6]+2821735955&4294967295,j=k+(I<<17&4294967295|I>>>15),I=R+(S^j&(k^S))+O[7]+4249261313&4294967295,R=j+(I<<22&4294967295|I>>>10),I=S+(k^R&(j^k))+O[8]+1770035416&4294967295,S=R+(I<<7&4294967295|I>>>25),I=k+(j^S&(R^j))+O[9]+2336552879&4294967295,k=S+(I<<12&4294967295|I>>>20),I=j+(R^k&(S^R))+O[10]+4294925233&4294967295,j=k+(I<<17&4294967295|I>>>15),I=R+(S^j&(k^S))+O[11]+2304563134&4294967295,R=j+(I<<22&4294967295|I>>>10),I=S+(k^R&(j^k))+O[12]+1804603682&4294967295,S=R+(I<<7&4294967295|I>>>25),I=k+(j^S&(R^j))+O[13]+4254626195&4294967295,k=S+(I<<12&4294967295|I>>>20),I=j+(R^k&(S^R))+O[14]+2792965006&4294967295,j=k+(I<<17&4294967295|I>>>15),I=R+(S^j&(k^S))+O[15]+1236535329&4294967295,R=j+(I<<22&4294967295|I>>>10),I=S+(j^k&(R^j))+O[1]+4129170786&4294967295,S=R+(I<<5&4294967295|I>>>27),I=k+(R^j&(S^R))+O[6]+3225465664&4294967295,k=S+(I<<9&4294967295|I>>>23),I=j+(S^R&(k^S))+O[11]+643717713&4294967295,j=k+(I<<14&4294967295|I>>>18),I=R+(k^S&(j^k))+O[0]+3921069994&4294967295,R=j+(I<<20&4294967295|I>>>12),I=S+(j^k&(R^j))+O[5]+3593408605&4294967295,S=R+(I<<5&4294967295|I>>>27),I=k+(R^j&(S^R))+O[10]+38016083&4294967295,k=S+(I<<9&4294967295|I>>>23),I=j+(S^R&(k^S))+O[15]+3634488961&4294967295,j=k+(I<<14&4294967295|I>>>18),I=R+(k^S&(j^k))+O[4]+3889429448&4294967295,R=j+(I<<20&4294967295|I>>>12),I=S+(j^k&(R^j))+O[9]+568446438&4294967295,S=R+(I<<5&4294967295|I>>>27),I=k+(R^j&(S^R))+O[14]+3275163606&4294967295,k=S+(I<<9&4294967295|I>>>23),I=j+(S^R&(k^S))+O[3]+4107603335&4294967295,j=k+(I<<14&4294967295|I>>>18),I=R+(k^S&(j^k))+O[8]+1163531501&4294967295,R=j+(I<<20&4294967295|I>>>12),I=S+(j^k&(R^j))+O[13]+2850285829&4294967295,S=R+(I<<5&4294967295|I>>>27),I=k+(R^j&(S^R))+O[2]+4243563512&4294967295,k=S+(I<<9&4294967295|I>>>23),I=j+(S^R&(k^S))+O[7]+1735328473&4294967295,j=k+(I<<14&4294967295|I>>>18),I=R+(k^S&(j^k))+O[12]+2368359562&4294967295,R=j+(I<<20&4294967295|I>>>12),I=S+(R^j^k)+O[5]+4294588738&4294967295,S=R+(I<<4&4294967295|I>>>28),I=k+(S^R^j)+O[8]+2272392833&4294967295,k=S+(I<<11&4294967295|I>>>21),I=j+(k^S^R)+O[11]+1839030562&4294967295,j=k+(I<<16&4294967295|I>>>16),I=R+(j^k^S)+O[14]+4259657740&4294967295,R=j+(I<<23&4294967295|I>>>9),I=S+(R^j^k)+O[1]+2763975236&4294967295,S=R+(I<<4&4294967295|I>>>28),I=k+(S^R^j)+O[4]+1272893353&4294967295,k=S+(I<<11&4294967295|I>>>21),I=j+(k^S^R)+O[7]+4139469664&4294967295,j=k+(I<<16&4294967295|I>>>16),I=R+(j^k^S)+O[10]+3200236656&4294967295,R=j+(I<<23&4294967295|I>>>9),I=S+(R^j^k)+O[13]+681279174&4294967295,S=R+(I<<4&4294967295|I>>>28),I=k+(S^R^j)+O[0]+3936430074&4294967295,k=S+(I<<11&4294967295|I>>>21),I=j+(k^S^R)+O[3]+3572445317&4294967295,j=k+(I<<16&4294967295|I>>>16),I=R+(j^k^S)+O[6]+76029189&4294967295,R=j+(I<<23&4294967295|I>>>9),I=S+(R^j^k)+O[9]+3654602809&4294967295,S=R+(I<<4&4294967295|I>>>28),I=k+(S^R^j)+O[12]+3873151461&4294967295,k=S+(I<<11&4294967295|I>>>21),I=j+(k^S^R)+O[15]+530742520&4294967295,j=k+(I<<16&4294967295|I>>>16),I=R+(j^k^S)+O[2]+3299628645&4294967295,R=j+(I<<23&4294967295|I>>>9),I=S+(j^(R|~k))+O[0]+4096336452&4294967295,S=R+(I<<6&4294967295|I>>>26),I=k+(R^(S|~j))+O[7]+1126891415&4294967295,k=S+(I<<10&4294967295|I>>>22),I=j+(S^(k|~R))+O[14]+2878612391&4294967295,j=k+(I<<15&4294967295|I>>>17),I=R+(k^(j|~S))+O[5]+4237533241&4294967295,R=j+(I<<21&4294967295|I>>>11),I=S+(j^(R|~k))+O[12]+1700485571&4294967295,S=R+(I<<6&4294967295|I>>>26),I=k+(R^(S|~j))+O[3]+2399980690&4294967295,k=S+(I<<10&4294967295|I>>>22),I=j+(S^(k|~R))+O[10]+4293915773&4294967295,j=k+(I<<15&4294967295|I>>>17),I=R+(k^(j|~S))+O[1]+2240044497&4294967295,R=j+(I<<21&4294967295|I>>>11),I=S+(j^(R|~k))+O[8]+1873313359&4294967295,S=R+(I<<6&4294967295|I>>>26),I=k+(R^(S|~j))+O[15]+4264355552&4294967295,k=S+(I<<10&4294967295|I>>>22),I=j+(S^(k|~R))+O[6]+2734768916&4294967295,j=k+(I<<15&4294967295|I>>>17),I=R+(k^(j|~S))+O[13]+1309151649&4294967295,R=j+(I<<21&4294967295|I>>>11),I=S+(j^(R|~k))+O[4]+4149444226&4294967295,S=R+(I<<6&4294967295|I>>>26),I=k+(R^(S|~j))+O[11]+3174756917&4294967295,k=S+(I<<10&4294967295|I>>>22),I=j+(S^(k|~R))+O[2]+718787259&4294967295,j=k+(I<<15&4294967295|I>>>17),I=R+(k^(j|~S))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(j+(I<<21&4294967295|I>>>11))&4294967295,M.g[2]=M.g[2]+j&4294967295,M.g[3]=M.g[3]+k&4294967295}r.prototype.v=function(M,S){S===void 0&&(S=M.length);const R=S-this.blockSize,O=this.C;let j=this.h,k=0;for(;k<S;){if(j==0)for(;k<=R;)a(this,M,k),k+=this.blockSize;if(typeof M=="string"){for(;k<S;)if(O[j++]=M.charCodeAt(k++),j==this.blockSize){a(this,O),j=0;break}}else for(;k<S;)if(O[j++]=M[k++],j==this.blockSize){a(this,O),j=0;break}}this.h=j,this.o+=S},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;S=this.o*8;for(var R=M.length-8;R<M.length;++R)M[R]=S&255,S/=256;for(this.v(M),M=Array(16),S=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)M[S++]=this.g[R]>>>O&255;return M};function l(M,S){var R=d;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=S(M)}function c(M,S){this.h=S;const R=[];let O=!0;for(let j=M.length-1;j>=0;j--){const k=M[j]|0;O&&k==S||(R[j]=k,O=!1)}this.g=R}var d={};function m(M){return-128<=M&&M<128?l(M,function(S){return new c([S|0],S<0?-1:0)}):new c([M|0],M<0?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return b;if(M<0)return V(p(-M));const S=[];let R=1;for(let O=0;M>=R;O++)S[O]=M/R|0,R*=4294967296;return new c(S,0)}function y(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return V(y(M.substring(1),S));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(S,8));let O=b;for(let k=0;k<M.length;k+=8){var j=Math.min(8,M.length-k);const I=parseInt(M.substring(k,k+j),S);j<8?(j=p(Math.pow(S,j)),O=O.j(j).add(p(I))):(O=O.j(R),O=O.add(p(I)))}return O}var b=m(0),T=m(1),C=m(16777216);n=c.prototype,n.m=function(){if(L(this))return-V(this).m();let M=0,S=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);M+=(O>=0?O:4294967296+O)*S,S*=4294967296}return M},n.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(N(this))return"0";if(L(this))return"-"+V(this).toString(M);const S=p(Math.pow(M,6));var R=this;let O="";for(;;){const j=ee(R,S).g;R=$(R,j.j(S));let k=((R.g.length>0?R.g[0]:R.h)>>>0).toString(M);if(R=j,N(R))return k+O;for(;k.length<6;)k="0"+k;O=k+O}},n.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function N(M){if(M.h!=0)return!1;for(let S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function L(M){return M.h==-1}n.l=function(M){return M=$(this,M),L(M)?-1:N(M)?0:1};function V(M){const S=M.g.length,R=[];for(let O=0;O<S;O++)R[O]=~M.g[O];return new c(R,~M.h).add(T)}n.abs=function(){return L(this)?V(this):this},n.add=function(M){const S=Math.max(this.g.length,M.g.length),R=[];let O=0;for(let j=0;j<=S;j++){let k=O+(this.i(j)&65535)+(M.i(j)&65535),I=(k>>>16)+(this.i(j)>>>16)+(M.i(j)>>>16);O=I>>>16,k&=65535,I&=65535,R[j]=I<<16|k}return new c(R,R[R.length-1]&-2147483648?-1:0)};function $(M,S){return M.add(V(S))}n.j=function(M){if(N(this)||N(M))return b;if(L(this))return L(M)?V(this).j(V(M)):V(V(this).j(M));if(L(M))return V(this.j(V(M)));if(this.l(C)<0&&M.l(C)<0)return p(this.m()*M.m());const S=this.g.length+M.g.length,R=[];for(var O=0;O<2*S;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let j=0;j<M.g.length;j++){const k=this.i(O)>>>16,I=this.i(O)&65535,Se=M.i(j)>>>16,be=M.i(j)&65535;R[2*O+2*j]+=I*be,Y(R,2*O+2*j),R[2*O+2*j+1]+=k*be,Y(R,2*O+2*j+1),R[2*O+2*j+1]+=I*Se,Y(R,2*O+2*j+1),R[2*O+2*j+2]+=k*Se,Y(R,2*O+2*j+2)}for(M=0;M<S;M++)R[M]=R[2*M+1]<<16|R[2*M];for(M=S;M<2*S;M++)R[M]=0;return new c(R,0)};function Y(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function K(M,S){this.g=M,this.h=S}function ee(M,S){if(N(S))throw Error("division by zero");if(N(M))return new K(b,b);if(L(M))return S=ee(V(M),S),new K(V(S.g),V(S.h));if(L(S))return S=ee(M,V(S)),new K(V(S.g),S.h);if(M.g.length>30){if(L(M)||L(S))throw Error("slowDivide_ only works with positive integers.");for(var R=T,O=S;O.l(M)<=0;)R=le(R),O=le(O);var j=ae(R,1),k=ae(O,1);for(O=ae(O,2),R=ae(R,2);!N(O);){var I=k.add(O);I.l(M)<=0&&(j=j.add(R),k=I),O=ae(O,1),R=ae(R,1)}return S=$(M,j.j(S)),new K(j,S)}for(j=b;M.l(S)>=0;){for(R=Math.max(1,Math.floor(M.m()/S.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),k=p(R),I=k.j(S);L(I)||I.l(M)>0;)R-=O,k=p(R),I=k.j(S);N(k)&&(k=T),j=j.add(k),M=$(M,I)}return new K(j,M)}n.B=function(M){return ee(this,M).h},n.and=function(M){const S=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<S;O++)R[O]=this.i(O)&M.i(O);return new c(R,this.h&M.h)},n.or=function(M){const S=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<S;O++)R[O]=this.i(O)|M.i(O);return new c(R,this.h|M.h)},n.xor=function(M){const S=Math.max(this.g.length,M.g.length),R=[];for(let O=0;O<S;O++)R[O]=this.i(O)^M.i(O);return new c(R,this.h^M.h)};function le(M){const S=M.g.length+1,R=[];for(let O=0;O<S;O++)R[O]=M.i(O)<<1|M.i(O-1)>>>31;return new c(R,M.h)}function ae(M,S){const R=S>>5;S%=32;const O=M.g.length-R,j=[];for(let k=0;k<O;k++)j[k]=S>0?M.i(k+R)>>>S|M.i(k+R+1)<<32-S:M.i(k+R);return new c(j,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,BS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Ni=c}).apply(typeof _w<"u"?_w:typeof self<"u"?self:typeof window<"u"?window:{});var td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qS,Bc,$S,pd,Rg,FS,HS,GS;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof td=="object"&&td];for(var _=0;_<h.length;++_){var w=h[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,_){if(_)e:{var w=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var H=h[A];if(!(H in w))break e;w=w[H]}h=h[h.length-1],A=w[h],_=_(A),_!=A&&_!=null&&e(w,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var w=[],A;for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&w.push([A,_[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,w){return h.call.apply(h.bind,arguments)}function p(h,_,w){return p=m,p.apply(null,arguments)}function y(h,_){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function b(h,_){function w(){}w.prototype=_.prototype,h.Z=_.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(A,H,X){for(var de=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)de[Oe-2]=arguments[Oe];return _.prototype[H].apply(A,de)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const _=h.length;if(_>0){const w=Array(_);for(let A=0;A<_;A++)w[A]=h[A];return w}return[]}function N(h,_){for(let A=1;A<arguments.length;A++){const H=arguments[A];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=h.length||0;const X=H.length||0;h.length=w+X;for(let de=0;de<X;de++)h[w+de]=H[de]}else h.push(H)}}class L{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function V(h){c.setTimeout(()=>{throw h},0)}function $(){var h=M;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Y{constructor(){this.h=this.g=null}add(_,w){const A=K.get();A.set(_,w),this.h?this.h.next=A:this.g=A,this.h=A}}var K=new L(()=>new ee,h=>h.reset());class ee{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let le,ae=!1,M=new Y,S=()=>{const h=Promise.resolve(void 0);le=()=>{h.then(R)}};function R(){for(var h;h=$();){try{h.h.call(h.g)}catch(w){V(w)}var _=K;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}ae=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,_),c.removeEventListener("test",w,_)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function Se(h,_){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}b(Se,j),Se.prototype.init=function(h,_){const w=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(w=="mouseover"?_=h.fromElement:w=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),B=0;function oe(h,_,w,A,H){this.listener=h,this.proxy=null,this.src=_,this.type=w,this.capture=!!A,this.ha=H,this.key=++B,this.da=this.fa=!1}function te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h,_,w){for(const A in h)_.call(w,h[A],A,h)}function P(h,_){for(const w in h)_.call(void 0,h[w],w,h)}function J(h){const _={};for(const w in h)_[w]=h[w];return _}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,_){let w,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(w in A)h[w]=A[w];for(let X=0;X<he.length;X++)w=he[X],Object.prototype.hasOwnProperty.call(A,w)&&(h[w]=A[w])}}function fe(h){this.src=h,this.g={},this.h=0}fe.prototype.add=function(h,_,w,A,H){const X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);const de=Te(h,_,A,H);return de>-1?(_=h[de],w||(_.fa=!1)):(_=new oe(_,this.src,X,!!A,H),_.fa=w,h.push(_)),_};function Ne(h,_){const w=_.type;if(w in h.g){var A=h.g[w],H=Array.prototype.indexOf.call(A,_,void 0),X;(X=H>=0)&&Array.prototype.splice.call(A,H,1),X&&(te(_),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Te(h,_,w,A){for(let H=0;H<h.length;++H){const X=h[H];if(!X.da&&X.listener==_&&X.capture==!!w&&X.ha==A)return H}return-1}var Ve="closure_lm_"+(Math.random()*1e6|0),me={};function at(h,_,w,A,H){if(Array.isArray(_)){for(let X=0;X<_.length;X++)at(h,_[X],w,A,H);return null}return w=Du(w),h&&h[be]?h.J(_,w,d(A)?!!A.capture:!1,H):Vn(h,_,w,!1,A,H)}function Vn(h,_,w,A,H,X){if(!_)throw Error("Invalid event type");const de=d(H)?!!H.capture:!!H;let Oe=Nl(h);if(Oe||(h[Ve]=Oe=new fe(h)),w=Oe.add(_,w,A,de,X),w.proxy)return w;if(A=zn(),w.proxy=A,A.src=h,A.listener=w,h.addEventListener)k||(H=de),H===void 0&&(H=!1),h.addEventListener(_.toString(),A,H);else if(h.attachEvent)h.attachEvent(Wa(_.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function zn(){function h(w){return _.call(h.src,h.listener,w)}const _=Uf;return h}function rs(h,_,w,A,H){if(Array.isArray(_))for(var X=0;X<_.length;X++)rs(h,_[X],w,A,H);else A=d(A)?!!A.capture:!!A,w=Du(w),h&&h[be]?(h=h.i,X=String(_).toString(),X in h.g&&(_=h.g[X],w=Te(_,w,A,H),w>-1&&(te(_[w]),Array.prototype.splice.call(_,w,1),_.length==0&&(delete h.g[X],h.h--)))):h&&(h=Nl(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Te(_,w,A,H)),(w=h>-1?_[h]:null)&&Fi(w))}function Fi(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[be])Ne(_.i,h);else{var w=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(w,A,h.capture):_.detachEvent?_.detachEvent(Wa(w),A):_.addListener&&_.removeListener&&_.removeListener(A),(w=Nl(_))?(Ne(w,h),w.h==0&&(w.src=null,_[Ve]=null)):te(h)}}}function Wa(h){return h in me?me[h]:me[h]="on"+h}function Uf(h,_){if(h.da)h=!0;else{_=new Se(_,this);const w=h.listener,A=h.ha||h.src;h.fa&&Fi(h),h=w.call(A,_)}return h}function Nl(h){return h=h[Ve],h instanceof fe?h:null}var wn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Du(h){return typeof h=="function"?h:(h[wn]||(h[wn]=function(_){return h.handleEvent(_)}),h[wn])}function Pt(){O.call(this),this.i=new fe(this),this.M=this,this.G=null}b(Pt,O),Pt.prototype[be]=!0,Pt.prototype.removeEventListener=function(h,_,w,A){rs(this,h,_,w,A)};function Ft(h,_){var w,A=h.G;if(A)for(w=[];A;A=A.G)w.push(A);if(h=h.M,A=_.type||_,typeof _=="string")_=new j(_,h);else if(_ instanceof j)_.target=_.target||h;else{var H=_;_=new j(A,h),ce(_,H)}H=!0;let X,de;if(w)for(de=w.length-1;de>=0;de--)X=_.g=w[de],H=Js(X,A,!0,_)&&H;if(X=_.g=h,H=Js(X,A,!0,_)&&H,H=Js(X,A,!1,_)&&H,w)for(de=0;de<w.length;de++)X=_.g=w[de],H=Js(X,A,!1,_)&&H}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const w=h.g[_];for(let A=0;A<w.length;A++)te(w[A]);delete h.g[_],h.h--}}this.G=null},Pt.prototype.J=function(h,_,w,A){return this.i.add(String(h),_,!1,w,A)},Pt.prototype.K=function(h,_,w,A){return this.i.add(String(h),_,!0,w,A)};function Js(h,_,w,A){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let H=!0;for(let X=0;X<_.length;++X){const de=_[X];if(de&&!de.da&&de.capture==w){const Oe=de.listener,dt=de.ha||de.src;de.fa&&Ne(h.i,de),H=Oe.call(dt,A)!==!1&&H}}return H&&!A.defaultPrevented}function Lf(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function kl(h){h.g=Lf(()=>{h.g=null,h.i&&(h.i=!1,kl(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Vf extends O{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:kl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(h){O.call(this),this.h=h,this.g={}}b(Hi,O);var jr=[];function rn(h){ue(h.g,function(_,w){this.g.hasOwnProperty(w)&&Fi(_)},h),h.g={}}Hi.prototype.N=function(){Hi.Z.N.call(this),rn(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bn=c.JSON.stringify,mn=c.JSON.parse,zf=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Pu(){}function ju(){}var Ss={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mr(){j.call(this,"d")}b(Mr,j);function is(){j.call(this,"c")}b(is,j);var qn={},Ur=null;function Xa(){return Ur=Ur||new Pt}qn.Ia="serverreachability";function Ol(h){j.call(this,qn.Ia,h)}b(Ol,j);function Lr(h){const _=Xa();Ft(_,new Ol(_))}qn.STAT_EVENT="statevent";function Ja(h,_){j.call(this,qn.STAT_EVENT,h),this.stat=_}b(Ja,j);function wt(h){const _=Xa();Ft(_,new Ja(_,h))}qn.Ja="timingevent";function Mu(h,_){j.call(this,qn.Ja,h),this.size=_}b(Mu,j);function Vr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function zr(){this.g=!0}zr.prototype.ua=function(){this.g=!1};function Dl(h,_,w,A,H,X){h.info(function(){if(h.g)if(X){var de="",Oe=X.split("&");for(let Je=0;Je<Oe.length;Je++){var dt=Oe[Je].split("=");if(dt.length>1){const St=dt[0];dt=dt[1];const In=St.split("_");de=In.length>=2&&In[1]=="type"?de+(St+"="+dt+"&"):de+(St+"=redacted&")}}}else de=null;else de=X;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+_+`
`+w+`
`+de})}function Pl(h,_,w,A,H,X,de){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+_+`
`+w+`
`+X+" "+de})}function Zs(h,_,w,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+xs(h,w)+(A?" "+A:"")})}function Bf(h,_){h.info(function(){return"TIMEOUT: "+_})}zr.prototype.info=function(){};function xs(h,_){if(!h.g)return _;if(!_)return null;try{const X=JSON.parse(_);if(X){for(h=0;h<X.length;h++)if(Array.isArray(X[h])){var w=X[h];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let de=1;de<A.length;de++)A[de]=""}}}}return Bn(X)}catch{return _}}var Et={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},er;function Gi(){}b(Gi,Pu),Gi.prototype.g=function(){return new XMLHttpRequest},er=new Gi;function Ki(h){return encodeURIComponent(String(h))}function qf(h){var _=1;h=h.split(":");const w=[];for(;_>0&&h.length;)w.push(h.shift()),_--;return h.length&&w.push(h.join(":")),w}function as(h,_,w,A){this.j=h,this.i=_,this.l=w,this.S=A||1,this.V=new Hi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Br}function Br(){this.i=null,this.g="",this.h=!1}var Za={},As={};function Rs(h,_,w){h.M=1,h.A=nr(gt(_)),h.u=w,h.R=!0,qr(h,null)}function qr(h,_){h.F=Date.now(),Qi(h),h.B=gt(h.A);var w=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),zu(w.i,"t",A),h.C=0,w=h.j.L,h.h=new Br,h.g=co(h.j,w?_:null,!h.u),h.P>0&&(h.O=new Vf(p(h.Y,h,h.g),h.P)),_=h.V,w=h.g,A=h.ba;var H="readystatechange";Array.isArray(H)||(H&&(jr[0]=H.toString()),H=jr);for(let X=0;X<H.length;X++){const de=at(w,H[X],A||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=h.J?J(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Lr(),Dl(h.i,h.v,h.B,h.l,h.S,h.u)}as.prototype.ba=function(h){h=h.target;const _=this.O;_&&an(h)==3?_.j():this.Y(h)},as.prototype.Y=function(h){try{if(h==this.g)e:{const Oe=an(this.g),dt=this.g.ya(),Je=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||ia(this.g)))){this.K||Oe!=4||dt==7||(dt==8||Je<=0?Lr(3):Lr(2)),Is(this);var _=this.g.ca();this.X=_;var w=$r(this);if(this.o=_==200,Pl(this.i,this.v,this.B,this.l,this.S,Oe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var X=A;break t}}X=null}if(h=X)Zs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,eo(this,h);else{this.o=!1,this.m=3,wt(12),Ns(this),Yi(this);break e}}if(this.R){h=!0;let St;for(;!this.K&&this.C<w.length;)if(St=Uu(this,w),St==As){Oe==4&&(this.m=4,wt(14),h=!1),Zs(this.i,this.l,null,"[Incomplete Response]");break}else if(St==Za){this.m=4,wt(15),Zs(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else Zs(this.i,this.l,St,null),eo(this,St);if(Tt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||w.length!=0||this.h.h||(this.m=1,wt(16),h=!1),this.o=this.o&&h,!h)Zs(this.i,this.l,w,"[Invalid Chunked Response]"),Ns(this),Yi(this);else if(w.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Fl(de),de.P=!0,wt(11))}}else Zs(this.i,this.l,w,null),eo(this,w);Oe==4&&Ns(this),this.o&&!this.K&&(Oe==4?Hl(this.j,this):(this.o=!1,Qi(this)))}else aa(this.g),_==400&&w.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),Ns(this),Yi(this)}}}catch{}finally{}};function $r(h){if(!Tt(h))return h.g.la();const _=ia(h.g);if(_==="")return"";let w="";const A=_.length,H=an(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ns(h),Yi(h),"";h.h.i=new c.TextDecoder}for(let X=0;X<A;X++)h.h.h=!0,w+=h.h.i.decode(_[X],{stream:!(H&&X==A-1)});return _.length=0,h.h.g+=w,h.C=0,h.h.g}function Tt(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Uu(h,_){var w=h.C,A=_.indexOf(`
`,w);return A==-1?As:(w=Number(_.substring(w,A)),isNaN(w)?Za:(A+=1,A+w>_.length?As:(_=_.slice(A,A+w),h.C=A+w,_)))}as.prototype.cancel=function(){this.K=!0,Ns(this)};function Qi(h){h.T=Date.now()+h.H,Cs(h,h.H)}function Cs(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Vr(p(h.aa,h),_)}function Is(h){h.D&&(c.clearTimeout(h.D),h.D=null)}as.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Bf(this.i,this.B),this.M!=2&&(Lr(),wt(17)),Ns(this),this.m=2,Yi(this)):Cs(this,this.T-h)};function Yi(h){h.j.I==0||h.K||Hl(h.j,h)}function Ns(h){Is(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,rn(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function eo(h,_){try{var w=h.j;if(w.I!=0&&(w.g==h||Ji(w.h,h))){if(!h.L&&Ji(w.h,h)&&w.I==3){try{var A=w.Ba.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)lo(w),ks(w);else break e;$l(w),wt(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Vr(p(w.Va,w),6e3));$n(w.h)<=1&&w.ta&&(w.ta=void 0)}else ir(w,11)}else if((h.L||w.g==h)&&lo(w),!I(_))for(H=w.Ba.g.parse(_),_=0;_<H.length;_++){let Je=H[_];const St=Je[0];if(!(St<=w.K))if(w.K=St,Je=Je[1],w.I==2)if(Je[0]=="c"){w.M=Je[1],w.ba=Je[2];const In=Je[3];In!=null&&(w.ka=In,w.j.info("VER="+w.ka));const Os=Je[4];Os!=null&&(w.za=Os,w.j.info("SVER="+w.za));const cs=Je[5];cs!=null&&typeof cs=="number"&&cs>0&&(A=1.5*cs,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const us=h.g;if(us){const hs=us.g?us.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hs){var X=A.h;X.g||hs.indexOf("spdy")==-1&&hs.indexOf("quic")==-1&&hs.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(to(X,X.h),X.h=null))}if(A.G){const Kl=us.g?us.g.getResponseHeader("X-HTTP-Session-Id"):null;Kl&&(A.wa=Kl,tt(A.J,A.G,Kl))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var de=h;if(A.na=Yu(A,A.L?A.ba:null,A.W),de.L){tr(A.h,de);var Oe=de,dt=A.O;dt&&(Oe.H=dt),Oe.D&&(Is(Oe),Qi(Oe)),A.g=de}else Hu(A);w.i.length>0&&ua(w)}else Je[0]!="stop"&&Je[0]!="close"||ir(w,7);else w.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?ir(w,7):la(w):Je[0]!="noop"&&w.l&&w.l.qa(Je),w.A=0)}}Lr(4)}catch{}}var $f=class{constructor(h,_){this.g=h,this.map=_}};function Wi(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Xi(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $n(h){return h.h?1:h.g?h.g.size:0}function Ji(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function to(h,_){h.g?h.g.add(_):h.h=_}function tr(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Wi.prototype.cancel=function(){if(this.i=no(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function no(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const w of h.g.values())_=_.concat(w.G);return _}return C(h.i)}var so=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ff(h,_){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const A=h[w].indexOf("=");let H,X=null;A>=0?(H=h[w].substring(0,A),X=h[w].substring(A+1)):H=h[w],_(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function os(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof os?(this.l=h.l,Fr(this,h.j),this.o=h.o,this.g=h.g,Zi(this,h.u),this.h=h.h,Hr(this,Bu(h.i)),this.m=h.m):h&&(_=String(h).match(so))?(this.l=!1,Fr(this,_[1]||"",!0),this.o=ea(_[2]||""),this.g=ea(_[3]||"",!0),Zi(this,_[4]),this.h=ea(_[5]||"",!0),Hr(this,_[6]||"",!0),this.m=ea(_[7]||"")):(this.l=!1,this.i=new Fn(null,this.l))}os.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Ht(_,Ml,!0),":");var w=this.g;return(w||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ht(_,Ml,!0),"@"),h.push(Ki(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ht(w,w.charAt(0)=="/"?Gr:Ul,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ht(w,Vu)),h.join("")},os.prototype.resolve=function(h){const _=gt(this);let w=!!h.j;w?Fr(_,h.j):w=!!h.o,w?_.o=h.o:w=!!h.g,w?_.g=h.g:w=h.u!=null;var A=h.h;if(w)Zi(_,h.u);else if(w=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=_.h.lastIndexOf("/");H!=-1&&(A=_.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let de=0;de<H.length;){const Oe=H[de++];Oe=="."?A&&de==H.length&&X.push(""):Oe==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),A&&de==H.length&&X.push("")):(X.push(Oe),A=!0)}A=X.join("/")}else A=H}return w?_.h=A:w=h.i.toString()!=="",w?Hr(_,Bu(h.i)):w=!!h.m,w&&(_.m=h.m),_};function gt(h){return new os(h)}function Fr(h,_,w){h.j=w?ea(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Zi(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Hr(h,_,w){_ instanceof Fn?(h.i=_,zl(h.i,h.l)):(w||(_=Ht(_,Lu)),h.i=new Fn(_,h.l))}function tt(h,_,w){h.i.set(_,w)}function nr(h){return tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ea(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ht(h,_,w){return typeof h=="string"?(h=encodeURI(h).replace(_,jl),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function jl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ml=/[#\/\?@]/g,Ul=/[#\?:]/g,Gr=/[#\?]/g,Lu=/[#\?@]/g,Vu=/#/g;function Fn(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function sr(h){h.g||(h.g=new Map,h.h=0,h.i&&Ff(h.i,function(_,w){h.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}n=Fn.prototype,n.add=function(h,_){sr(this),this.i=null,h=ls(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(_),this.h+=1,this};function Ll(h,_){sr(h),_=ls(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Vl(h,_){return sr(h),_=ls(h,_),h.g.has(_)}n.forEach=function(h,_){sr(this),this.g.forEach(function(w,A){w.forEach(function(H){h.call(_,H,A,this)},this)},this)};function ro(h,_){sr(h);let w=[];if(typeof _=="string")Vl(h,_)&&(w=w.concat(h.g.get(ls(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)w=w.concat(h[_]);return w}n.set=function(h,_){return sr(this),this.i=null,h=ls(this,h),Vl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=ro(this,h),h.length>0?String(h[0]):_):_};function zu(h,_,w){Ll(h,_),w.length>0&&(h.i=null,h.g.set(ls(h,_),C(w)),h.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let A=0;A<_.length;A++){var w=_[A];const H=Ki(w);w=ro(this,w);for(let X=0;X<w.length;X++){let de=H;w[X]!==""&&(de+="="+Ki(w[X])),h.push(de)}}return this.i=h.join("&")};function Bu(h){const _=new Fn;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function ls(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function zl(h,_){_&&!h.j&&(sr(h),h.i=null,h.g.forEach(function(w,A){const H=A.toLowerCase();A!=H&&(Ll(this,A),zu(this,H,w))},h)),h.j=_}function Bl(h,_){const w=new zr;if(c.Image){const A=new Image;A.onload=y(pn,w,"TestLoadImage: loaded",!0,_,A),A.onerror=y(pn,w,"TestLoadImage: error",!1,_,A),A.onabort=y(pn,w,"TestLoadImage: abort",!1,_,A),A.ontimeout=y(pn,w,"TestLoadImage: timeout",!1,_,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}function Kr(h,_){const w=new zr,A=new AbortController,H=setTimeout(()=>{A.abort(),pn(w,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:A.signal}).then(X=>{clearTimeout(H),X.ok?pn(w,"TestPingServer: ok",!0,_):pn(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),pn(w,"TestPingServer: error",!1,_)})}function pn(h,_,w,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(w)}catch{}}function qu(){this.g=new zf}function ta(h){this.i=h.Sb||null,this.h=h.ab||!1}b(ta,Pu),ta.prototype.g=function(){return new na(this.i,this.h)};function na(h,_){Pt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(na,Pt),n=na.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,rr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gn(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,rr(this)),this.g&&(this.readyState=3,rr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?gn(this):rr(this),this.readyState==3&&Qr(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,gn(this))},n.Na=function(h){this.g&&(this.response=h,gn(this))},n.ga=function(){this.g&&gn(this)};function gn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,rr(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=_.next();return h.join(`\r
`)};function rr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(na.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Yr(h){let _="";return ue(h,function(w,A){_+=A,_+=":",_+=w,_+=`\r
`}),_}function Hn(h,_,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Yr(w),typeof h=="string"?w!=null&&Ki(w):tt(h,_,w))}function ot(h){Pt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(ot,Pt);var io=/^https?$/i,$u=["POST","PUT"];n=ot.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():er.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(X){sa(this,X);return}if(h=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)w.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const X of A.keys())w.set(X,A.get(X));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(X=>X.toLowerCase()=="content-type"),H=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call($u,_,void 0)>=0)||A||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of w)this.g.setRequestHeader(X,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(X){sa(this,X)}};function sa(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,ra(h),jt(h)}function ra(h){h.A||(h.A=!0,Ft(h,"complete"),Ft(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ft(this,"complete"),Ft(this,"abort"),jt(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ql(this):this.Xa())},n.Xa=function(){ql(this)};function ql(h){if(h.h&&typeof l<"u"){if(h.v&&an(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ft(h,"readystatechange"),an(h)==4){h.h=!1;try{const X=h.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var A;if(A=X===0){let de=String(h.D).match(so)[1]||null;!de&&c.self&&c.self.location&&(de=c.self.location.protocol.slice(0,-1)),A=!io.test(de?de.toLowerCase():"")}w=A}if(w)Ft(h,"complete"),Ft(h,"success");else{h.o=6;try{var H=an(h)>2?h.g.statusText:""}catch{H=""}h.l=H+" ["+h.ca()+"]",ra(h)}}finally{jt(h)}}}}function jt(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,_||Ft(h,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function an(h){return h.g?h.g.readyState:0}n.ca=function(){try{return an(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),mn(_)}};function ia(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function aa(h){const _={};h=(h.g&&an(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(I(h[A]))continue;var w=qf(h[A]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const X=_[H]||[];_[H]=X,X.push(w)}P(_,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oa(h,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||_}function ao(h){this.za=0,this.i=[],this.j=new zr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oa("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oa("baseRetryDelayMs",5e3,h),this.Za=oa("retryDelaySeedMs",1e4,h),this.Ta=oa("forwardChannelMaxRetries",2,h),this.va=oa("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Wi(h&&h.concurrentRequestLimit),this.Ba=new qu,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ao.prototype,n.ka=8,n.I=1,n.connect=function(h,_,w,A){wt(0),this.W=h,this.H=_||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=Yu(this,null,this.W),ua(this)};function la(h){if(ca(h),h.I==3){var _=h.V++,w=gt(h.J);if(tt(w,"SID",h.M),tt(w,"RID",_),tt(w,"TYPE","terminate"),ha(h,w),_=new as(h,h.j,_),_.M=2,_.A=nr(gt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=_.A,w=!0),w||(_.g=co(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Qi(_)}Qu(h)}function ks(h){h.g&&(Fl(h),h.g.cancel(),h.g=null)}function ca(h){ks(h),h.v&&(c.clearTimeout(h.v),h.v=null),lo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ua(h){if(!Xi(h.h)&&!h.m){h.m=!0;var _=h.Ea;le||S(),ae||(le(),ae=!0),M.add(_,h),h.D=0}}function Hf(h,_){return $n(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Vr(p(h.Ea,h,_),Ku(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const H=new as(this,this.j,h);let X=this.o;if(this.U&&(X?(X=J(X),ce(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,_>4096){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=oo(this,H,_),w=gt(this.J),tt(w,"RID",h),tt(w,"CVER",22),this.G&&tt(w,"X-HTTP-Session-Id",this.G),ha(this,w),X&&(this.R?_="headers="+Ki(Yr(X))+"&"+_:this.u&&Hn(w,this.u,X)),to(this.h,H),this.Ra&&tt(w,"TYPE","init"),this.S?(tt(w,"$req",_),tt(w,"SID","null"),H.U=!0,Rs(H,w,null)):Rs(H,w,_),this.I=2}}else this.I==3&&(h?Fu(this,h):this.i.length==0||Xi(this.h)||Fu(this))};function Fu(h,_){var w;_?w=_.l:w=h.V++;const A=gt(h.J);tt(A,"SID",h.M),tt(A,"RID",w),tt(A,"AID",h.K),ha(h,A),h.u&&h.o&&Hn(A,h.u,h.o),w=new as(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),_&&(h.i=_.G.concat(h.i)),_=oo(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),to(h.h,w),Rs(w,A,_)}function ha(h,_){h.H&&ue(h.H,function(w,A){tt(_,A,w)}),h.l&&ue({},function(w,A){tt(_,A,w)})}function oo(h,_,w){w=Math.min(h.i.length,w);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var H=h.i;let Oe=-1;for(;;){const dt=["count="+w];Oe==-1?w>0?(Oe=H[0].g,dt.push("ofs="+Oe)):Oe=0:dt.push("ofs="+Oe);let Je=!0;for(let St=0;St<w;St++){var X=H[St].g;const In=H[St].map;if(X-=Oe,X<0)Oe=Math.max(0,H[St].g-100),Je=!1;else try{X="req"+X+"_"||"";try{var de=In instanceof Map?In:Object.entries(In);for(const[Os,cs]of de){let us=cs;d(cs)&&(us=Bn(cs)),dt.push(X+Os+"="+encodeURIComponent(us))}}catch(Os){throw dt.push(X+"type="+encodeURIComponent("_badmap")),Os}}catch{A&&A(In)}}if(Je){de=dt.join("&");break e}}de=void 0}return h=h.i.splice(0,w),_.G=h,de}function Hu(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;le||S(),ae||(le(),ae=!0),M.add(_,h),h.A=0}}function $l(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Vr(p(h.Da,h),Ku(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Gu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Vr(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),ks(this),Gu(this))};function Fl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Gu(h){h.g=new as(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=gt(h.na);tt(_,"RID","rpc"),tt(_,"SID",h.M),tt(_,"AID",h.K),tt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&tt(_,"TO",h.ia),tt(_,"TYPE","xmlhttp"),ha(h,_),h.u&&h.o&&Hn(_,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=nr(gt(_)),w.u=null,w.R=!0,qr(w,h)}n.Va=function(){this.C!=null&&(this.C=null,ks(this),$l(this),wt(19))};function lo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Hl(h,_){var w=null;if(h.g==_){lo(h),Fl(h),h.g=null;var A=2}else if(Ji(h.h,_))w=_.G,tr(h.h,_),A=1;else return;if(h.I!=0){if(_.o)if(A==1){w=_.u?_.u.length:0,_=Date.now()-_.F;var H=h.D;A=Xa(),Ft(A,new Mu(A,w)),ua(h)}else Hu(h);else if(H=_.m,H==3||H==0&&_.X>0||!(A==1&&Hf(h,_)||A==2&&$l(h)))switch(w&&w.length>0&&(_=h.h,_.i=_.i.concat(w)),H){case 1:ir(h,5);break;case 4:ir(h,10);break;case 3:ir(h,6);break;default:ir(h,2)}}}function Ku(h,_){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*_}function ir(h,_){if(h.j.info("Error code "+_),_==2){var w=p(h.bb,h),A=h.Ua;const H=!A;A=new os(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Fr(A,"https"),nr(A),H?Bl(A.toString(),w):Kr(A.toString(),w)}else wt(2);h.I=0,h.l&&h.l.pa(_),Qu(h),ca(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Qu(h){if(h.I=0,h.ja=[],h.l){const _=no(h.h);(_.length!=0||h.i.length!=0)&&(N(h.ja,_),N(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Yu(h,_,w){var A=w instanceof os?gt(w):new os(w);if(A.g!="")_&&(A.g=_+"."+A.g),Zi(A,A.u);else{var H=c.location;A=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;const X=new os(null);A&&Fr(X,A),_&&(X.g=_),H&&Zi(X,H),w&&(X.h=w),A=X}return w=h.G,_=h.wa,w&&_&&tt(A,w,_),tt(A,"VER",h.ka),ha(h,A),A}function co(h,_,w){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new ot(new ta({ab:w})):new ot(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wu(){}n=Wu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function uo(){}uo.prototype.g=function(h,_){return new yn(h,_)};function yn(h,_){Pt.call(this),this.g=new ao(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!I(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!I(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Wr(this)}b(yn,Pt),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){la(this.g)},yn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Bn(h),h=w);_.i.push(new $f(_.Ya++,h)),_.I==3&&ua(_)},yn.prototype.N=function(){this.g.l=null,delete this.j,la(this.g),delete this.g,yn.Z.N.call(this)};function Gl(h){Mr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const w in _){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}b(Gl,Mr);function Xu(){is.call(this),this.status=1}b(Xu,is);function Wr(h){this.g=h}b(Wr,Wu),Wr.prototype.ra=function(){Ft(this.g,"a")},Wr.prototype.qa=function(h){Ft(this.g,new Gl(h))},Wr.prototype.pa=function(h){Ft(this.g,new Xu)},Wr.prototype.oa=function(){Ft(this.g,"b")},uo.prototype.createWebChannel=uo.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,GS=function(){return new uo},HS=function(){return Xa()},FS=qn,Rg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Et.NO_ERROR=0,Et.TIMEOUT=8,Et.HTTP_ERROR=6,pd=Et,Xt.COMPLETE="complete",$S=Xt,ju.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Bc=ju,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,qS=ot}).apply(typeof td<"u"?td:typeof self<"u"?self:typeof window<"u"?window:{});const bw="@firebase/firestore",ww="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new ff("@firebase/firestore");function Xo(){return Va.logLevel}function ge(n,...e){if(Va.logLevel<=Fe.DEBUG){const t=e.map(by);Va.debug(`Firestore (${Tl}): ${n}`,...t)}}function Ir(n,...e){if(Va.logLevel<=Fe.ERROR){const t=e.map(by);Va.error(`Firestore (${Tl}): ${n}`,...t)}}function ul(n,...e){if(Va.logLevel<=Fe.WARN){const t=e.map(by);Va.warn(`Firestore (${Tl}): ${n}`,...t)}}function by(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,KS(n,r,t)}function KS(n,e,t){let r=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ir(r),new Error(r)}function Xe(n,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,n||KS(e,a,r)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class JO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ZO{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new ki;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ki,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ki)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new QS(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class eD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new eD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const r=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ew(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ew(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=sD(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function He(n,e){return n<e?-1:n>e?1:0}function Cg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const a=n.charAt(r),l=e.charAt(r);if(a!==l)return eg(a)===eg(l)?He(a,l):eg(a)?1:-1}return He(n.length,e.length)}const rD=55296,iD=57343;function eg(n){const e=n.charCodeAt(0);return e>=rD&&e<=iD}function hl(n,e,t){return n.length===e.length&&n.every(((r,a)=>t(r,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="__name__";class Vs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Vs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Vs.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return He(e.length,t.length)}static compareSegments(e,t){const r=Vs.isNumericId(e),a=Vs.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Vs.extractNumericId(e).compare(Vs.extractNumericId(t)):Cg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class ut extends Vs{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const aD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Vs{construct(e,t,r){return new nn(e,t,r)}static isValidIdentifier(e){return aD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tw}static keyField(){return new nn([Tw])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new pe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(r+=d,a++):(l(),a++)}if(l(),c)throw new pe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(ut.fromString(e))}static fromName(e){return new Ee(ut.fromString(e).popFirst(5))}static empty(){return new Ee(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n,e,t){if(!t)throw new pe(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oD(n,e,t,r){if(e===!0&&r===!0)throw new pe(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sw(n){if(!Ee.isDocumentKey(n))throw new pe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function xw(n){if(Ee.isDocumentKey(n))throw new pe(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function yf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function za(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yf(n);throw new pe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function _u(n,e){if(!WS(n))throw new pe(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new pe(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=-62135596800,Rw=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Rw);return new ft(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Aw)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rw}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_u(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Aw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:Dt("string",ft._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new ft(0,0))}static max(){return new ke(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function lD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,a=ke.fromTimestamp(r===1e9?new ft(t+1,0):new ft(t,r));return new Pi(a,Ee.empty(),e)}function cD(n){return new Pi(n.readTime,n.key,iu)}class Pi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Pi(ke.min(),Ee.empty(),iu)}static max(){return new Pi(ke.max(),Ee.empty(),iu)}}function uD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==hD)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,r)=>{t(e)}))}static reject(e){return new ie(((t,r)=>{r(e)}))}static waitFor(e){return new ie(((t,r)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>r(m)))})),c=!0,l===a&&t()}))}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next((a=>a?ie.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new ie(((r,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((y=>{c[p]=y,++d,d===l&&r(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new ie(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function fD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=-1;function _f(n){return n==null}function Ld(n){return n===0&&1/n==-1/0}function mD(n){return typeof n=="number"&&Number.isInteger(n)&&!Ld(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="";function pD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cw(e)),e=gD(n.get(t),e);return Cw(e)}function gD(n,e){let t=e;const r=n.length;for(let a=0;a<r;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case XS:t+="";break;default:t+=l}}return t}function Cw(n){return n+XS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function JS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nd(this.root,e,this.comparator,!0)}}class nd{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??tn.RED,this.left=a??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new tn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return tn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nw(this.data.getIterator())}getIteratorFrom(e){return new Nw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new $t(this.comparator);return t.data=e,t}}class Nw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Un([])}unionWith(e){let t=new $t(nn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ZS("Invalid base64 string: "+l):l}})(e);return new sn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const yD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(n){if(Xe(!!n,39018),typeof n=="string"){let e=0;const t=yD.exec(n);if(Xe(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mi(n){return typeof n=="string"?sn.fromBase64String(n):sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="server_timestamp",tx="__type__",nx="__previous_value__",sx="__local_write_time__";function Ty(n){return(n?.mapValue?.fields||{})[tx]?.stringValue===ex}function bf(n){const e=n.mapValue.fields[nx];return Ty(e)?bf(e):e}function au(n){const e=ji(n.mapValue.fields[sx].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,t,r,a,l,c,d,m,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y}}const Vd="(default)";class ou{constructor(e,t){this.projectId=e,this.database=t||Vd}static empty(){return new ou("","")}get isDefaultDatabase(){return this.database===Vd}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="__type__",_D="__max__",sd={mapValue:{}},ix="__vector__",zd="value";function Ui(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ty(n)?4:wD(n)?9007199254740991:bD(n)?10:11:Ce(28295,{value:n})}function Ws(n,e){if(n===e)return!0;const t=Ui(n);if(t!==Ui(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return au(n).isEqual(au(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ji(a.timestampValue),d=ji(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Mi(a.bytesValue).isEqual(Mi(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Rt(a.geoPointValue.latitude)===Rt(l.geoPointValue.latitude)&&Rt(a.geoPointValue.longitude)===Rt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Rt(a.integerValue)===Rt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Rt(a.doubleValue),d=Rt(l.doubleValue);return c===d?Ld(c)===Ld(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return hl(n.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Iw(c)!==Iw(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ws(c[m],d[m])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function lu(n,e){return(n.values||[]).find((t=>Ws(t,e)))!==void 0}function dl(n,e){if(n===e)return 0;const t=Ui(n),r=Ui(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Rt(l.integerValue||l.doubleValue),m=Rt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return kw(n.timestampValue,e.timestampValue);case 4:return kw(au(n),au(e));case 5:return Cg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Mi(l),m=Mi(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const y=He(d[p],m[p]);if(y!==0)return y}return He(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=He(Rt(l.latitude),Rt(c.latitude));return d!==0?d:He(Rt(l.longitude),Rt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ow(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},m=c.fields||{},p=d[zd]?.arrayValue,y=m[zd]?.arrayValue,b=He(p?.values?.length||0,y?.values?.length||0);return b!==0?b:Ow(p,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===sd.mapValue&&c===sd.mapValue)return 0;if(l===sd.mapValue)return 1;if(c===sd.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let b=0;b<m.length&&b<y.length;++b){const T=Cg(m[b],y[b]);if(T!==0)return T;const C=dl(d[m[b]],p[y[b]]);if(C!==0)return C}return He(m.length,y.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function kw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=ji(n),r=ji(e),a=He(t.seconds,r.seconds);return a!==0?a:He(t.nanos,r.nanos)}function Ow(n,e){const t=n.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=dl(t[a],r[a]);if(l)return l}return He(t.length,r.length)}function fl(n){return Ig(n)}function Ig(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ji(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Mi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Ig(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Ig(t.fields[c])}`;return a+"}"})(n.mapValue):Ce(61005,{value:n})}function gd(n){switch(Ui(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bf(n);return e?16+gd(e):16;case 5:return 2*n.stringValue.length;case 6:return Mi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+gd(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let a=0;return zi(r.fields,((l,c)=>{a+=l.length+gd(c)})),a})(n.mapValue);default:throw Ce(13486,{value:n})}}function Dw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ng(n){return!!n&&"integerValue"in n}function Sy(n){return!!n&&"arrayValue"in n}function Pw(n){return!!n&&"nullValue"in n}function jw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yd(n){return!!n&&"mapValue"in n}function bD(n){return(n?.mapValue?.fields||{})[rx]?.stringValue===ix}function Kc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return zi(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Kc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Kc(n.arrayValue.values[t]);return e}return{...n}}function wD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_D}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(t)}setAll(e){let t=nn.emptyPath(),r={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=d.popLast()}c?r[d.lastSegment()]=Kc(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];yd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){zi(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new An(Kc(this.value))}}function ax(n){const e=[];return zi(n.fields,((t,r)=>{const a=new nn([t]);if(yd(r)){const l=ax(r.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,r,a,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,ke.min(),ke.min(),ke.min(),An.empty(),0)}static newFoundDocument(e,t,r,a){return new dn(e,1,t,ke.min(),r,a,0)}static newNoDocument(e,t){return new dn(e,2,t,ke.min(),ke.min(),An.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,ke.min(),ke.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t){this.position=e,this.inclusive=t}}function Mw(n,e,t){let r=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?r=Ee.comparator(Ee.fromName(c.referenceValue),t.key):r=dl(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ws(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t="asc"){this.field=e,this.dir=t}}function ED(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{}class Ot extends ox{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SD(e,t,r):t==="array-contains"?new RD(e,r):t==="in"?new CD(e,r):t==="not-in"?new ID(e,r):t==="array-contains-any"?new ND(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xD(e,r):new AD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(dl(t,this.value)):t!==null&&Ui(this.value)===Ui(t)&&this.matchesComparison(dl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ws extends ox{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ws(e,t)}matches(e){return lx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lx(n){return n.op==="and"}function cx(n){return TD(n)&&lx(n)}function TD(n){for(const e of n.filters)if(e instanceof ws)return!1;return!0}function kg(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+fl(n.value);if(cx(n))return n.filters.map((e=>kg(e))).join(",");{const e=n.filters.map((t=>kg(t))).join(",");return`${n.op}(${e})`}}function ux(n,e){return n instanceof Ot?(function(r,a){return a instanceof Ot&&r.op===a.op&&r.field.isEqual(a.field)&&Ws(r.value,a.value)})(n,e):n instanceof ws?(function(r,a){return a instanceof ws&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,d)=>l&&ux(c,a.filters[d])),!0):!1})(n,e):void Ce(19439)}function hx(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${fl(t.value)}`})(n):n instanceof ws?(function(t){return t.op.toString()+" {"+t.getFilters().map(hx).join(" ,")+"}"})(n):"Filter"}class SD extends Ot{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class xD extends Ot{constructor(e,t){super(e,"in",t),this.keys=dx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class AD extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=dx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dx(n,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class RD extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sy(t)&&lu(t.arrayValue,this.value)}}class CD extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lu(this.value.arrayValue,t)}}class ID extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lu(this.value.arrayValue,t)}}class ND extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>lu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t=null,r=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Lw(n,e=null,t=[],r=[],a=null,l=null,c=null){return new kD(n,e,t,r,a,l,c)}function xy(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>kg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),_f(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>fl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>fl(r))).join(",")),e.Te=t}return e.Te}function Ay(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ED(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ux(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Uw(n.startAt,e.startAt)&&Uw(n.endAt,e.endAt)}function Og(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t=null,r=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OD(n,e,t,r,a,l,c,d){return new bu(n,e,t,r,a,l,c,d)}function fx(n){return new bu(n)}function Vw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function mx(n){return n.collectionGroup!==null}function Qc(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new $t(nn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new qd(l,r))})),t.has(nn.keyField().canonicalString())||e.Ie.push(new qd(nn.keyField(),r))}return e.Ie}function qs(n){const e=Pe(n);return e.Ee||(e.Ee=DD(e,Qc(n))),e.Ee}function DD(n,e){if(n.limitType==="F")return Lw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new qd(a.field,l)}));const t=n.endAt?new Bd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bd(n.startAt.position,n.startAt.inclusive):null;return Lw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Dg(n,e){const t=n.filters.concat([e]);return new bu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Pg(n,e,t){return new bu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wf(n,e){return Ay(qs(n),qs(e))&&n.limitType===e.limitType}function px(n){return`${xy(qs(n))}|lt:${n.limitType}`}function Jo(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>hx(a))).join(", ")}]`),_f(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>fl(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>fl(a))).join(",")),`Target(${r})`})(qs(n))}; limitType=${n.limitType})`}function Ef(n,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Ee.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,a){for(const l of Qc(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(r,a){return!(r.startAt&&!(function(c,d,m){const p=Mw(c,d,m);return c.inclusive?p<=0:p<0})(r.startAt,Qc(r),a)||r.endAt&&!(function(c,d,m){const p=Mw(c,d,m);return c.inclusive?p>=0:p>0})(r.endAt,Qc(r),a))})(n,e)}function PD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gx(n){return(e,t)=>{let r=!1;for(const a of Qc(n)){const l=jD(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function jD(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?dl(m,p):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return JS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=new vt(Ee.comparator);function Nr(){return MD}const yx=new vt(Ee.comparator);function qc(...n){let e=yx;for(const t of n)e=e.insert(t.key,t);return e}function vx(n){let e=yx;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Pa(){return Yc()}function _x(){return Yc()}function Yc(){return new Ka((n=>n.toString()),((n,e)=>n.isEqual(e)))}const UD=new vt(Ee.comparator),LD=new $t(Ee.comparator);function Ge(...n){let e=LD;for(const t of n)e=e.add(t);return e}const VD=new $t(He);function zD(){return VD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function bx(n){return{integerValue:""+n}}function BD(n,e){return mD(e)?bx(e):Ry(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function qD(n,e,t){return n instanceof $d?(function(a,l){const c={fields:{[tx]:{stringValue:ex},[sx]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ty(l)&&(l=bf(l)),l&&(c.fields[nx]=l),{mapValue:c}})(t,e):n instanceof cu?Ex(n,e):n instanceof uu?Tx(n,e):(function(a,l){const c=wx(a,l),d=zw(c)+zw(a.Ae);return Ng(c)&&Ng(a.Ae)?bx(d):Ry(a.serializer,d)})(n,e)}function $D(n,e,t){return n instanceof cu?Ex(n,e):n instanceof uu?Tx(n,e):t}function wx(n,e){return n instanceof Fd?(function(r){return Ng(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class $d extends Tf{}class cu extends Tf{constructor(e){super(),this.elements=e}}function Ex(n,e){const t=Sx(e);for(const r of n.elements)t.some((a=>Ws(a,r)))||t.push(r);return{arrayValue:{values:t}}}class uu extends Tf{constructor(e){super(),this.elements=e}}function Tx(n,e){let t=Sx(e);for(const r of n.elements)t=t.filter((a=>!Ws(a,r)));return{arrayValue:{values:t}}}class Fd extends Tf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function zw(n){return Rt(n.integerValue||n.doubleValue)}function Sx(n){return Sy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function FD(n,e){return n.field.isEqual(e.field)&&(function(r,a){return r instanceof cu&&a instanceof cu||r instanceof uu&&a instanceof uu?hl(r.elements,a.elements,Ws):r instanceof Fd&&a instanceof Fd?Ws(r.Ae,a.Ae):r instanceof $d&&a instanceof $d})(n.transform,e.transform)}class HD{constructor(e,t){this.version=e,this.transformResults=t}}class _s{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _s}static exists(e){return new _s(void 0,e)}static updateTime(e){return new _s(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Sf{}function xx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cy(n.key,_s.none()):new wu(n.key,n.data,_s.none());{const t=n.data,r=An.empty();let a=new $t(nn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new Bi(n.key,r,new Un(a.toArray()),_s.none())}}function GD(n,e,t){n instanceof wu?(function(a,l,c){const d=a.value.clone(),m=qw(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Bi?(function(a,l,c){if(!vd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=qw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(Ax(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Wc(n,e,t,r){return n instanceof wu?(function(l,c,d,m){if(!vd(l.precondition,c))return d;const p=l.value.clone(),y=$w(l.fieldTransforms,m,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Bi?(function(l,c,d,m){if(!vd(l.precondition,c))return d;const p=$w(l.fieldTransforms,m,c),y=c.data;return y.setAll(Ax(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(l,c,d){return vd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function KD(n,e){let t=null;for(const r of n.fieldTransforms){const a=e.data.field(r.field),l=wx(r.transform,a||null);l!=null&&(t===null&&(t=An.empty()),t.set(r.field,l))}return t||null}function Bw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&hl(r,a,((l,c)=>FD(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wu extends Sf{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Bi extends Sf{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Ax(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function qw(n,e,t){const r=new Map;Xe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);r.set(l.field,$D(c,d,t[a]))}return r}function $w(n,e,t){const r=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);r.set(a.field,qD(l,c,e))}return r}class Cy extends Sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QD extends Sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&GD(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_x();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=xx(c,d);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(ke.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ge())}isEqual(e){return this.batchId===e.batchId&&hl(this.mutations,e.mutations,((t,r)=>Bw(t,r)))&&hl(this.baseMutations,e.baseMutations,((t,r)=>Bw(t,r)))}}class Iy{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let a=(function(){return UD})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new Iy(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Qe;function JD(n){switch(n){case se.OK:return Ce(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function Rx(n){if(n===void 0)return Ir("GRPC error has no .code"),se.UNKNOWN;switch(n){case kt.OK:return se.OK;case kt.CANCELLED:return se.CANCELLED;case kt.UNKNOWN:return se.UNKNOWN;case kt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case kt.INTERNAL:return se.INTERNAL;case kt.UNAVAILABLE:return se.UNAVAILABLE;case kt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case kt.NOT_FOUND:return se.NOT_FOUND;case kt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case kt.ABORTED:return se.ABORTED;case kt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case kt.DATA_LOSS:return se.DATA_LOSS;default:return Ce(39323,{code:n})}}(Qe=kt||(kt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=new Ni([4294967295,4294967295],0);function Fw(n){const e=ZD().encode(n),t=new BS;return t.update(e),new Uint8Array(t.digest())}function Hw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ni([t,r],0),new Ni([a,l],0)]}class Ny{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $c(`Invalid padding: ${t}`);if(r<0)throw new $c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ni.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(Ni.fromNumber(r)));return a.compare(eP)===1&&(a=new Ni([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Fw(e),[r,a]=Hw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ny(l,a,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Fw(e),[r,a]=Hw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Eu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new xf(ke.min(),a,new vt(He),Nr(),Ge())}}class Eu{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Eu(r,t,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class Cx{constructor(e,t){this.targetId=e,this.Ce=t}}class Ix{constructor(e,t,r=sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class Gw{constructor(){this.ve=0,this.Fe=Kw(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),t=Ge(),r=Ge();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Ce(38017,{changeType:l})}})),new Eu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Kw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class tP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nr(),this.Je=rd(),this.He=rd(),this.Ye=new vt(He)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Og(l))if(r===0){const c=new Ee(l.path);this.et(t,c,dn.newNoDocument(c,ke.min()))}else Xe(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Mi(r).toUint8Array()}catch(m){if(m instanceof ZS)return ul("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Ny(c,a,l)}catch(m){return ul(m instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Og(d.target)){const m=new Ee(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,dn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=Ge();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new xf(e,t,this.Ye,this.je,r);return this.je=Nr(),this.Je=rd(),this.He=rd(),this.Ye=new vt(He),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Gw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new $t(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new $t(He),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function rd(){return new vt(Ee.comparator)}function Kw(){return new vt(Ee.comparator)}const nP={asc:"ASCENDING",desc:"DESCENDING"},sP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rP={and:"AND",or:"OR"};class iP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jg(n,e){return n.useProto3Json||_f(e)?e:{value:e}}function Hd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aP(n,e){return Hd(n,e.toTimestamp())}function $s(n){return Xe(!!n,49232),ke.fromTimestamp((function(t){const r=ji(t);return new ft(r.seconds,r.nanos)})(n))}function ky(n,e){return Mg(n,e).canonicalString()}function Mg(n,e){const t=(function(a){return new ut(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kx(n){const e=ut.fromString(n);return Xe(Mx(e),10190,{key:e.toString()}),e}function Ug(n,e){return ky(n.databaseId,e.path)}function tg(n,e){const t=kx(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(Dx(t))}function Ox(n,e){return ky(n.databaseId,e)}function oP(n){const e=kx(n);return e.length===4?ut.emptyPath():Dx(e)}function Lg(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Dx(n){return Xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Qw(n,e,t){return{name:Ug(n,e),fields:t.value.mapValue.fields}}function lP(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(Xe(y===void 0||typeof y=="string",58123),sn.fromBase64String(y||"")):(Xe(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),sn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const y=p.code===void 0?se.UNKNOWN:Rx(p.code);return new pe(y,p.message||"")})(c);t=new Ix(r,a,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=tg(n,r.document.name),l=$s(r.document.updateTime),c=r.document.createTime?$s(r.document.createTime):ke.min(),d=new An({mapValue:{fields:r.document.fields}}),m=dn.newFoundDocument(a,l,c,d),p=r.targetIds||[],y=r.removedTargetIds||[];t=new _d(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=tg(n,r.document),l=r.readTime?$s(r.readTime):ke.min(),c=dn.newNoDocument(a,l),d=r.removedTargetIds||[];t=new _d([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=tg(n,r.document),l=r.removedTargetIds||[];t=new _d([],l,a,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new XD(a,l),d=r.targetId;t=new Cx(d,c)}}return t}function cP(n,e){let t;if(e instanceof wu)t={update:Qw(n,e.key,e.value)};else if(e instanceof Cy)t={delete:Ug(n,e.key)};else if(e instanceof Bi)t={update:Qw(n,e.key,e.data),updateMask:vP(e.fieldMask)};else{if(!(e instanceof QD))return Ce(16599,{Vt:e.type});t={verify:Ug(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof $d)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof cu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof uu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Fd)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ce(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:aP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(n,e.precondition)),t}function uP(n,e){return n&&n.length>0?(Xe(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?$s(a.updateTime):$s(l);return c.isEqual(ke.min())&&(c=$s(l)),new HD(c,a.transformResults||[])})(t,e)))):[]}function hP(n,e){return{documents:[Ox(n,e.path)]}}function dP(n,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ox(n,a);const l=(function(p){if(p.length!==0)return jx(ws.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(T){return{field:Zo(T.field),direction:pP(T.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=jg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function fP(n){let e=oP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Xe(r===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(b){const T=Px(b);return T instanceof ws&&cx(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((T=>(function(N){return new qd(el(N.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let T;return T=typeof b=="object"?b.value:b,_f(T)?null:T})(t.limit));let m=null;t.startAt&&(m=(function(b){const T=!!b.before,C=b.values||[];return new Bd(C,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const T=!b.before,C=b.values||[];return new Bd(C,T)})(t.endAt)),OD(e,a,c,l,d,"F",m,p)}function mP(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Px(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=el(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=el(t.unaryFilter.field);return Ot.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=el(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=el(t.unaryFilter.field);return Ot.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(el(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ws.create(t.compositeFilter.filters.map((r=>Px(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function pP(n){return nP[n]}function gP(n){return sP[n]}function yP(n){return rP[n]}function Zo(n){return{fieldPath:n.canonicalString()}}function el(n){return nn.fromServerFormat(n.fieldPath)}function jx(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(jw(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NAN"}};if(Pw(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jw(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NAN"}};if(Pw(t.value))return{unaryFilter:{field:Zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(t.field),op:gP(t.op),value:t.value}}})(n):n instanceof ws?(function(t){const r=t.getFilters().map((a=>jx(a)));return r.length===1?r[0]:{compositeFilter:{op:yP(t.op),filters:r}}})(n):Ce(54877,{filter:n})}function vP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Mx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t,r,a,l=ke.min(),c=ke.min(),d=sn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.yt=e}}function bP(n){const e=fP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Pg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.Cn=new EP}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Pi.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class EP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new $t(ut.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new $t(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ux=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(Ux,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ml(0)}static cr(){return new ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="LruGarbageCollector",TP=1048576;function Xw([n,e],[t,r]){const a=He(n,t);return a===0?He(e,r):a}class SP{constructor(e){this.Ir=e,this.buffer=new $t(Xw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Xw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(Ww,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xl(t)?ge(Ww,"Ignoring IndexedDB error during garbage collection: ",t):await Sl(t)}await this.Vr(3e5)}))}}class AP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(vf.ce);const r=new SP(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Yw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,d,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,c=Date.now(),this.nthSequenceNumber(e,a)))).next((b=>(r=b,d=Date.now(),this.removeTargets(e,r,t)))).next((b=>(l=b,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),Xo()<=Fe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${b} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:b}))))}}function RP(n,e){return new AP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.changes=new Ka((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Wc(r.mutation,a,Un.empty(),ft.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ge()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ge()){const a=Pa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=qc();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Pa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ge())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,a){let l=Nr();const c=Yc(),d=(function(){return Yc()})();return t.forEach(((m,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Bi)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Wc(y.mutation,p,y.mutation.getFieldMask(),ft.now())):c.set(p.key,Un.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,y)=>c.set(p,y))),t.forEach(((p,y)=>d.set(p,new IP(y,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Yc();let a=new vt(((c,d)=>c-d)),l=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let y=r.get(m)||Un.empty();y=d.applyToLocalView(p,y),r.set(m,y);const b=(a.get(d.batchId)||Ge()).add(m);a=a.insert(d.batchId,b)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,y=m.value,b=_x();y.forEach((T=>{if(!l.has(T)){const C=xx(t.get(T),r.get(T));C!==null&&b.set(T,C),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,b))}return ie.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):mx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):ie.resolve(Pa());let d=iu,m=l;return c.next((p=>ie.forEach(p,((y,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),l.get(y)?ie.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{m=m.insert(y,T)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,Ge()))).next((y=>({batchId:d,changes:vx(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((r=>{let a=qc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=qc();return this.indexManager.getCollectionParents(e,l).next((d=>ie.forEach(d,(m=>{const p=(function(b,T){return new bu(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((y=>{y.forEach(((b,T)=>{c=c.insert(b,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((m,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,dn.newInvalidDocument(y)))}));let d=qc();return c.forEach(((m,p)=>{const y=l.get(m);y!==void 0&&Wc(y.mutation,p,Un.empty(),ft.now()),Ef(t,p)&&(d=d.insert(m,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:$s(a.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:bP(a.bundledQuery),readTime:$s(a.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.overlays=new vt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Pa();return ie.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const a=Pa(),l=t.length+1,c=new Ee(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return ie.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new vt(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=l.get(p.largestBatchId);y===null&&(y=Pa(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=Pa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>d.set(p,y))),!(d.size()>=a)););return ie.resolve(d)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new WD(t,r));let l=this.qr.get(t);l===void 0&&(l=Ge(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.Qr=new $t(Wt.$r),this.Ur=new $t(Wt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Wt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Wt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ee(new ut([])),r=new Wt(t,e),a=new Wt(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new ut([])),r=new Wt(t,e),a=new Wt(t,e+1);let l=Ge();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Wt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Wt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new $t(Wt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new YD(l,t,r,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new Wt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Ey:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wt(t,0),a=new Wt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $t(He);return t.forEach((a=>{const l=new Wt(a,0),c=new Wt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{r=r.add(d.Yr)}))})),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;Ee.isDocumentKey(l)||(l=l.child(""));const c=new Wt(new Ee(l),0);let d=new $t(He);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Yr)),!0)}),c),ie.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Xe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,(a=>{const l=new Wt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Wt(t,0),a=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.ri=e,this.docs=(function(){return new vt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=Nr();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():dn.newInvalidDocument(a))})),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Nr();const c=t.path,d=new Ee(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||uD(cD(y),r)<=0||(a.has(y.key)||Ef(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Ce(9500)}ii(e,t){return ie.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new MP(this)}getSize(e){return ie.resolve(this.size)}}class MP extends CP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.persistence=e,this.si=new Ka((t=>xy(t)),Ay),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new Oy,this.targetCount=0,this.ai=ml.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ml(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),ie.waitFor(l).next((()=>a))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,t){this.ui={},this.overlays={},this.ci=new vf(0),this.li=!1,this.li=!0,this.hi=new DP,this.referenceDelegate=e(this),this.Pi=new UP(this),this.indexManager=new wP,this.remoteDocumentCache=(function(a){return new jP(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new _P(t),this.Ii=new kP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new PP(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const a=new LP(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class LP extends dD{constructor(e){super(),this.currentSequenceNumber=e}}class Dy{constructor(e){this.persistence=e,this.Ri=new Oy,this.Vi=null}static mi(e){return new Dy(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(r=>{const a=Ee.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Gd{constructor(e,t){this.persistence=e,this.pi=new Ka((r=>pD(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=RP(this,t)}static mi(e,t){return new Gd(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?ie.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(r++,l.removeEntry(c,ke.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=gd(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ie.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Ge(),a=Ge();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Py(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return uk()?8:fD(fn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new VP;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(Xo()<=Fe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Xo()<=Fe.DEBUG&&ge("QueryEngine","Query:",Jo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(Xo()<=Fe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qs(t))):ie.resolve())}ys(e,t){if(Vw(t))return ie.resolve(null);let r=qs(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Pg(t,null,"F"),r=qs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ge(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((m=>{const p=this.Ds(t,d);return this.Cs(t,p,c,m.readTime)?this.ys(e,Pg(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,r,a){return Vw(t)||a.isEqual(ke.min())?ie.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?ie.resolve(null):(Xo()<=Fe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Jo(t)),this.vs(e,c,t,lD(a,iu)).next((d=>d)))}))}Ds(e,t){let r=new $t(gx(e));return t.forEach(((a,l)=>{Ef(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return Xo()<=Fe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Jo(t)),this.ps.getDocumentsMatchingQuery(e,t,Pi.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="LocalStore",BP=3e8;class qP{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new vt(He),this.xs=new Ka((l=>xy(l)),Ay),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function $P(n,e,t,r){return new qP(n,e,t,r)}async function Vx(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let m=Ge();for(const p of a){c.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){d.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(r,m).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function FP(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,p,y){const b=p.batch,T=b.keys();let C=ie.resolve();return T.forEach((N=>{C=C.next((()=>y.getEntry(m,N))).next((L=>{const V=p.docVersions.get(N);Xe(V!==null,48541),L.version.compareTo(V)<0&&(b.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),y.addEntry(L)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(m,b)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let m=Ge();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function zx(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function HP(n,e){const t=Pe(n),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((y,b)=>{const T=a.get(b);if(!T)return;d.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,b))));let C=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(sn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):y.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(y.resumeToken,r)),a=a.insert(b,C),(function(L,V,$){return L.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=BP?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(T,C,y)&&d.push(t.Pi.updateTargetData(l,C))}));let m=Nr(),p=Ge();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(GP(l,c,e.documentUpdates).next((y=>{m=y.ks,p=y.qs}))),!r.isEqual(ke.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(y)}return ie.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function GP(n,e,t){let r=Ge(),a=Ge();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=Nr();return t.forEach(((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(ke.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ge(jy,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function KP(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ey),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function QP(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,ie.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new Ri(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Vg(n,e,t){const r=Pe(n),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!xl(c))throw c;ge(jy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function Jw(n,e,t){const r=Pe(n);let a=ke.min(),l=Ge();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,y){const b=Pe(m),T=b.xs.get(y);return T!==void 0?ie.resolve(b.Ms.get(T)):b.Pi.getTargetData(p,y)})(r,c,qs(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:ke.min(),t?l:Ge()))).next((d=>(YP(r,PD(e),d),{documents:d,Qs:l})))))}function YP(n,e,t){let r=n.Os.get(e)||ke.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class Zw{constructor(){this.activeTargetIds=zD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WP{constructor(){this.Mo=new Zw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="ConnectivityMonitor";class tE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(eE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(eE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id=null;function zg(){return id===null?id=(function(){return 268435456+Math.round(2147483648*Math.random())})():id++,"0x"+id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="RestConnection",JP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Vd?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=zg(),d=this.zo(e,t.toUriEncodedString());ge(ng,`Sending RPC '${e}' ${c}:`,d,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:p}=new URL(d),y=wl(p);return this.Jo(e,d,m,r,y).then((b=>(ge(ng,`Received RPC '${e}' ${c}: `,b),b)),(b=>{throw ul(ng,`RPC '${e}' ${c} failed with error: `,b,"url: ",d,"request:",r),b}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=JP[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class tj extends ZP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=zg();return new Promise(((d,m)=>{const p=new qS;p.setWithCredentials(!0),p.listenOnce($S.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case pd.NO_ERROR:const b=p.getResponseJson();ge(cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(b)),d(b);break;case pd.TIMEOUT:ge(cn,`RPC '${e}' ${c} timed out`),m(new pe(se.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const T=p.getStatus();if(ge(cn,`RPC '${e}' ${c} failed with status:`,T,"response text:",p.getResponseText()),T>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const N=C?.error;if(N&&N.status&&N.message){const L=(function($){const Y=$.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(Y)>=0?Y:se.UNKNOWN})(N.status);m(new pe(L,N.message))}else m(new pe(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new pe(se.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ge(cn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);ge(cn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",y,r,15)}))}T_(e,t,r){const a=zg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=GS(),d=HS(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=l.join("");ge(cn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const b=c.createWebChannel(y,m);this.I_(b);let T=!1,C=!1;const N=new ej({Yo:V=>{C?ge(cn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(T||(ge(cn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),T=!0),ge(cn,`RPC '${e}' stream ${a} sending:`,V),b.send(V))},Zo:()=>b.close()}),L=(V,$,Y)=>{V.listen($,(K=>{try{Y(K)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return L(b,Bc.EventType.OPEN,(()=>{C||(ge(cn,`RPC '${e}' stream ${a} transport opened.`),N.o_())})),L(b,Bc.EventType.CLOSE,(()=>{C||(C=!0,ge(cn,`RPC '${e}' stream ${a} transport closed`),N.a_(),this.E_(b))})),L(b,Bc.EventType.ERROR,(V=>{C||(C=!0,ul(cn,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),N.a_(new pe(se.UNAVAILABLE,"The operation could not be completed")))})),L(b,Bc.EventType.MESSAGE,(V=>{if(!C){const $=V.data[0];Xe(!!$,16349);const Y=$,K=Y?.error||Y[0]?.error;if(K){ge(cn,`RPC '${e}' stream ${a} received error:`,K);const ee=K.status;let le=(function(S){const R=kt[S];if(R!==void 0)return Rx(R)})(ee),ae=K.message;le===void 0&&(le=se.INTERNAL,ae="Unknown error status: "+ee+" with message "+K.message),C=!0,N.a_(new pe(le,ae)),b.close()}else ge(cn,`RPC '${e}' stream ${a} received:`,$),N.u_($)}})),L(d,FS.STAT_EVENT,(V=>{V.stat===Rg.PROXY?ge(cn,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===Rg.NOPROXY&&ge(cn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n){return new iP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="PersistentStream";class qx{constructor(e,t,r,a,l,c,d,m){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Bx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new pe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(nE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(nE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nj extends qx{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=lP(this.serializer,e),r=(function(l){if(!("targetChange"in l))return ke.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ke.min():c.readTime?$s(c.readTime):ke.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Lg(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Og(m)?{documents:hP(l,m)}:{query:dP(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Nx(l,c.resumeToken);const p=jg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(ke.min())>0){d.readTime=Hd(l,c.snapshotVersion.toTimestamp());const p=jg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=mP(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Lg(this.serializer),t.removeTarget=e,this.q_(t)}}class sj extends qx{constructor(e,t,r,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=uP(e.writeResults,e.commitTime),r=$s(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Lg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>cP(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{}class ij extends rj{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Mg(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(se.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Mg(t,r),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(se.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ir(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="RemoteStore";class oj{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Qa(this)&&(ge(Ba,"Restarting streams for network reachability change."),await(async function(m){const p=Pe(m);p.Ea.add(4),await Tu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Rf(p)})(this))}))})),this.Ra=new aj(r,a)}}async function Rf(n){if(Qa(n))for(const e of n.da)await e(!0)}async function Tu(n){for(const e of n.da)await e(!1)}function $x(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vy(t)?Ly(t):Al(t).O_()&&Uy(t,e))}function My(n,e){const t=Pe(n),r=Al(t);t.Ia.delete(e),r.O_()&&Fx(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qa(t)&&t.Ra.set("Unknown"))}function Uy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Al(n).Y_(e)}function Fx(n,e){n.Va.Ue(e),Al(n).Z_(e)}function Ly(n){n.Va=new tP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Al(n).start(),n.Ra.ua()}function Vy(n){return Qa(n)&&!Al(n).x_()&&n.Ia.size>0}function Qa(n){return Pe(n).Ea.size===0}function Hx(n){n.Va=void 0}async function lj(n){n.Ra.set("Online")}async function cj(n){n.Ia.forEach(((e,t)=>{Uy(n,e)}))}async function uj(n,e){Hx(n),Vy(n)?(n.Ra.ha(e),Ly(n)):n.Ra.set("Unknown")}async function hj(n,e,t){if(n.Ra.set("Online"),e instanceof Ix&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(r){ge(Ba,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kd(n,r)}else if(e instanceof _d?n.Va.Ze(e):e instanceof Cx?n.Va.st(e):n.Va.tt(e),!t.isEqual(ke.min()))try{const r=await zx(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,p)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(sn.EMPTY_BYTE_STRING,y.snapshotVersion)),Fx(l,m);const b=new Ri(y.target,m,p,y.sequenceNumber);Uy(l,b)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){ge(Ba,"Failed to raise snapshot:",r),await Kd(n,r)}}async function Kd(n,e,t){if(!xl(e))throw e;n.Ea.add(1),await Tu(n),n.Ra.set("Offline"),t||(t=()=>zx(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ge(Ba,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Rf(n)}))}function Gx(n,e){return e().catch((t=>Kd(n,t,e)))}async function Cf(n){const e=Pe(n),t=Li(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ey;for(;dj(e);)try{const a=await KP(e.localStore,r);if(a===null){e.Ta.length===0&&t.L_();break}r=a.batchId,fj(e,a)}catch(a){await Kd(e,a)}Kx(e)&&Qx(e)}function dj(n){return Qa(n)&&n.Ta.length<10}function fj(n,e){n.Ta.push(e);const t=Li(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Kx(n){return Qa(n)&&!Li(n).x_()&&n.Ta.length>0}function Qx(n){Li(n).start()}async function mj(n){Li(n).ra()}async function pj(n){const e=Li(n);for(const t of n.Ta)e.ea(t.mutations)}async function gj(n,e,t){const r=n.Ta.shift(),a=Iy.from(r,e,t);await Gx(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Cf(n)}async function yj(n,e){e&&Li(n).X_&&await(async function(r,a){if((function(c){return JD(c)&&c!==se.ABORTED})(a.code)){const l=r.Ta.shift();Li(r).B_(),await Gx(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Cf(r)}})(n,e),Kx(n)&&Qx(n)}async function sE(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),ge(Ba,"RemoteStore received new credentials");const r=Qa(t);t.Ea.add(3),await Tu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Rf(t)}async function vj(n,e){const t=Pe(n);e?(t.Ea.delete(2),await Rf(t)):e||(t.Ea.add(2),await Tu(t),t.Ra.set("Unknown"))}function Al(n){return n.ma||(n.ma=(function(t,r,a){const l=Pe(t);return l.sa(),new nj(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:lj.bind(null,n),t_:cj.bind(null,n),r_:uj.bind(null,n),H_:hj.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Vy(n)?Ly(n):n.Ra.set("Unknown")):(await n.ma.stop(),Hx(n))}))),n.ma}function Li(n){return n.fa||(n.fa=(function(t,r,a){const l=Pe(t);return l.sa(),new sj(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:mj.bind(null,n),r_:yj.bind(null,n),ta:pj.bind(null,n),na:gj.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Cf(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(Ba,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,d=new zy(e,t,c,a,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function By(n,e){if(Ir("AsyncQueue",`${e}: ${n}`),xl(n))return new pe(se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{static emptySet(e){return new rl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=qc(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.ga=new vt(Ee.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class pl{constructor(e,t,r,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new pl(e,t,rl.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bj{constructor(){this.queries=iE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Pe(t),l=a.queries;a.queries=iE(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(r)}))})(this,new pe(se.ABORTED,"Firestore shutting down"))}}function iE(){return new Ka((n=>px(n)),wf)}async function wj(n,e){const t=Pe(n);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new _j,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=By(c,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&qy(t)}async function Ej(n,e){const t=Pe(n),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Tj(n,e){const t=Pe(n);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(r=!0);c.wa=a}}r&&qy(t)}function Sj(n,e,t){const r=Pe(n),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function qy(n){n.Ca.forEach((e=>{e.next()}))}var Bg,aE;(aE=Bg||(Bg={})).Ma="default",aE.Cache="cache";class xj{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Bg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.key=e}}class Wx{constructor(e){this.key=e}}class Aj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=gx(e),this.tu=new rl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new rE,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,b)=>{const T=a.get(y),C=Ef(this.query,b)?b:null,N=!!T&&this.mutatedKeys.has(T.key),L=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;T&&C?T.data.isEqual(C.data)?N!==L&&(r.track({type:3,doc:C}),V=!0):this.su(T,C)||(r.track({type:2,doc:C}),V=!0,(m&&this.eu(C,m)>0||p&&this.eu(C,p)<0)&&(d=!0)):!T&&C?(r.track({type:0,doc:C}),V=!0):T&&!C&&(r.track({type:1,doc:T}),V=!0,(m||p)&&(d=!0)),V&&(C?(c=c.add(C),l=L?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{tu:c,iu:r,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,b)=>(function(C,N){const L=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:V})}};return L(C)-L(N)})(y.type,b.type)||this.eu(y.doc,b.doc))),this.ou(r),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,c.length!==0||p?{snapshot:new pl(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new Wx(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new Yx(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ge();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const $y="SyncEngine";class Rj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Cj{constructor(e){this.key=e,this.hu=!1}}class Ij{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ka((d=>px(d)),wf),this.Iu=new Map,this.Eu=new Set,this.du=new vt(Ee.comparator),this.Au=new Map,this.Ru=new Oy,this.Vu={},this.mu=new Map,this.fu=ml.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Nj(n,e,t=!0){const r=nA(n);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await Xx(r,e,t,!0),a}async function kj(n,e){const t=nA(n);await Xx(t,e,!0,!1)}async function Xx(n,e,t,r){const a=await QP(n.localStore,qs(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await Oj(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&$x(n.remoteStore,a),d}async function Oj(n,e,t,r,a){n.pu=(b,T,C)=>(async function(L,V,$,Y){let K=V.view.ru($);K.Cs&&(K=await Jw(L.localStore,V.query,!1).then((({documents:M})=>V.view.ru(M,K))));const ee=Y&&Y.targetChanges.get(V.targetId),le=Y&&Y.targetMismatches.get(V.targetId)!=null,ae=V.view.applyChanges(K,L.isPrimaryClient,ee,le);return lE(L,V.targetId,ae.au),ae.snapshot})(n,b,T,C);const l=await Jw(n.localStore,e,!0),c=new Aj(e,l.Qs),d=c.ru(l.documents),m=Eu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",a),p=c.applyChanges(d,n.isPrimaryClient,m);lE(n,t,p.au);const y=new Rj(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function Dj(n,e,t){const r=Pe(n),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!wf(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Vg(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&My(r.remoteStore,a.targetId),qg(r,a.targetId)})).catch(Sl)):(qg(r,a.targetId),await Vg(r.localStore,a.targetId,!0))}async function Pj(n,e){const t=Pe(n),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),My(t.remoteStore,r.targetId))}async function jj(n,e,t){const r=qj(n);try{const a=await(function(c,d){const m=Pe(c),p=ft.now(),y=d.reduce(((C,N)=>C.add(N.key)),Ge());let b,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let N=Nr(),L=Ge();return m.Ns.getEntries(C,y).next((V=>{N=V,N.forEach((($,Y)=>{Y.isValidDocument()||(L=L.add($))}))})).next((()=>m.localDocuments.getOverlayedDocuments(C,N))).next((V=>{b=V;const $=[];for(const Y of d){const K=KD(Y,b.get(Y.key).overlayedDocument);K!=null&&$.push(new Bi(Y.key,K,ax(K.value.mapValue),_s.exists(!0)))}return m.mutationQueue.addMutationBatch(C,p,$,d)})).next((V=>{T=V;const $=V.applyToLocalDocumentSet(b,L);return m.documentOverlayCache.saveOverlays(C,V.batchId,$)}))})).then((()=>({batchId:T.batchId,changes:vx(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let p=c.Vu[c.currentUser.toKey()];p||(p=new vt(He)),p=p.insert(d,m),c.Vu[c.currentUser.toKey()]=p})(r,a.batchId,t),await Su(r,a.changes),await Cf(r.remoteStore)}catch(a){const l=By(a,"Failed to persist write");t.reject(l)}}async function Jx(n,e){const t=Pe(n);try{const r=await HP(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Xe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Xe(c.hu,14607):a.removedDocuments.size>0&&(Xe(c.hu,42227),c.hu=!1))})),await Su(t,r,e)}catch(r){await Sl(r)}}function oE(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=Pe(c);m.onlineState=d;let p=!1;m.queries.forEach(((y,b)=>{for(const T of b.Sa)T.va(d)&&(p=!0)})),p&&qy(m)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Mj(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new vt(Ee.comparator);c=c.insert(l,dn.newNoDocument(l,ke.min()));const d=Ge().add(l),m=new xf(ke.min(),new Map,new vt(He),c,d);await Jx(r,m),r.du=r.du.remove(l),r.Au.delete(e),Fy(r)}else await Vg(r.localStore,e,!1).then((()=>qg(r,e,t))).catch(Sl)}async function Uj(n,e){const t=Pe(n),r=e.batch.batchId;try{const a=await FP(t.localStore,e);eA(t,r,null),Zx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Su(t,a)}catch(a){await Sl(a)}}async function Lj(n,e,t){const r=Pe(n);try{const a=await(function(c,d){const m=Pe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,d).next((b=>(Xe(b!==null,37113),y=b.keys(),m.mutationQueue.removeMutationBatch(p,b)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);eA(r,e,t),Zx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Su(r,a)}catch(a){await Sl(a)}}function Zx(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function eA(n,e,t){const r=Pe(n);let a=r.Vu[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Vu[r.currentUser.toKey()]=a}}function qg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||tA(n,r)}))}function tA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(My(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Fy(n))}function lE(n,e,t){for(const r of t)r instanceof Yx?(n.Ru.addReference(r.key,e),Vj(n,r)):r instanceof Wx?(ge($y,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||tA(n,r.key)):Ce(19791,{wu:r})}function Vj(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ge($y,"New document in limbo: "+t),n.Eu.add(r),Fy(n))}function Fy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(ut.fromString(e)),r=n.fu.next();n.Au.set(r,new Cj(t)),n.du=n.du.insert(t,r),$x(n.remoteStore,new Ri(qs(fx(t.path)),r,"TargetPurposeLimboResolution",vf.ce))}}async function Su(n,e,t){const r=Pe(n),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,m)=>{c.push(r.pu(m,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const y=p?!p.fromCache:t?.targetChanges.get(m.targetId)?.current;r.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(p){a.push(p);const y=Py.As(m.targetId,p);l.push(y)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(m,p){const y=Pe(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ie.forEach(p,(T=>ie.forEach(T.Es,(C=>y.persistence.referenceDelegate.addReference(b,T.targetId,C))).next((()=>ie.forEach(T.ds,(C=>y.persistence.referenceDelegate.removeReference(b,T.targetId,C)))))))))}catch(b){if(!xl(b))throw b;ge(jy,"Failed to update sequence numbers: "+b)}for(const b of p){const T=b.targetId;if(!b.fromCache){const C=y.Ms.get(T),N=C.snapshotVersion,L=C.withLastLimboFreeSnapshotVersion(N);y.Ms=y.Ms.insert(T,L)}}})(r.localStore,l))}async function zj(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){ge($y,"User change. New user:",e.toKey());const r=await Vx(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new pe(se.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Su(t,r.Ls)}}function Bj(n,e){const t=Pe(n),r=t.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let a=Ge();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function nA(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mj.bind(null,e),e.Pu.H_=Tj.bind(null,e.eventManager),e.Pu.yu=Sj.bind(null,e.eventManager),e}function qj(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Uj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lj.bind(null,e),e}class Qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $P(this.persistence,new zP,e.initialUser,this.serializer)}Cu(e){return new Lx(Dy.mi,this.serializer)}Du(e){return new WP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qd.provider={build:()=>new Qd};class $j extends Qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Xe(this.persistence.referenceDelegate instanceof Gd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new xP(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new Lx((r=>Gd.mi(r,t)),this.serializer)}}class $g{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zj.bind(null,this.syncEngine),await vj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bj})()}createDatastore(e){const t=Af(e.databaseInfo.databaseId),r=(function(l){return new tj(l)})(e.databaseInfo);return(function(l,c,d,m){return new ij(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,d){return new oj(r,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>oE(this.syncEngine,t,0)),(function(){return tE.v()?new tE:new XP})())}createSyncEngine(e,t){return(function(a,l,c,d,m,p,y){const b=new Ij(a,l,c,d,m,p);return y&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Pe(t);ge(Ba,"RemoteStore shutting down."),r.Ea.add(5),await Tu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$g.provider={build:()=>new $g};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class Hj{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=un.UNAUTHENTICATED,this.clientId=wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{ge(Vi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(ge(Vi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=By(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function rg(n,e){n.asyncQueue.verifyOperationInProgress(),ge(Vi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async a=>{r.isEqual(a)||(await Vx(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function cE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Gj(n);ge(Vi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>sE(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,a)=>sE(e.remoteStore,a))),n._onlineComponents=e}async function Gj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(Vi,"Using user provided OfflineComponentProvider");try{await rg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;ul("Error using user provided cache. Falling back to memory cache: "+t),await rg(n,new Qd)}}else ge(Vi,"Using default OfflineComponentProvider"),await rg(n,new $j(void 0));return n._offlineComponents}async function sA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(Vi,"Using user provided OnlineComponentProvider"),await cE(n,n._uninitializedComponentsProvider._online)):(ge(Vi,"Using default OnlineComponentProvider"),await cE(n,new $g))),n._onlineComponents}function Kj(n){return sA(n).then((e=>e.syncEngine))}async function Qj(n){const e=await sA(n),t=e.eventManager;return t.onListen=Nj.bind(null,e.syncEngine),t.onUnlisten=Dj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Pj.bind(null,e.syncEngine),t}function Yj(n,e,t={}){const r=new ki;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,p){const y=new Fj({next:T=>{y.Nu(),c.enqueueAndForget((()=>Ej(l,b))),T.fromCache&&m.source==="server"?p.reject(new pe(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),b=new xj(d,y,{includeMetadataChanges:!0,qa:!0});return wj(l,b)})(await Qj(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="firestore.googleapis.com",hE=!0;class dE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iA,this.ssl=hE}else this.host=e.host,this.ssl=e.ssl??hE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ux;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TP)throw new pe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class If{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new XO;switch(r.type){case"firstParty":return new tD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=uE.get(t);r&&(ge("ComponentProvider","Removing Datastore"),uE.delete(t),r.terminate())})(this),Promise.resolve()}}function Wj(n,e,t,r={}){n=za(n,If);const a=wl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(cS(`https://${d}`),uS("Firestore",!0)),l.host!==iA&&l.host!==d&&ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:r};if(!Di(m,c)&&(n._setSettings(m),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=un.MOCK_USER;else{p=nk(r.mockUserToken,n._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new pe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new un(b)}n._authCredentials=new JO(new QS(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rl(this.firestore,e,this._query)}}class Bt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(_u(t,Bt._jsonSchema))return new Bt(e,r||null,new Ee(ut.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Dt("string",Bt._jsonSchemaVersion),referencePath:Dt("string")};class Oi extends Rl{constructor(e,t,r){super(e,t,fx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Ee(e))}withConverter(e){return new Oi(this.firestore,e,this._path)}}function hu(n,e,...t){if(n=Ct(n),YS("collection","path",e),n instanceof If){const r=ut.fromString(e,...t);return xw(r),new Oi(n,null,r)}{if(!(n instanceof Bt||n instanceof Oi))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return xw(r),new Oi(n.firestore,null,r)}}function gl(n,e,...t){if(n=Ct(n),arguments.length===1&&(e=wy.newId()),YS("doc","path",e),n instanceof If){const r=ut.fromString(e,...t);return Sw(r),new Bt(n,null,new Ee(r))}{if(!(n instanceof Bt||n instanceof Oi))throw new pe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return Sw(r),new Bt(n.firestore,n instanceof Oi?n.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="AsyncQueue";class mE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Bx(this,"async_queue_retry"),this._c=()=>{const r=sg();r&&ge(fE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=sg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=sg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ki;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xl(e))throw e;ge(fE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ir("INTERNAL UNHANDLED ERROR: ",pE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=zy.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ce(47125,{Pc:pE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function pE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class xu extends If{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new mE,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mE(e),this._firestoreClient=void 0,await e}}}function Xj(n,e){const t=typeof n=="object"?n:my(),r=typeof n=="string"?n:Vd,a=Ga(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=ek("firestore");l&&Wj(a,...l)}return a}function aA(n){if(n._terminated)throw new pe(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Jj(n),n._firestoreClient}function Jj(n){const e=n._freezeSettings(),t=(function(a,l,c,d){return new vD(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,rA(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Hj(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es(sn.fromBase64String(e))}catch(t){throw new pe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new es(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:es._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_u(e,es._jsonSchema))return es.fromBase64String(e.bytes)}}es._jsonSchemaVersion="firestore/bytes/1.0",es._jsonSchema={type:Dt("string",es._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fs._jsonSchemaVersion}}static fromJSON(e){if(_u(e,Fs._jsonSchema))return new Fs(e.latitude,e.longitude)}}Fs._jsonSchemaVersion="firestore/geoPoint/1.0",Fs._jsonSchema={type:Dt("string",Fs._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_u(e,Hs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Hs(e.vectorValues);throw new pe(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hs._jsonSchemaVersion="firestore/vectorValue/1.0",Hs._jsonSchema={type:Dt("string",Hs._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=/^__.*__$/;class e4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new wu(e,this.data,t,this.fieldTransforms)}}class oA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class Gy{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lA(this.Ac)&&Zj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Af(e)}Cc(e,t,r,a=!1){return new Gy({Ac:e,methodName:t,Dc:r,path:nn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ky(n){const e=n._freezeSettings(),t=Af(n._databaseId);return new t4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function n4(n,e,t,r,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);Qy("Data must be an object, but it was:",c,r);const d=cA(r,c);let m,p;if(l.merge)m=new Un(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const b of l.mergeFields){const T=Fg(e,b,t);if(!c.contains(T))throw new pe(se.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);hA(y,T)||y.push(T)}m=new Un(y),p=c.fieldTransforms.filter((b=>m.covers(b.field)))}else m=null,p=c.fieldTransforms;return new e4(new An(d),m,p)}class kf extends Hy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kf}}function s4(n,e,t,r){const a=n.Cc(1,e,t);Qy("Data must be an object, but it was:",a,r);const l=[],c=An.empty();zi(r,((m,p)=>{const y=Yy(e,m,t);p=Ct(p);const b=a.yc(y);if(p instanceof kf)l.push(y);else{const T=Au(p,b);T!=null&&(l.push(y),c.set(y,T))}}));const d=new Un(l);return new oA(c,d,a.fieldTransforms)}function r4(n,e,t,r,a,l){const c=n.Cc(1,e,t),d=[Fg(e,r,t)],m=[a];if(l.length%2!=0)throw new pe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(Fg(e,l[T])),m.push(l[T+1]);const p=[],y=An.empty();for(let T=d.length-1;T>=0;--T)if(!hA(p,d[T])){const C=d[T];let N=m[T];N=Ct(N);const L=c.yc(C);if(N instanceof kf)p.push(C);else{const V=Au(N,L);V!=null&&(p.push(C),y.set(C,V))}}const b=new Un(p);return new oA(y,b,c.fieldTransforms)}function i4(n,e,t,r=!1){return Au(t,n.Cc(r?4:3,e))}function Au(n,e){if(uA(n=Ct(n)))return Qy("Unsupported field value:",e,n),cA(n,e);if(n instanceof Hy)return(function(r,a){if(!lA(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const d of r){let m=Au(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,a){if((r=Ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BD(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=ft.fromDate(r);return{timestampValue:Hd(a.serializer,l)}}if(r instanceof ft){const l=new ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hd(a.serializer,l)}}if(r instanceof Fs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof es)return{bytesValue:Nx(a.serializer,r._byteString)};if(r instanceof Bt){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ky(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Hs)return(function(c,d){return{mapValue:{fields:{[rx]:{stringValue:ix},[zd]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return Ry(d.serializer,p)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${yf(r)}`)})(n,e)}function cA(n,e){const t={};return JS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(n,((r,a)=>{const l=Au(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function uA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Fs||n instanceof es||n instanceof Bt||n instanceof Hy||n instanceof Hs)}function Qy(n,e,t){if(!uA(t)||!WS(t)){const r=yf(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Fg(n,e,t){if((e=Ct(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return Yy(n,e);throw Yd("Field path arguments must be of type string or ",n,!1,void 0,t)}const a4=new RegExp("[~\\*/\\[\\]]");function Yy(n,e,t){if(e.search(a4)>=0)throw Yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nf(...e.split("."))._internalPath}catch{throw Yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yd(n,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new pe(se.INVALID_ARGUMENT,d+n+m)}function hA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class o4 extends dA{data(){return super.data()}}function Wy(n,e){return typeof e=="string"?Yy(n,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}class c4 extends Xy{}function fA(n,e,...t){let r=[];e instanceof Xy&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((m=>m instanceof Jy)).length,d=l.filter((m=>m instanceof Of)).length;if(c>1||c>0&&d>0)throw new pe(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)n=a._apply(n);return n}class Of extends c4{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Of(e,t,r)}_apply(e){const t=this._parse(e);return pA(e._query,t),new Rl(e.firestore,e.converter,Dg(e._query,t))}_parse(e){const t=Ky(e.firestore);return(function(l,c,d,m,p,y,b){let T;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new pe(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){yE(b,y);const N=[];for(const L of b)N.push(gE(m,l,L));T={arrayValue:{values:N}}}else T=gE(m,l,b)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||yE(b,y),T=i4(d,c,b,y==="in"||y==="not-in");return Ot.create(p,y,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mA(n,e,t){const r=e,a=Wy("where",n);return Of._create(a,r,t)}class Jy extends Xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ws.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)pA(c,m),c=Dg(c,m)})(e._query,t),new Rl(e.firestore,e.converter,Dg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function gE(n,e,t){if(typeof(t=Ct(t))=="string"){if(t==="")throw new pe(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mx(e)&&t.indexOf("/")!==-1)throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ut.fromString(t));if(!Ee.isDocumentKey(r))throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Dw(n,new Ee(r))}if(t instanceof Bt)return Dw(n,t._key);throw new pe(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yf(t)}.`)}function yE(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function pA(n,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class u4{convertValue(e,t="none"){switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zi(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[zd].arrayValue?.values?.map((r=>Rt(r.doubleValue)));return new Hs(t)}convertGeoPoint(e){return new Fs(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const t=ji(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);Xe(Mx(r),9688,{name:e});const a=new ou(r.get(1),r.get(3)),l=new Ee(r.popFirst(5));return a.isEqual(t)||Ir(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class ad{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class il extends dA{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Wy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=il._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}il._jsonSchemaVersion="firestore/documentSnapshot/1.0",il._jsonSchema={type:Dt("string",il._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class bd extends il{data(e={}){return super.data(e)}}class al{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ad(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new bd(this._firestore,this._userDataWriter,r.key,r,new ad(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new bd(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ad(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new bd(a._firestore,a._userDataWriter,d.doc.key,d.doc,new ad(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:d4(d.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=al._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function d4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}al._jsonSchemaVersion="firestore/querySnapshot/1.0",al._jsonSchema={type:Dt("string",al._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class f4 extends u4{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function Zy(n){n=za(n,Rl);const e=za(n.firestore,xu),t=aA(e),r=new f4(e);return l4(n._query),Yj(t,n._query).then((a=>new al(e,r,n,a)))}function ev(n,e,t,...r){n=za(n,Bt);const a=za(n.firestore,xu),l=Ky(a);let c;return c=typeof(e=Ct(e))=="string"||e instanceof Nf?r4(l,"updateDoc",n._key,e,t,r):s4(l,"updateDoc",n._key,e),tv(a,[c.toMutation(n._key,_s.exists(!0))])}function gA(n){return tv(za(n.firestore,xu),[new Cy(n._key,_s.none())])}function yA(n,e){const t=za(n.firestore,xu),r=gl(n),a=h4(n.converter,e);return tv(t,[n4(Ky(n.firestore),"addDoc",r._key,a,n.converter!==null,{}).toMutation(r._key,_s.exists(!1))]).then((()=>r))}function tv(n,e){return(function(r,a){const l=new ki;return r.asyncQueue.enqueueAndForget((async()=>jj(await Kj(r),a,l))),l.promise})(aA(n),e)}(function(e,t=!0){(function(a){Tl=a})(El),Ys(new bs("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new xu(new ZO(r.getProvider("auth-internal")),new nD(c,r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(p.options.projectId,y)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ss(bw,ww,e),ss(bw,ww,"esm2020")})();function vA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const m4=vA,_A=new Ha("auth","Firebase",vA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=new ff("@firebase/auth");function p4(n,...e){Wd.logLevel<=Fe.WARN&&Wd.warn(`Auth (${El}): ${n}`,...e)}function wd(n,...e){Wd.logLevel<=Fe.ERROR&&Wd.error(`Auth (${El}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(n,...e){throw nv(n,...e)}function Gs(n,...e){return nv(n,...e)}function bA(n,e,t){const r={...m4(),[e]:t};return new Ha("auth","Firebase",r).create(e,{appName:n.name})}function Ar(n){return bA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _A.create(n,...e)}function Re(n,e,...t){if(!n)throw nv(e,...t)}function Tr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wd(e),new Error(e)}function kr(n,e){n||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(){return typeof self<"u"&&self.location?.href||""}function g4(){return vE()==="http:"||vE()==="https:"}function vE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g4()||hS()||"connection"in navigator)?navigator.onLine:!0}function v4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,kr(t>e,"Short delay should be less than long delay!"),this.isMobile=ik()||lk()}get(){return y4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(n,e){kr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],w4=new Ru(3e4,6e4);function Dr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Pr(n,e,t,r,a={}){return EA(n,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=vu({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return ok()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&wl(n.emulatorConfig.host)&&(p.credentials="include"),wA.fetch()(await TA(n,n.config.apiHost,t,d),p)})}async function EA(n,e,t){n._canInitEmulator=!1;const r={..._4,...e};try{const a=new T4(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw od(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw od(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw od(n,"user-disabled",c);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw bA(n,y,p);Es(n,y)}}catch(a){if(a instanceof Ts)throw a;Es(n,"network-request-failed",{message:String(a)})}}async function Cu(n,e,t,r,a={}){const l=await Pr(n,e,t,r,a);return"mfaPendingCredential"in l&&Es(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function TA(n,e,t,r){const a=`${e}${t}?${r}`,l=n,c=l.config.emulator?sv(n.config,a):`${n.config.apiScheme}://${a}`;return b4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function E4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class T4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Gs(this.auth,"network-request-failed")),w4.get())})}}function od(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Gs(n,e,r);return a.customData._tokenResponse=t,a}function _E(n){return n!==void 0&&n.enterprise!==void 0}class S4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return E4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function x4(n,e){return Pr(n,"GET","/v2/recaptchaConfig",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(n,e){return Pr(n,"POST","/v1/accounts:delete",e)}async function Xd(n,e){return Pr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function R4(n,e=!1){const t=Ct(n),r=await t.getIdToken(e),a=rv(r);Re(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Xc(ig(a.auth_time)),issuedAtTime:Xc(ig(a.iat)),expirationTime:Xc(ig(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function ig(n){return Number(n)*1e3}function rv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const a=iS(t);return a?JSON.parse(a):(wd("Failed to decode base64 JWT payload"),null)}catch(a){return wd("Caught error parsing JWT payload as JSON",a?.toString()),null}}function bE(n){const e=rv(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ts&&C4(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function C4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(n){const e=n.auth,t=await n.getIdToken(),r=await du(n,Xd(e,{idToken:t}));Re(r?.users.length,e,"internal-error");const a=r.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?SA(a.providerUserInfo):[],c=k4(n.providerData,l),d=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!c?.length,p=d?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Gg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function N4(n){const e=Ct(n);await Jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function k4(n,e){return[...n.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function SA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(n,e){const t=await EA(n,{},async()=>{const r=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await TA(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:r};return n.emulatorConfig&&wl(n.emulatorConfig.host)&&(m.credentials="include"),wA.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function D4(n,e){return Pr(n,"POST","/v2/accounts:revokeToken",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=bE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await O4(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new ol;return r&&(Re(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Re(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Re(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ol,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vs{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new I4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Gg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await du(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return R4(this,e)}reload(){return N4(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Jd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Ar(this.auth));const e=await this.getIdToken();return await du(this,A4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:b,emailVerified:T,isAnonymous:C,providerData:N,stsTokenManager:L}=t;Re(b&&L,e,"internal-error");const V=ol.fromJSON(this.name,L);Re(typeof b=="string",e,"internal-error"),_i(r,e.name),_i(a,e.name),Re(typeof T=="boolean",e,"internal-error"),Re(typeof C=="boolean",e,"internal-error"),_i(l,e.name),_i(c,e.name),_i(d,e.name),_i(m,e.name),_i(p,e.name),_i(y,e.name);const $=new vs({uid:b,auth:e,email:a,emailVerified:T,displayName:r,isAnonymous:C,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:V,createdAt:p,lastLoginAt:y});return N&&Array.isArray(N)&&($.providerData=N.map(Y=>({...Y}))),m&&($._redirectEventId=m),$}static async _fromIdTokenResponse(e,t,r=!1){const a=new ol;a.updateFromServerResponse(t);const l=new vs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Jd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?SA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new ol;d.updateFromIdToken(r);const m=new vs({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Gg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new Map;function Sr(n){kr(n instanceof Function,"Expected a class definition");let e=wE.get(n);return e?(kr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xA.type="NONE";const EE=xA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e,t){return`firebase:${n}:${e}:${t}`}class ll{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Ed(this.userKey,a.apiKey,l),this.fullPersistenceKey=Ed("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xd(this.auth,{idToken:e}).catch(()=>{});return t?vs._fromGetAccountInfoResponse(this.auth,t,e):null}return vs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ll(Sr(EE),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Sr(EE);const c=Ed(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const y=await p._get(c);if(y){let b;if(typeof y=="string"){const T=await Xd(e,{idToken:y}).catch(()=>{});if(!T)break;b=await vs._fromGetAccountInfoResponse(e,T,y)}else b=vs._fromJSON(e,y);p!==l&&(d=b),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new ll(l,e,r):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new ll(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kA(e))return"Blackberry";if(OA(e))return"Webos";if(RA(e))return"Safari";if((e.includes("chrome/")||CA(e))&&!e.includes("edge/"))return"Chrome";if(NA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function AA(n=fn()){return/firefox\//i.test(n)}function RA(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CA(n=fn()){return/crios\//i.test(n)}function IA(n=fn()){return/iemobile/i.test(n)}function NA(n=fn()){return/android/i.test(n)}function kA(n=fn()){return/blackberry/i.test(n)}function OA(n=fn()){return/webos/i.test(n)}function iv(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function P4(n=fn()){return iv(n)&&!!window.navigator?.standalone}function j4(){return ck()&&document.documentMode===10}function DA(n=fn()){return iv(n)||NA(n)||OA(n)||kA(n)||/windows phone/i.test(n)||IA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n,e=[]){let t;switch(n){case"Browser":t=TE(fn());break;case"Worker":t=`${TE(fn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${El}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U4(n,e={}){return Pr(n,"GET","/v2/passwordPolicy",Dr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=6;class V4{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??L4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SE(this),this.idTokenSubscription=new SE(this),this.beforeStateQueue=new M4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_A,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Sr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ll.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xd(this,{idToken:e}),r=await vs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(r=d.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=v4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Ar(this));const t=e?Ct(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await U4(this),t=new V4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ha("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await D4(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Sr(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await ll.create(this,[Sr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&p4(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qi(n){return Ct(n)}class SE{constructor(e){this.auth=e,this.observer=null,this.addObserver=gk(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B4(n){Df=n}function jA(n){return Df.loadJS(n)}function q4(){return Df.recaptchaEnterpriseScript}function $4(){return Df.gapiScript}function F4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class H4{constructor(){this.enterprise=new G4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class G4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const K4="recaptcha-enterprise",MA="NO_RECAPTCHA";class Q4{constructor(e){this.type=K4,this.auth=qi(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{x4(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new S4(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;_E(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(MA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new H4().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(d=>{if(!t&&_E(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=q4();m.length!==0&&(m+=d),jA(m).then(()=>{a(d,l,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function xE(n,e,t,r=!1,a=!1){const l=new Q4(n);let c;if(a)c=MA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Zd(n,e,t,r,a){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await xE(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await xE(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(n,e){const t=Ga(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Di(l,e??{}))return a;Es(a,"already-initialized")}return t.initialize({options:e})}function W4(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Sr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function X4(n,e,t){const r=qi(n);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=UA(e),{host:c,port:d}=J4(e),m=d===null?"":`:${d}`,p={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Di(p,r.config.emulator)&&Di(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,wl(c)?(cS(`${l}//${c}${m}`),uS("Auth",!0)):Z4()}function UA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function J4(n){const e=UA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:AE(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:AE(c)}}}function AE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Z4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,t){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function eM(n,e){return Pr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(n,e){return Cu(n,"POST","/v1/accounts:signInWithPassword",Dr(n,e))}async function LA(n,e){return Pr(n,"POST","/v1/accounts:sendOobCode",Dr(n,e))}async function nM(n,e){return LA(n,e)}async function sM(n,e){return LA(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(n,e){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",Dr(n,e))}async function iM(n,e){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends av{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new fu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new fu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zd(e,t,"signInWithPassword",tM);case"emailLink":return rM(e,{email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zd(e,r,"signUpPassword",eM);case"emailLink":return iM(e,{idToken:t,email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(n,e){return Cu(n,"POST","/v1/accounts:signInWithIdp",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="http://localhost";class qa extends av{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Es("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new qa(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return cl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,cl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cl(e,t)}buildRequest(){const e={requestUri:aM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lM(n){const e=Vc(zc(n)).link,t=e?Vc(zc(e)).deep_link_id:null,r=Vc(zc(n)).deep_link_id;return(r?Vc(zc(r)).link:null)||r||t||e||n}class ov{constructor(e){const t=Vc(zc(e)),r=t.apiKey??null,a=t.oobCode??null,l=oM(t.mode??null);Re(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=lM(e);try{return new ov(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(){this.providerId=Cl.PROVIDER_ID}static credential(e,t){return fu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ov.parseLink(t);return Re(r,"argument-error"),fu._fromEmailAndCode(e,r.code,r.tenantId)}}Cl.PROVIDER_ID="password";Cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends VA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends Iu{constructor(){super("facebook.com")}static credential(e){return qa._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qa._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ti.credential(t,r)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Iu{constructor(){super("github.com")}static credential(e){return qa._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.GITHUB_SIGN_IN_METHOD="github.com";Si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Iu{constructor(){super("twitter.com")}static credential(e,t){return qa._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return xi.credential(t,r)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(n,e){return Cu(n,"POST","/v1/accounts:signUp",Dr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await vs._fromIdTokenResponse(e,r,a),c=RE(r);return new $a({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=RE(r);return new $a({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function RE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Ts{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,ef.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new ef(e,t,r,a)}}function zA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ef._fromErrorAndOperation(n,l,e,r):l})}async function uM(n,e,t=!1){const r=await du(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return $a._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(n,e,t=!1){const{auth:r}=n;if(Zn(r.app))return Promise.reject(Ar(r));const a="reauthenticate";try{const l=await du(n,zA(r,a,e,n),t);Re(l.idToken,r,"internal-error");const c=rv(l.idToken);Re(c,r,"internal-error");const{sub:d}=c;return Re(n.uid===d,r,"user-mismatch"),$a._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Es(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(n,e,t=!1){if(Zn(n.app))return Promise.reject(Ar(n));const r="signIn",a=await zA(n,r,e),l=await $a._fromIdTokenResponse(n,r,a);return t||await n._updateCurrentUser(l.user),l}async function dM(n,e){return BA(qi(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(n){const e=qi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Jc(n,e,t){const r=qi(n);await Zd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",sM)}async function tf(n,e,t){if(Zn(n.app))return Promise.reject(Ar(n));const r=qi(n),c=await Zd(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cM).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&qA(n),m}),d=await $a._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(d.user),d}function $A(n,e,t){return Zn(n.app)?Promise.reject(Ar(n)):dM(Ct(n),Cl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qA(n),r})}async function CE(n,e){const t=Ct(n),a={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:l}=await nM(t.auth,a);l!==n.email&&await n.reload()}function fM(n,e,t,r){return Ct(n).onIdTokenChanged(e,t,r)}function mM(n,e,t){return Ct(n).beforeAuthStateChanged(e,t)}function FA(n,e,t,r){return Ct(n).onAuthStateChanged(e,t,r)}function pM(n){return Ct(n).signOut()}const nf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nf,"1"),this.storage.removeItem(nf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=1e3,yM=10;class GA extends HA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);j4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,yM):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},gM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}GA.type="LOCAL";const vM=GA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends HA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}KA.type="SESSION";const QA=KA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Pf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const d=Array.from(c).map(async p=>p(t.origin,l)),m=await _M(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const p=lv("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(b){const T=b;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(){return window}function wM(n){Ks().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return typeof Ks().WorkerGlobalScope<"u"&&typeof Ks().importScripts=="function"}async function EM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TM(){return navigator?.serviceWorker?.controller||null}function SM(){return YA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="firebaseLocalStorageDb",xM=1,sf="firebaseLocalStorage",XA="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jf(n,e){return n.transaction([sf],e?"readwrite":"readonly").objectStore(sf)}function AM(){const n=indexedDB.deleteDatabase(WA);return new Nu(n).toPromise()}function Kg(){const n=indexedDB.open(WA,xM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(sf,{keyPath:XA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(sf)?e(r):(r.close(),await AM(),e(await Kg()))})})}async function IE(n,e,t){const r=jf(n,!0).put({[XA]:e,value:t});return new Nu(r).toPromise()}async function RM(n,e){const t=jf(n,!1).get(e),r=await new Nu(t).toPromise();return r===void 0?null:r.value}function NE(n,e){const t=jf(n,!0).delete(e);return new Nu(t).toPromise()}const CM=800,IM=3;class JA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>IM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pf._getInstance(SM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await EM(),!this.activeServiceWorker)return;this.sender=new bM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kg();return await IE(e,nf,"1"),await NE(e,nf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>IE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>RM(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>NE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=jf(a,!1).getAll();return new Nu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JA.type="LOCAL";const NM=JA;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kM(n,e){return e?Sr(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends av{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OM(n){return BA(n.auth,new cv(n),n.bypassAuthState)}function DM(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),hM(t,new cv(n),n.bypassAuthState)}async function PM(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),uM(t,new cv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OM;case"linkViaPopup":case"linkViaRedirect":return PM;case"reauthViaPopup":case"reauthViaRedirect":return DM;default:Es(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new Ru(2e3,1e4);class sl extends ZA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,sl.currentPopupAction&&sl.currentPopupAction.cancel(),sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){kr(this.filter.length===1,"Popup operations only handle one event");const e=lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jM.get())};e()}}sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="pendingRedirect",Td=new Map;class UM extends ZA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Td.get(this.auth._key());if(!e){try{const r=await LM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Td.set(this.auth._key(),e)}return this.bypassAuthState||Td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LM(n,e){const t=BM(e),r=zM(n);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function VM(n,e){Td.set(n._key(),e)}function zM(n){return Sr(n._redirectPersistence)}function BM(n){return Ed(MM,n.config.apiKey,n.name)}async function qM(n,e,t=!1){if(Zn(n.app))return Promise.reject(Ar(n));const r=qi(n),a=kM(r,e),c=await new UM(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=600*1e3;class FM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!e1(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Gs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$M&&this.cachedEventUids.clear(),this.cachedEventUids.has(kE(e))}saveEventToCache(e){this.cachedEventUids.add(kE(e)),this.lastProcessedEventTime=Date.now()}}function kE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function e1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function HM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(n,e={}){return Pr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QM=/^https?/;async function YM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await GM(n);for(const t of e)try{if(WM(t))return}catch{}Es(n,"unauthorized-domain")}function WM(n){const e=Hg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!QM.test(t))return!1;if(KM.test(n))return r===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new Ru(3e4,6e4);function OE(){const n=Ks().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function JM(n){return new Promise((e,t)=>{function r(){OE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OE(),t(Gs(n,"network-request-failed"))},timeout:XM.get()})}if(Ks().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ks().gapi?.load)r();else{const a=F4("iframefcb");return Ks()[a]=()=>{gapi.load?r():t(Gs(n,"network-request-failed"))},jA(`${$4()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function ZM(n){return Sd=Sd||JM(n),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU=new Ru(5e3,15e3),tU="__/auth/iframe",nU="emulator/auth/iframe",sU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iU(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sv(e,nU):`https://${n.config.authDomain}/${tU}`,r={apiKey:e.apiKey,appName:n.name,v:El},a=rU.get(n.config.apiHost);a&&(r.eid=a);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${vu(r).slice(1)}`}async function aU(n){const e=await ZM(n),t=Ks().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:iU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sU,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Gs(n,"network-request-failed"),d=Ks().setTimeout(()=>{l(c)},eU.get());function m(){Ks().clearTimeout(d),a(r)}r.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lU=500,cU=600,uU="_blank",hU="http://localhost";class DE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dU(n,e,t,r=lU,a=cU){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const m={...oU,width:r.toString(),height:a.toString(),top:l,left:c},p=fn().toLowerCase();t&&(d=CA(p)?uU:t),AA(p)&&(e=e||hU,m.scrollbars="yes");const y=Object.entries(m).reduce((T,[C,N])=>`${T}${C}=${N},`,"");if(P4(p)&&d!=="_self")return fU(e||"",d),new DE(null);const b=window.open(e||"",d,y);Re(b,n,"popup-blocked");try{b.focus()}catch{}return new DE(b)}function fU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="__/auth/handler",pU="emulator/auth/handler",gU=encodeURIComponent("fac");async function PE(n,e,t,r,a,l){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:El,eventId:a};if(e instanceof VA){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",pk(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,b]of Object.entries({}))c[y]=b}if(e instanceof Iu){const y=e.getScopes().filter(b=>b!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),p=m?`#${gU}=${encodeURIComponent(m)}`:"";return`${yU(n)}?${vu(d).slice(1)}${p}`}function yU({config:n}){return n.emulator?sv(n,pU):`https://${n.authDomain}/${mU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="webStorageSupport";class vU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QA,this._completeRedirectFn=qM,this._overrideRedirectResult=VM}async _openPopup(e,t,r,a){kr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await PE(e,t,r,Hg(),a);return dU(e,l,lv())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await PE(e,t,r,Hg(),a);return wM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(kr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await aU(e),r=new FM(e);return t.register("authEvent",a=>(Re(a?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ag,{type:ag},a=>{const l=a?.[0]?.[ag];l!==void 0&&t(!!l),Es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DA()||RA()||iv()}}const _U=vU;var jE="@firebase/auth",ME="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EU(n){Ys(new bs("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Re(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PA(n)},p=new z4(r,a,l,m);return W4(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ys(new bs("auth-internal",e=>{const t=qi(e.getProvider("auth").getImmediate());return(r=>new bU(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ss(jE,ME,wU(n)),ss(jE,ME,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=300,SU=lS("authIdTokenMaxAge")||TU;let UE=null;const xU=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>SU)return;const a=t?.token;UE!==a&&(UE=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function uv(n=my()){const e=Ga(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Y4(n,{popupRedirectResolver:_U,persistence:[NM,vM,QA]}),r=lS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=xU(l.toString());mM(t,c,()=>c(t.currentUser)),fM(t,d=>c(d))}}const a=aS("auth");return a&&X4(t,`http://${a}`),t}function AU(){return document.getElementsByTagName("head")?.[0]??document}B4({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=a=>{const l=Gs("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",AU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EU("Browser");const RU={apiKey:"AIzaSyB4XHuszSxau0JsCkOXfBcUdV7hegMezR0",authDomain:"vsurvey-b1ef3.firebaseapp.com",projectId:"vsurvey-b1ef3",storageBucket:"vsurvey-b1ef3.firebasestorage.app",messagingSenderId:"493587903081",appId:"1:493587903081:web:9d6fb396dbcc0fa24fa8f8",measurementId:"G-MN60GKD21G"},hv=mf(RU);KO(hv);const zs=Xj(hv),ts=uv(hv),CU="http://localhost:8000/api";class IU{constructor(){this.baseURL=CU}async getAuthToken(){const e=ts.currentUser;return e?await e.getIdToken():localStorage.getItem("firebaseToken")}async request(e,t={}){const r=await this.getAuthToken(),a={headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers},...t};a.body&&typeof a.body=="object"&&(a.body=JSON.stringify(a.body));const l=await fetch(`${this.baseURL}${e}`,a);if(!l.ok){const c=await l.json().catch(()=>({message:"Network error"}));throw new Error(c.detail||c.message||"Request failed")}return await l.json()}async createUser(e){return this.request("/users/",{method:"POST",body:e})}async getUsers(e={}){const t=new URLSearchParams(e).toString();return this.request(`/users/?${t}`)}async getUserById(e){return this.request(`/users/${e}`)}async updateUser(e,t){return this.request(`/users/${e}`,{method:"PUT",body:t})}async deleteUser(e){return this.request(`/users/${e}`,{method:"DELETE"})}async toggleUserStatus(e){return this.request(`/users/${e}/toggle-status`,{method:"PATCH"})}async createQuestion(e){return this.request("/questions/",{method:"POST",body:e})}async getQuestions(e={}){const t=new URLSearchParams(e).toString();return this.request(`/questions/?${t}`)}async getQuestionById(e){return this.request(`/questions/${e}`)}async updateQuestion(e,t){return this.request(`/questions/${e}`,{method:"PUT",body:t})}async deleteQuestion(e){return this.request(`/questions/${e}`,{method:"DELETE"})}async getQuestionTypes(){return this.request("/questions/types/")}async createSurvey(e){return this.request("/surveys/",{method:"POST",body:e})}async getSurveys(e={}){const t=new URLSearchParams(e).toString();return this.request(`/surveys/?${t}`)}async getSurveyById(e,t=!1){return this.request(`/surveys/${e}?include_questions=${t}`)}async updateSurvey(e,t){return this.request(`/surveys/${e}`,{method:"PUT",body:t})}async deleteSurvey(e){return this.request(`/surveys/${e}`,{method:"DELETE"})}async addQuestionToSurvey(e,t,r=0){return this.request(`/surveys/${e}/questions/${t}?order=${r}`,{method:"POST"})}async removeQuestionFromSurvey(e,t){return this.request(`/surveys/${e}/questions/${t}`,{method:"DELETE"})}async updateSurveyStatus(e,t){return this.request(`/surveys/${e}/status?status=${t}`,{method:"PATCH"})}async assignSurveyToUsers(e){return this.request("/assignments/",{method:"POST",body:e})}async getAssignments(e={}){const t=new URLSearchParams(e).toString();return this.request(`/assignments/?${t}`)}async getSurveyAssignments(e){return this.request(`/assignments/survey/${e}`)}async getUserAssignments(e){return this.request(`/assignments/user/${e}`)}async updateAssignment(e,t){return this.request(`/assignments/${e}`,{method:"PUT",body:t})}async deleteAssignment(e){return this.request(`/assignments/${e}`,{method:"DELETE"})}async removeUserFromSurvey(e,t){return this.request(`/assignments/survey/${e}/user/${t}`,{method:"DELETE"})}}const Er=new IU,t1=()=>{const[n,e]=D.useState(!1),[t,r]=D.useState(null),a=D.useCallback(async(l,c,d)=>{e(!0),r(null);try{const m=await l();return c&&c(m),m}catch(m){const p=m.message||"An unexpected error occurred";throw r(p),d&&d(p),m}finally{e(!1)}},[]);return{loading:n,error:t,execute:a,setError:r}},NU=()=>{const{loading:n,error:e,execute:t,setError:r}=t1(),[a,l]=D.useState([]),[c,d]=D.useState({total:0,page:1,size:10,pages:0}),m=D.useCallback(async(C={})=>t(()=>Er.getUsers(C),N=>{l(N.items||[]),d({total:N.total||0,page:N.page||1,size:N.size||10,pages:N.pages||0})}),[t]),p=D.useCallback(async C=>t(()=>Er.createUser(C),()=>{m({page:c.page,size:c.size})}),[t,m,c.page,c.size]),y=D.useCallback(async(C,N)=>t(()=>Er.updateUser(C,N),()=>{m({page:c.page,size:c.size})}),[t,m,c.page,c.size]),b=D.useCallback(async C=>t(()=>Er.deleteUser(C),()=>{m({page:c.page,size:c.size})}),[t,m,c.page,c.size]),T=D.useCallback(async C=>t(()=>Er.toggleUserStatus(C),()=>{m({page:c.page,size:c.size})}),[t,m,c.page,c.size]);return{users:a,pagination:c,loading:n,error:e,setError:r,fetchUsers:m,createUser:p,updateUser:y,deleteUser:b,toggleUserStatus:T}},kU=()=>{const{loading:n,error:e,execute:t,setError:r}=t1(),[a,l]=D.useState([]),[c,d]=D.useState({total:0,page:1,size:10,pages:0}),m=D.useCallback(async(T={})=>t(()=>Er.getQuestions(T),C=>{l(C.items||[]),d({total:C.total||0,page:C.page||1,size:C.size||10,pages:C.pages||0})}),[t]),p=D.useCallback(async T=>t(()=>Er.createQuestion(T),()=>{m({page:c.page,size:c.size})}),[t,m,c.page,c.size]),y=D.useCallback(async(T,C)=>t(()=>Er.updateQuestion(T,C),()=>{m({page:c.page,size:c.size})}),[t,m,c.page,c.size]),b=D.useCallback(async T=>t(()=>Er.deleteQuestion(T),()=>{m({page:c.page,size:c.size})}),[t,m,c.page,c.size]);return{questions:a,pagination:c,loading:n,error:e,setError:r,fetchQuestions:m,createQuestion:p,updateQuestion:y,deleteQuestion:b}};class OU{constructor(){this.currentUser=null,this.authStateListeners=[],FA(ts,e=>{this.currentUser=e,this.authStateListeners.forEach(t=>t(e))})}async signIn(e,t){try{return{success:!0,user:(await $A(ts,e,t)).user,message:"Signed in successfully"}}catch(r){return{success:!1,error:r.code,message:this.getErrorMessage(r.code)}}}async signUp(e,t){try{const r=await tf(ts,e,t);return await CE(r.user),{success:!0,user:r.user,message:"Account created successfully. Please check your email for verification."}}catch(r){return{success:!1,error:r.code,message:this.getErrorMessage(r.code)}}}async resetPassword(e){try{return await Jc(ts,e),{success:!0,message:"Password reset email sent successfully"}}catch(t){return{success:!1,error:t.code,message:this.getErrorMessage(t.code)}}}async signOut(){try{return await pM(ts),{success:!0,message:"Signed out successfully"}}catch(e){return{success:!1,error:e.code,message:this.getErrorMessage(e.code)}}}getCurrentUser(){return this.currentUser}isAuthenticated(){return!!this.currentUser}async getToken(){return this.currentUser?await this.currentUser.getIdToken():null}onAuthStateChange(e){return this.authStateListeners.push(e),()=>{const t=this.authStateListeners.indexOf(e);t>-1&&this.authStateListeners.splice(t,1)}}getErrorMessage(e){return{"auth/user-not-found":"No user found with this email address.","auth/wrong-password":"Incorrect password.","auth/email-already-in-use":"An account with this email already exists.","auth/weak-password":"Password should be at least 6 characters.","auth/invalid-email":"Invalid email address.","auth/user-disabled":"This account has been disabled.","auth/too-many-requests":"Too many failed attempts. Please try again later.","auth/network-request-failed":"Network error. Please check your connection.","auth/invalid-credential":"Invalid email or password.","auth/missing-password":"Password is required.","auth/invalid-login-credentials":"Invalid email or password."}[e]||"An unexpected error occurred. Please try again."}isEmailVerified(){return this.currentUser?.emailVerified||!1}async resendEmailVerification(){if(this.currentUser)try{return await CE(this.currentUser),{success:!0,message:"Verification email sent successfully"}}catch(e){return{success:!1,error:e.code,message:this.getErrorMessage(e.code)}}return{success:!1,message:"No user is currently signed in"}}}const ja=new OU,LE=({profile:n,onProfileEdit:e,onLogout:t,onNavigateToSurveys:r})=>{const{users:a,pagination:l,loading:c,error:d,setError:m,fetchUsers:p,createUser:y,updateUser:b,deleteUser:T,toggleUserStatus:C}=NU(),[N,L]=D.useState({full_name:"",email:""}),[V,$]=D.useState(""),[Y,K]=D.useState(""),[ee,le]=D.useState(1),[ae]=D.useState(10),[M,S]=D.useState(!1),[R,O]=D.useState(null),[j,k]=D.useState({full_name:"",email:""}),[I,Se]=D.useState(!1),[be,B]=D.useState(null);D.useEffect(()=>{(async()=>{let at=0;const Vn=10;for(;!ja.isAuthenticated()&&at<Vn;)await new Promise(zn=>setTimeout(zn,500)),at++;ja.isAuthenticated()&&oe()})()},[ee,Y]);const oe=async()=>{try{await p({page:ee,size:ae,...Y&&{search:Y}})}catch(me){console.error("Failed to load users:",me)}},te=async me=>{if(me.preventDefault(),!N.full_name.trim()||!N.email.trim()){$("Please fill in all required fields");return}console.log("Auth state:",ja.isAuthenticated()),console.log("Current user:",ja.getCurrentUser());try{await y({full_name:N.full_name.trim(),email:N.email.trim(),created_by:n?.email||"admin@example.com"}),L({full_name:"",email:""}),$("User created successfully!"),setTimeout(()=>$(""),3e3)}catch(at){console.error("Create user error:",at),$(at.message||"Failed to create user"),setTimeout(()=>$(""),5e3)}},ue=async me=>{try{await C(me),$("User status updated successfully!"),setTimeout(()=>$(""),3e3)}catch(at){$(at.message||"Failed to update user status"),setTimeout(()=>$(""),5e3)}},P=me=>{B(me),Se(!0)},J=async()=>{if(be)try{await T(be.id),$("User deleted successfully!"),setTimeout(()=>$(""),3e3)}catch(me){$(me.message||"Failed to delete user"),setTimeout(()=>$(""),5e3)}Se(!1),B(null)},he=()=>{Se(!1),B(null)},ce=me=>{O(me),k({full_name:me.full_name,email:me.email}),S(!0)},fe=async me=>{if(me.preventDefault(),!(!j.full_name.trim()||!j.email.trim()))try{await b(R.id,{full_name:j.full_name.trim(),email:j.email.trim()}),S(!1),O(null),$("User updated successfully!"),setTimeout(()=>$(""),3e3)}catch(at){$(at.message||"Failed to update user"),setTimeout(()=>$(""),5e3)}},Ne=me=>{K(me.target.value),le(1)},Te=me=>{le(me)},Ve=()=>{m(null),$("")};return v.jsxs("div",{className:"space-y-6",children:[v.jsx(hf,{profile:n,onProfileEdit:e,onLogout:t}),v.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Survey Users"}),v.jsx("p",{className:"text-gray-600 mt-1",children:"Manage users who can participate in surveys"})]}),v.jsxs(De,{onClick:r,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[v.jsx(su,{className:"w-4 h-4"}),"Create Survey"]})]}),(V||d)&&v.jsx("div",{className:`p-4 rounded-lg ${d?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:d||V}),v.jsx("button",{onClick:Ve,className:"text-sm underline",children:"Dismiss"})]})}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs(bn,{className:"lg:col-span-1",children:[v.jsx(ys,{children:v.jsxs(ns,{className:"flex items-center gap-2",children:[v.jsx(su,{className:"w-5 h-5"}),"Add New User"]})}),v.jsx(hn,{children:v.jsxs("form",{onSubmit:te,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),v.jsx(mt,{type:"text",value:N.full_name,onChange:me=>L({...N,full_name:me.target.value}),placeholder:"Enter full name",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),v.jsx(mt,{type:"email",value:N.email,onChange:me=>L({...N,email:me.target.value}),placeholder:"Enter email address",required:!0})]}),v.jsx(De,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:c,children:c?"Creating...":"Create User"})]})})]}),v.jsxs(bn,{className:"lg:col-span-2",children:[v.jsx(ys,{children:v.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[v.jsxs(ns,{children:["Users (",l.total,")"]}),v.jsxs("div",{className:"relative w-full sm:w-64",children:[v.jsx(MN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),v.jsx(mt,{type:"text",placeholder:"Search users...",value:Y,onChange:Ne,className:"pl-10"})]})]})}),v.jsxs(hn,{children:[c&&a.length===0?v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),v.jsx("p",{className:"text-gray-500 mt-2",children:"Loading users..."})]}):a.length===0?v.jsxs("div",{className:"text-center py-8",children:[v.jsx("p",{className:"text-gray-500",children:"No users found"}),Y&&v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your search terms"})]}):v.jsx("div",{className:"space-y-3",children:a.map(me=>v.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[v.jsx("div",{className:"flex-1",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:`w-3 h-3 rounded-full ${me.is_active?"bg-green-500":"bg-red-500"}`}),v.jsxs("div",{children:[v.jsx("h3",{className:"font-medium text-gray-900",children:me.full_name}),v.jsx("p",{className:"text-sm text-gray-500",children:me.email})]})]})}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(De,{variant:"outline",size:"sm",onClick:()=>ue(me.id),className:`${me.is_active?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700"}`,disabled:c,children:me.is_active?v.jsx(Od,{className:"w-4 h-4"}):v.jsx(kd,{className:"w-4 h-4"})}),v.jsx(De,{variant:"outline",size:"sm",onClick:()=>ce(me),className:"text-blue-600 hover:text-blue-700",children:v.jsx(tS,{className:"w-4 h-4"})}),v.jsx(De,{variant:"outline",size:"sm",onClick:()=>P(me),className:"text-red-600 hover:text-red-700",children:v.jsx(uf,{className:"w-4 h-4"})})]})]},me.id))}),l.pages>1&&v.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[v.jsx(De,{variant:"outline",size:"sm",onClick:()=>Te(ee-1),disabled:ee===1||c,children:"Previous"}),v.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",ee," of ",l.pages]}),v.jsx(De,{variant:"outline",size:"sm",onClick:()=>Te(ee+1),disabled:ee===l.pages||c,children:"Next"})]})]})]})]}),v.jsx(_g,{open:M,onOpenChange:S,children:v.jsxs(Cd,{children:[v.jsx(Id,{children:v.jsx(Nd,{children:"Edit User"})}),v.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),v.jsx(mt,{type:"text",value:j.full_name,onChange:me=>k({...j,full_name:me.target.value}),placeholder:"Enter full name",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),v.jsx(mt,{type:"email",value:j.email,onChange:me=>k({...j,email:me.target.value}),placeholder:"Enter email address",required:!0})]}),v.jsxs("div",{className:"flex gap-2 pt-4",children:[v.jsx(De,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:c,children:c?"Updating...":"Update User"}),v.jsx(De,{type:"button",variant:"outline",onClick:()=>S(!1),className:"flex-1",children:"Cancel"})]})]})]})}),v.jsx(_g,{open:I,onOpenChange:Se,children:v.jsxs(Cd,{children:[v.jsx(Id,{children:v.jsx(Nd,{children:"Confirm Delete"})}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("p",{children:["Are you sure you want to delete ",v.jsx("strong",{children:be?.full_name}),"?"]}),v.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone."}),v.jsxs("div",{className:"flex gap-2 pt-4",children:[v.jsx(De,{onClick:J,className:"flex-1 bg-red-600 hover:bg-red-700",disabled:c,children:c?"Deleting...":"Delete User"}),v.jsx(De,{variant:"outline",onClick:he,className:"flex-1",children:"Cancel"})]})]})]})})]})},DU=D.forwardRef(({className:n,children:e,value:t,onValueChange:r,...a},l)=>{const[c,d]=D.useState(!1);return v.jsxs("div",{className:"relative",children:[v.jsxs("button",{ref:l,type:"button",className:ht("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),onClick:()=>d(!c),...a,children:[e,v.jsx("svg",{className:"h-4 w-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&v.jsx("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 bg-white border rounded-md shadow-lg",children:D.Children.map(e,m=>m.type===n1?D.cloneElement(m,{value:t,onValueChange:p=>{r(p),d(!1)}}):null)})]})});DU.displayName="SelectTrigger";const n1=({className:n,children:e,value:t,onValueChange:r,...a})=>v.jsx("div",{className:ht("p-1 max-h-60 overflow-auto",n),...a,children:D.Children.map(e,l=>D.cloneElement(l,{value:t,onValueChange:r}))});n1.displayName="SelectContent";const PU=D.forwardRef(({className:n,children:e,value:t,value:r,onValueChange:a,...l},c)=>v.jsx("div",{ref:c,className:ht("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r===t&&"bg-accent",n),onClick:()=>a(t),...l,children:e}));PU.displayName="SelectItem";const Bs=D.forwardRef(({className:n,...e},t)=>v.jsx("label",{ref:t,className:ht("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n),...e}));Bs.displayName="Label";const jU=({profile:n,onProfileEdit:e,onLogout:t,onNavigateToSurveys:r})=>{const{questions:a,loading:l,error:c,fetchQuestions:d,createQuestion:m,updateQuestion:p,deleteQuestion:y}=kU(),[b,T]=D.useState(""),[C,N]=D.useState(""),[L,V]=D.useState("1-5"),[$,Y]=D.useState([""]),[K,ee]=D.useState(""),[le,ae]=D.useState(!1),[M,S]=D.useState(null),[R,O]=D.useState({text:"",type:"",options:[]});D.useEffect(()=>{(async()=>{let P=0;const J=10;for(;!ja.isAuthenticated()&&P<J;)await new Promise(he=>setTimeout(he,500)),P++;ja.isAuthenticated()&&j()})()},[]);const j=async()=>{try{await d()}catch(ue){console.error("Failed to load questions:",ue)}},k=()=>{Y([...$,""])},I=ue=>{$.length>1&&Y($.filter((P,J)=>J!==ue))},Se=(ue,P)=>{const J=[...$];J[ue]=P,Y(J)},be=async ue=>{if(ue.preventDefault(),!b.trim()||!C){ee("Please fill in all required fields");return}try{const P={text:b.trim(),type:C,options:C==="multiple_choice"?$.filter(J=>J.trim()).map((J,he)=>({id:`opt_${Date.now()}_${he}`,text:J.trim(),order:he})):[],is_required:!0,order:0,created_by:n?.email||"admin@example.com"};await m(P),T(""),N(""),V("1-5"),Y([""]),ee("Question created successfully!"),setTimeout(()=>ee(""),3e3)}catch(P){console.error("Create question error:",P),ee(P.message||"Failed to create question"),setTimeout(()=>ee(""),5e3)}},B=ue=>{S(ue),O({text:ue.text,type:ue.type,options:ue.options||[]}),ae(!0)},oe=async ue=>{ue.preventDefault();try{await p(M.id,R),ae(!1),S(null),ee("Question updated successfully!"),setTimeout(()=>ee(""),3e3)}catch(P){ee(P.message||"Failed to update question"),setTimeout(()=>ee(""),5e3)}},te=async ue=>{if(window.confirm("Are you sure you want to delete this question?"))try{await y(ue),ee("Question deleted successfully!"),setTimeout(()=>ee(""),3e3)}catch(P){ee(P.message||"Failed to delete question"),setTimeout(()=>ee(""),5e3)}};return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx(hf,{profile:n,onProfileEdit:e,onLogout:t}),v.jsxs("div",{className:"max-w-7xl mx-auto p-6 pt-24",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Question Management"}),v.jsx("p",{className:"text-gray-600 mt-2",children:"Create and manage survey questions"})]}),K&&v.jsx("div",{className:`mb-4 p-4 rounded-md ${K.includes("success")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:K}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[v.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Create New Question"}),v.jsxs("form",{onSubmit:be,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx(Bs,{htmlFor:"questionText",children:"Question Text *"}),v.jsx(mt,{id:"questionText",type:"text",value:b,onChange:ue=>T(ue.target.value),placeholder:"Enter your question",required:!0})]}),v.jsxs("div",{children:[v.jsx(Bs,{htmlFor:"responseType",children:"Response Type *"}),v.jsxs("select",{id:"responseType",className:"w-full p-3 border text-sm rounded-[5px] border-gray-400 focus:outline-none focus:ring-1 focus:ring-black",value:C,onChange:ue=>N(ue.target.value),required:!0,children:[v.jsx("option",{value:"",children:"Select response type"}),v.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),v.jsx("option",{value:"text",children:"Text"}),v.jsx("option",{value:"rating",children:"Rating"}),v.jsx("option",{value:"yes_no",children:"Yes/No"})]})]}),C==="multiple_choice"&&v.jsxs("div",{children:[v.jsx(Bs,{children:"Options"}),$.map((ue,P)=>v.jsxs("div",{className:"flex gap-2 mt-2",children:[v.jsx(mt,{value:ue,onChange:J=>Se(P,J.target.value),placeholder:`Option ${P+1}`}),$.length>1&&v.jsx(De,{type:"button",variant:"outline",size:"sm",onClick:()=>I(P),children:v.jsx(FN,{className:"w-4 h-4"})})]},P)),v.jsx(De,{type:"button",variant:"outline",size:"sm",onClick:k,className:"mt-2",children:"Add Option"})]}),v.jsx(De,{type:"submit",disabled:l,className:"w-full",children:l?"Creating...":"Create Question"})]})]}),v.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[v.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Questions"}),l&&v.jsx("p",{children:"Loading questions..."}),c&&v.jsxs("p",{className:"text-red-600",children:["Error: ",c]}),v.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.map(ue=>v.jsx("div",{className:"border rounded-lg p-4",children:v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"font-medium",children:ue.text}),v.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Type: ",ue.type]}),ue.options&&ue.options.length>0&&v.jsxs("div",{className:"mt-2",children:[v.jsx("p",{className:"text-sm text-gray-600",children:"Options:"}),v.jsx("ul",{className:"text-sm text-gray-700 ml-4",children:ue.options.map((P,J)=>v.jsxs("li",{children:[" ",P]},J))})]})]}),v.jsxs("div",{className:"flex gap-2 ml-4",children:[v.jsx(De,{variant:"outline",size:"sm",onClick:()=>B(ue),children:v.jsx(tS,{className:"w-4 h-4"})}),v.jsx(De,{variant:"outline",size:"sm",onClick:()=>te(ue.id),children:v.jsx(uf,{className:"w-4 h-4"})})]})]})},ue.id))})]})]})]}),v.jsx(_g,{open:le,onOpenChange:ae,children:v.jsxs(Cd,{children:[v.jsx(Id,{children:v.jsx(Nd,{children:"Edit Question"})}),v.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx(Bs,{htmlFor:"editQuestionText",children:"Question Text"}),v.jsx(mt,{id:"editQuestionText",value:R.text,onChange:ue=>O({...R,text:ue.target.value}),required:!0})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx(De,{type:"submit",disabled:l,children:l?"Updating...":"Update Question"}),v.jsx(De,{type:"button",variant:"outline",onClick:()=>ae(!1),children:"Cancel"})]})]})]})})]})},MU=({profile:n,onProfileEdit:e,onLogout:t,onNavigateToSurveys:r})=>{const[a,l]=D.useState([]),[c,d]=D.useState(""),[m,p]=D.useState([]);D.useEffect(()=>{const O=localStorage.getItem("surveyQuestions");O&&l(JSON.parse(O));const j=localStorage.getItem("currentClientAdmin");if(j){const{email:I}=JSON.parse(j),Se=`createdSurveys_${I}`,be=localStorage.getItem(Se);be&&p(JSON.parse(be))}const k=()=>{const I=localStorage.getItem("currentClientAdmin");if(I){const{email:Se}=JSON.parse(I),be=`createdSurveys_${Se}`,B=localStorage.getItem(be);p(B?JSON.parse(B):[])}};return window.addEventListener("surveysUpdated",k),()=>{window.removeEventListener("surveysUpdated",k)}},[]);const[y,b]=D.useState([]),[T,C]=D.useState(!1),[N,L]=D.useState(!1),[V,$]=D.useState([]),[Y,K]=D.useState(""),[ee,le]=D.useState(!1),ae=O=>{b(j=>j.includes(O)?j.filter(k=>k!==O):[...j,O])},M=O=>{const j=localStorage.getItem("currentClientAdmin");if(j){const{email:k}=JSON.parse(j),I=`createdSurveys_${k}`;localStorage.setItem(I,JSON.stringify(O)),window.dispatchEvent(new Event("surveysUpdated"))}},S=()=>{const j=[{id:Date.now(),name:c.trim(),date:new Date().toISOString().split("T")[0],questions:y,questionCount:y.length},...m];p(j),M(j),b([]),d("")},R=(O,j)=>{const k=m.map(I=>I.id===O?{...I,questions:[...new Set([...I.questions,...j])],questionCount:[...new Set([...I.questions,...j])].length}:I);p(k),M(k)};return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx(hf,{profile:n,onProfileEdit:e,onLogout:t,onNavigateToSurveys:r}),v.jsx("div",{className:"pt-20 p-4 sm:p-6 md:p-8",children:v.jsx("div",{className:"flex flex-col lg:flex-row gap-4 md:gap-6 xl:px-10",children:v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"mb-4 md:mb-6",children:[v.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl xl:text-3xl font-medium",children:"Create New Survey"}),v.jsx("h1",{className:"text-sm md:text-base lg:text-lg text-gray-400 font-extralight mt-1",children:"Select questions and create survey"})]}),v.jsxs("div",{className:"mb-4 md:mb-6",children:[v.jsx("label",{className:"block text-xs md:text-sm font-bold text-black mb-2",children:"SURVEY NAME"}),v.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4",children:[v.jsx("input",{type:"text",value:c,onChange:O=>d(O.target.value),placeholder:"Type your survey name here",className:"flex-1 bg-transparent text-sm md:text-base border-b-2 border-gray-300 outline-none placeholder-gray-400 focus:placeholder-transparent focus:border-black px-2 py-2"}),v.jsx("button",{onClick:S,className:"bg-black text-white px-4 py-2 rounded-[10px] text-sm whitespace-nowrap",children:"+ Create Survey"})]})]}),v.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-3 md:gap-4 mb-4 md:mb-6",children:[v.jsxs("h2",{className:"text-base md:text-lg lg:text-xl font-semibold",children:["Available Questions (",a.length,")"]}),v.jsx(De,{onClick:()=>L(!0),disabled:y.length===0,className:"bg-black text-white text-sm px-4 py-2",children:"Select Survey"})]}),v.jsx("div",{className:"space-y-3 md:space-y-4",children:a.length===0?v.jsx("div",{className:"bg-white shadow-md p-4 rounded text-center",children:v.jsx("p",{className:"text-gray-500 text-sm",children:"No questions available. Create questions first."})}):a.map(O=>v.jsx("div",{className:"bg-white shadow-md p-3 md:p-4 rounded",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx("input",{type:"checkbox",checked:y.includes(O.id),onChange:()=>ae(O.id),className:"mt-1 flex-shrink-0"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"font-medium text-sm break-words",children:O.text}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:O.type}),O.options&&O.options.length>0&&v.jsx("div",{className:"ml-4 mt-2",children:O.options.map((j,k)=>v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"checkbox",disabled:!0,className:"flex-shrink-0"}),v.jsx("span",{className:"text-xs break-words",children:j})]},k))})]})]})},O.id))})]})})}),N&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-lg p-4 md:p-6 w-full max-w-sm md:max-w-md max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-sm md:text-base lg:text-lg font-semibold",children:"Select Surveys"}),v.jsx("button",{onClick:()=>L(!1),className:"text-gray-500 hover:text-gray-700 text-lg",children:""})]}),v.jsx(mt,{type:"text",placeholder:"Search surveys...",value:Y,onChange:O=>K(O.target.value),className:"mb-4"}),m.length===0?v.jsx("div",{className:"text-center py-4",children:v.jsx("p",{className:"text-gray-500 text-sm",children:"No surveys created yet. Create a survey first."})}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex flex-col md:flex-row gap-2 mb-4",children:[v.jsx(De,{onClick:()=>$(m.map(O=>O.id)),className:"text-xs",variant:"outline",children:"Select All"}),v.jsx(De,{onClick:()=>$([]),variant:"outline",className:"text-xs",children:"Clear All"})]}),v.jsx("div",{className:"space-y-2 mb-4",children:m.filter(O=>O.name.toLowerCase().includes(Y.toLowerCase())).map(O=>v.jsxs("div",{className:"flex items-start gap-2 p-2 md:p-3 border rounded",children:[v.jsx("input",{type:"checkbox",checked:V.includes(O.id),onChange:j=>{j.target.checked?$([...V,O.id]):$(V.filter(k=>k!==O.id))},className:"mt-1 flex-shrink-0"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"font-medium text-xs md:text-sm break-words",children:O.name}),v.jsx("p",{className:"text-xs text-gray-500",children:O.date})]})]},O.id))})]}),v.jsxs("div",{className:"flex flex-col md:flex-row justify-end gap-2",children:[v.jsx(De,{onClick:()=>L(!1),variant:"outline",className:"text-xs",children:"Cancel"}),v.jsxs(De,{onClick:()=>{V.forEach(O=>{R(O,y)}),b([]),$([]),L(!1)},className:"bg-black text-white text-xs",disabled:V.length===0||m.length===0||y.length===0,children:["Assign Questions (",V.length,")"]})]})]})})]})},UU=""+new URL("1-CuBIowUu.png",import.meta.url).href,LU=({onLogin:n})=>{const[e,t]=D.useState(""),[r,a]=D.useState(""),[l,c]=D.useState(!1),d=async m=>{m.preventDefault(),c(!0);try{if(e==="superadmin@vsurvey.com"&&r==="superadmin123"){n("superadmin");return}const p=await ja.signIn(e,r);if(p.success){const y=await p.user.getIdToken();localStorage.setItem("firebaseToken",y),setTimeout(()=>{n("client",{email:e,isFirstTime:!1,profile:null})},1e3)}}catch(p){alert("Invalid email or password: "+p.message)}finally{c(!1)}};return v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50 flex items-center justify-center p-4 relative overflow-hidden",children:[v.jsxs("div",{className:"absolute inset-0",children:[v.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-100/30 via-transparent to-transparent"}),v.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-blue-200/20 rounded-full blur-3xl"}),v.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-indigo-200/20 rounded-full blur-2xl"})]}),v.jsx("div",{className:"relative z-10 w-full max-w-5xl mx-auto",children:v.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[v.jsxs("div",{className:"text-center lg:text-left space-y-8",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsx("h1",{className:"text-4xl lg:text-5xl font-bold bg-gradient-to-r from-gray-800 via-blue-700 to-indigo-700 bg-clip-text text-transparent leading-tight",children:"V-Survey Platform"}),v.jsx("p",{className:"text-xl text-gray-600 max-w-md mx-auto lg:mx-0",children:"Advanced data collection and analytics for modern enterprises"})]}),v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-200 to-indigo-200 rounded-2xl blur opacity-30 group-hover:opacity-50 transition duration-1000"}),v.jsxs("div",{className:"relative w-80 h-80 mx-auto lg:mx-0 rounded-2xl overflow-hidden shadow-xl",children:[v.jsx("img",{src:UU,alt:"Survey Platform",className:"w-full h-full object-cover transform group-hover:scale-105 transition duration-700"}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900/20 via-transparent to-transparent"})]})]})]}),v.jsx("div",{className:"w-full max-w-md mx-auto",children:v.jsx(bn,{className:"bg-white/80 backdrop-blur-xl border border-gray-200/50 shadow-2xl",children:v.jsxs(hn,{className:"p-8",children:[v.jsxs("div",{className:"text-center mb-8",children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),v.jsx("p",{className:"text-gray-600",children:"Sign in to access your dashboard"}),v.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3 mt-4 text-left",children:[v.jsx("h3",{className:"text-xs font-semibold text-blue-800 mb-1",children:"Super Admin Access:"}),v.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Email:"})," superadmin@vsurvey.com"]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Password:"})," superadmin123"]})]})]})]}),v.jsxs("form",{onSubmit:d,className:"space-y-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Email Address"}),v.jsx(mt,{type:"email",placeholder:"Enter your email",value:e,onChange:m=>t(m.target.value),required:!0,className:"h-12 bg-white/70 border-gray-300 text-gray-800 placeholder:text-gray-500 focus:bg-white focus:border-blue-500 focus:ring-blue-500/20 transition-all duration-300"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Password"}),v.jsx(mt,{type:"password",placeholder:"Enter your password",value:r,onChange:m=>a(m.target.value),required:!0,className:"h-12 bg-white/70 border-gray-300 text-gray-800 placeholder:text-gray-500 focus:bg-white focus:border-blue-500 focus:ring-blue-500/20 transition-all duration-300"})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer text-gray-600 hover:text-gray-800 transition-colors",children:[v.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),v.jsx("span",{className:"text-sm",children:"Remember me"})]}),v.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),v.jsx(De,{type:"submit",className:"w-full h-12 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold rounded-lg shadow-lg transform hover:scale-[1.02] transition-all duration-300 disabled:opacity-50 disabled:transform-none",disabled:l,children:l?v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Authenticating..."]}):"Sign In"})]}),v.jsx("div",{className:"mt-8 text-center",children:v.jsxs("p",{className:"text-sm text-gray-500",children:["Need access?",v.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Contact your administrator"})]})})]})})})]})})]})},VU="modulepreload",zU=function(n,e){return new URL(n,e).href},VE={},ku=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let p=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};const c=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),m=d?.nonce||d?.getAttribute("nonce");a=p(t.map(y=>{if(y=zU(y,r),y in VE)return;VE[y]=!0;const b=y.endsWith(".css"),T=b?'[rel="stylesheet"]':"";if(!!r)for(let L=c.length-1;L>=0;L--){const V=c[L];if(V.href===y&&(!b||V.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${y}"]${T}`))return;const N=document.createElement("link");if(N.rel=b?"stylesheet":VU,b||(N.as="script"),N.crossOrigin="",N.href=y,m&&N.setAttribute("nonce",m),document.head.appendChild(N),b)return new Promise((L,V)=>{N.addEventListener("load",L),N.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},BU=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ku(async()=>{const{default:r}=await Promise.resolve().then(()=>Il);return{default:r}},[],import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class dv extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class qU extends dv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zE extends dv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class BE extends dv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Qg||(Qg={}));var $U=function(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(y){try{p(r.next(y))}catch(b){c(b)}}function m(y){try{p(r.throw(y))}catch(b){c(b)}}function p(y){y.done?l(y.value):a(y.value).then(d,m)}p((r=r.apply(n,e||[])).next())})};class FU{constructor(e,{headers:t={},customFetch:r,region:a=Qg.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=BU(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return $U(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:c}=t;let d={},{region:m}=t;m||(m=this.region);const p=new URL(`${this.url}/${e}`);m&&m!=="any"&&(d["x-region"]=m,p.searchParams.set("forceFunctionRegion",m));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(d["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(d["Content-Type"]="application/json",y=JSON.stringify(c)));const b=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),a),body:y}).catch(L=>{throw new qU(L)}),T=b.headers.get("x-relay-error");if(T&&T==="true")throw new zE(b);if(!b.ok)throw new BE(b);let C=((r=b.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),N;return C==="application/json"?N=yield b.json():C==="application/octet-stream"?N=yield b.blob():C==="text/event-stream"?N=b:C==="multipart/form-data"?N=yield b.formData():N=yield b.text(),{data:N,error:null,response:b}}catch(a){return{data:null,error:a,response:a instanceof BE||a instanceof zE?a.context:void 0}}})}}var Yt={},Bo={},qo={},$o={},Fo={},Ho={},HU=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yl=HU();const GU=yl.fetch,s1=yl.fetch.bind(yl),r1=yl.Headers,KU=yl.Request,QU=yl.Response,Il=Object.freeze(Object.defineProperty({__proto__:null,Headers:r1,Request:KU,Response:QU,default:s1,fetch:GU},Symbol.toStringTag,{value:"Module"})),YU=QR(Il);var ld={},qE;function i1(){if(qE)return ld;qE=1,Object.defineProperty(ld,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return ld.default=n,ld}var $E;function a1(){if($E)return Ho;$E=1;var n=Ho&&Ho.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ho,"__esModule",{value:!0});const e=n(YU),t=n(i1());class r{constructor(l){var c,d;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(c=l.shouldThrowOnError)!==null&&c!==void 0?c:!1,this.signal=l.signal,this.isMaybeSingle=(d=l.isMaybeSingle)!==null&&d!==void 0?d:!1,l.fetch?this.fetch=l.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,c){return this.headers=new Headers(this.headers),this.headers.set(l,c),this}then(l,c){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let m=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var y,b,T,C;let N=null,L=null,V=null,$=p.status,Y=p.statusText;if(p.ok){if(this.method!=="HEAD"){const ae=await p.text();ae===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?L=ae:L=JSON.parse(ae))}const ee=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),le=(T=p.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");ee&&le&&le.length>1&&(V=parseInt(le[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(L)&&(L.length>1?(N={code:"PGRST116",details:`Results contain ${L.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},L=null,V=null,$=406,Y="Not Acceptable"):L.length===1?L=L[0]:L=null)}else{const ee=await p.text();try{N=JSON.parse(ee),Array.isArray(N)&&p.status===404&&(L=[],N=null,$=200,Y="OK")}catch{p.status===404&&ee===""?($=204,Y="No Content"):N={message:ee}}if(N&&this.isMaybeSingle&&(!((C=N?.details)===null||C===void 0)&&C.includes("0 rows"))&&(N=null,$=200,Y="OK"),N&&this.shouldThrowOnError)throw new t.default(N)}return{error:N,data:L,count:V,status:$,statusText:Y}});return this.shouldThrowOnError||(m=m.catch(p=>{var y,b,T;return{error:{message:`${(y=p?.name)!==null&&y!==void 0?y:"FetchError"}: ${p?.message}`,details:`${(b=p?.stack)!==null&&b!==void 0?b:""}`,hint:"",code:`${(T=p?.code)!==null&&T!==void 0?T:""}`},data:null,count:null,status:0,statusText:""}})),m.then(l,c)}returns(){return this}overrideTypes(){return this}}return Ho.default=r,Ho}var FE;function o1(){if(FE)return Fo;FE=1;var n=Fo&&Fo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fo,"__esModule",{value:!0});const e=n(a1());class t extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:d,referencedTable:m=d}={}){const p=m?`${m}.order`:"order",y=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${y?`${y},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:d=c}={}){const m=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:d=!1,wal:m=!1,format:p="text"}={}){var y;const b=[a?"analyze":null,l?"verbose":null,c?"settings":null,d?"buffers":null,m?"wal":null].filter(Boolean).join("|"),T=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${T}"; options=${b};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Fo.default=t,Fo}var HE;function fv(){if(HE)return $o;HE=1;var n=$o&&$o.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($o,"__esModule",{value:!0});const e=n(o1());class t extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}in(a,l){const c=Array.from(new Set(l)).map(d=>typeof d=="string"&&new RegExp("[,()]").test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(a,`in.(${c})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:c,type:d}={}){let m="";d==="plain"?m="pl":d==="phrase"?m="ph":d==="websearch"&&(m="w");const p=c===void 0?"":`(${c})`;return this.url.searchParams.append(a,`${m}fts${p}.${l}`),this}match(a){return Object.entries(a).forEach(([l,c])=>{this.url.searchParams.append(l,`eq.${c}`)}),this}not(a,l,c){return this.url.searchParams.append(a,`not.${l}.${c}`),this}or(a,{foreignTable:l,referencedTable:c=l}={}){const d=c?`${c}.or`:"or";return this.url.searchParams.append(d,`(${a})`),this}filter(a,l,c){return this.url.searchParams.append(a,`${l}.${c}`),this}}return $o.default=t,$o}var GE;function l1(){if(GE)return qo;GE=1;var n=qo&&qo.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qo,"__esModule",{value:!0});const e=n(fv());class t{constructor(a,{headers:l={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=d}select(a,{head:l=!1,count:c}={}){const d=l?"HEAD":"GET";let m=!1;const p=(a??"*").split("").map(y=>/\s/.test(y)&&!m?"":(y==='"'&&(m=!m),y)).join("");return this.url.searchParams.set("select",p),c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var d;const m="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(p.length>0){const y=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:d,defaultToNull:m=!0}={}){var p;const y="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),m||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const b=a.reduce((T,C)=>T.concat(Object.keys(C)),[]);if(b.length>0){const T=[...new Set(b)].map(C=>`"${C}"`);this.url.searchParams.set("columns",T.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var c;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return qo.default=t,qo}var KE;function WU(){if(KE)return Bo;KE=1;var n=Bo&&Bo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Bo,"__esModule",{value:!0});const e=n(l1()),t=n(fv());class r{constructor(l,{headers:c={},schema:d,fetch:m}={}){this.url=l,this.headers=new Headers(c),this.schemaName=d,this.fetch=m}from(l){const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new r(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:m=!1,count:p}={}){var y;let b;const T=new URL(`${this.url}/rpc/${l}`);let C;d||m?(b=d?"HEAD":"GET",Object.entries(c).filter(([L,V])=>V!==void 0).map(([L,V])=>[L,Array.isArray(V)?`{${V.join(",")}}`:`${V}`]).forEach(([L,V])=>{T.searchParams.append(L,V)})):(b="POST",C=c);const N=new Headers(this.headers);return p&&N.set("Prefer",`count=${p}`),new t.default({method:b,url:T,headers:N,schema:this.schemaName,body:C,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Bo.default=r,Bo}var QE;function XU(){if(QE)return Yt;QE=1;var n=Yt&&Yt.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.PostgrestError=Yt.PostgrestBuilder=Yt.PostgrestTransformBuilder=Yt.PostgrestFilterBuilder=Yt.PostgrestQueryBuilder=Yt.PostgrestClient=void 0;const e=n(WU());Yt.PostgrestClient=e.default;const t=n(l1());Yt.PostgrestQueryBuilder=t.default;const r=n(fv());Yt.PostgrestFilterBuilder=r.default;const a=n(o1());Yt.PostgrestTransformBuilder=a.default;const l=n(a1());Yt.PostgrestBuilder=l.default;const c=n(i1());return Yt.PostgrestError=c.default,Yt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},Yt}var JU=XU();const ZU=hT(JU),{PostgrestClient:eL,PostgrestQueryBuilder:i3,PostgrestFilterBuilder:a3,PostgrestTransformBuilder:o3,PostgrestBuilder:l3,PostgrestError:c3}=ZU;class tL{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const nL="2.15.5",sL=`realtime-js/${nL}`,rL="1.0.0",Yg=1e4,iL=1e3,aL=100;var Zc;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Zc||(Zc={}));var Vt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Vt||(Vt={}));var gs;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(gs||(gs={}));var Wg;(function(n){n.websocket="websocket"})(Wg||(Wg={}));var Oa;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Oa||(Oa={}));class oL{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const a=t.getUint8(1),l=t.getUint8(2);let c=this.HEADER_LENGTH+2;const d=r.decode(e.slice(c,c+a));c=c+a;const m=r.decode(e.slice(c,c+l));c=c+l;const p=JSON.parse(r.decode(e.slice(c,e.byteLength)));return{ref:null,topic:d,event:m,payload:p}}}class c1{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ct;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ct||(ct={}));const YE=(n,e,t={})=>{var r;const a=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((l,c)=>(l[c]=lL(c,n,e,a),l),{})},lL=(n,e,t,r)=>{const a=e.find(d=>d.name===n),l=a?.type,c=t[n];return l&&!r.includes(l)?u1(l,c):Xg(c)},u1=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return dL(e,t)}switch(n){case ct.bool:return cL(e);case ct.float4:case ct.float8:case ct.int2:case ct.int4:case ct.int8:case ct.numeric:case ct.oid:return uL(e);case ct.json:case ct.jsonb:return hL(e);case ct.timestamp:return fL(e);case ct.abstime:case ct.date:case ct.daterange:case ct.int4range:case ct.int8range:case ct.money:case ct.reltime:case ct.text:case ct.time:case ct.timestamptz:case ct.timetz:case ct.tsrange:case ct.tstzrange:return Xg(e);default:return Xg(e)}},Xg=n=>n,cL=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},uL=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},hL=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},dL=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let l;const c=n.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(d=>u1(e,d))}return n},fL=n=>typeof n=="string"?n.replace(" ","T"):n,h1=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class og{constructor(e,t,r={},a=Yg){this.channel=e,this.event=t,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var WE;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(WE||(WE={}));class eu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=eu.syncState(this.state,a,l,c),this.pendingDiffs.forEach(m=>{this.state=eu.syncDiff(this.state,m,l,c)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=eu.syncDiff(this.state,a,l,c),d())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,a){const l=this.cloneDeep(e),c=this.transformState(t),d={},m={};return this.map(l,(p,y)=>{c[p]||(m[p]=y)}),this.map(c,(p,y)=>{const b=l[p];if(b){const T=y.map(V=>V.presence_ref),C=b.map(V=>V.presence_ref),N=y.filter(V=>C.indexOf(V.presence_ref)<0),L=b.filter(V=>T.indexOf(V.presence_ref)<0);N.length>0&&(d[p]=N),L.length>0&&(m[p]=L)}else d[p]=y}),this.syncDiff(l,{joins:d,leaves:m},r,a)}static syncDiff(e,t,r,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(d,m)=>{var p;const y=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(m),y.length>0){const b=e[d].map(C=>C.presence_ref),T=y.filter(C=>b.indexOf(C.presence_ref)<0);e[d].unshift(...T)}r(d,y,m)}),this.map(c,(d,m)=>{let p=e[d];if(!p)return;const y=m.map(b=>b.presence_ref);p=p.filter(b=>y.indexOf(b.presence_ref)<0),e[d]=p,a(d,p,m),p.length===0&&delete e[d]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const a=e[r];return"metas"in a?t[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[r]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var XE;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(XE||(XE={}));var tu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(tu||(tu={}));var wr;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(wr||(wr={}));class mv{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new og(this,gs.join,this.params,this.timeout),this.rejoinTimer=new c1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gs.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new eu(this),this.broadcastEndpointURL=h1(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:c,presence:d,private:m}}=this.params,p=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(C=>C.filter))!==null&&a!==void 0?a:[],y=!!this.bindings[tu.PRESENCE]&&this.bindings[tu.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,b={},T={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:y}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(C=>e?.(wr.CHANNEL_ERROR,C)),this._onClose(()=>e?.(wr.CLOSED)),this.updateJoinPayload(Object.assign({config:T},b)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:C})=>{var N;if(this.socket.setAuth(),C===void 0){e?.(wr.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,V=(N=L?.length)!==null&&N!==void 0?N:0,$=[];for(let Y=0;Y<V;Y++){const K=L[Y],{filter:{event:ee,schema:le,table:ae,filter:M}}=K,S=C&&C[Y];if(S&&S.event===ee&&S.schema===le&&S.table===ae&&S.filter===M)$.push(Object.assign(Object.assign({},K),{id:S.id}));else{this.unsubscribe(),this.state=Vt.errored,e?.(wr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=$,e&&e(wr.SUBSCRIBED);return}}).receive("error",C=>{this.state=Vt.errored,e?.(wr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{e?.(wr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Vt.joined&&e===tu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:c}=e,m={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,d,m;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||m===void 0)&&m.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new og(this,gs.leave,{},e),r.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new og(this,e,t,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>aL){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var a,l;const c=e.toLocaleLowerCase(),{close:d,error:m,leave:p,join:y}=gs;if(r&&[d,m,p,y].indexOf(c)>=0&&r!==this._joinRef())return;let T=this._onMessage(c,t,r);if(t&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(C=>{var N,L,V;return((N=C.filter)===null||N===void 0?void 0:N.event)==="*"||((V=(L=C.filter)===null||L===void 0?void 0:L.event)===null||V===void 0?void 0:V.toLocaleLowerCase())===c}).map(C=>C.callback(T,r)):(l=this.bindings[c])===null||l===void 0||l.filter(C=>{var N,L,V,$,Y,K;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in C){const ee=C.id,le=(N=C.filter)===null||N===void 0?void 0:N.event;return ee&&((L=t.ids)===null||L===void 0?void 0:L.includes(ee))&&(le==="*"||le?.toLocaleLowerCase()===((V=t.data)===null||V===void 0?void 0:V.type.toLocaleLowerCase()))}else{const ee=(Y=($=C?.filter)===null||$===void 0?void 0:$.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase();return ee==="*"||ee===((K=t?.event)===null||K===void 0?void 0:K.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===c}).map(C=>{if(typeof T=="object"&&"ids"in T){const N=T.data,{schema:L,table:V,commit_timestamp:$,type:Y,errors:K}=N;T=Object.assign(Object.assign({},{schema:L,table:V,commit_timestamp:$,eventType:Y,new:{},old:{},errors:K}),this._getPayloadRecords(N))}C.callback(T,r)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&mv.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gs.close,{},e)}_onError(e){this._on(gs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=YE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=YE(e.columns,e.old_record)),t}}const lg=()=>{},cd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mL=[1e3,2e3,5e3,1e4],pL=1e4,gL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yL{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yg,this.transport=null,this.heartbeatIntervalMs=cd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=lg,this.ref=0,this.reconnectTimer=null,this.logger=lg,this.conn=null,this.sendBuffer=[],this.serializer=new oL,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let l;return a?l=a:typeof fetch>"u"?l=(...c)=>ku(async()=>{const{default:d}=await Promise.resolve().then(()=>Il);return{default:d}},void 0,import.meta.url).then(({default:d})=>d(...c)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...c)=>l(...c)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Wg.websocket}`,this.httpEndpoint=h1(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tL.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:rL}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Zc.connecting:return Oa.Connecting;case Zc.open:return Oa.Open;case Zc.closing:return Oa.Closing;default:return Oa.Closed}}isConnected(){return this.connectionState()===Oa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===r);if(a)return a;{const l=new mv(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:r,payload:a,ref:l}=e,c=()=>{this.encode(e,d=>{var m;(m=this.conn)===null||m===void 0||m.send(d)})};this.log("push",`${t} ${r} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(iL,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},cd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:l,ref:c}=t,d=c?`(${c})`:"",m=l.status||"";this.log("receive",`${m} ${r} ${a} ${d}`.trim(),l),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${r}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([gL],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const a={access_token:t,version:sL};t&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(gs.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new c1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,a,l,c,d,m,p,y;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Yg,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:cd.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:lg,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e?.reconnectAfterMs)!==null&&m!==void 0?m:(b=>mL[b-1]||pL),this.encode=(p=e?.encode)!==null&&p!==void 0?p:((b,T)=>T(JSON.stringify(b))),this.decode=(y=e?.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class pv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function zt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class vL extends pv{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Jg extends pv{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var _L=function(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(y){try{p(r.next(y))}catch(b){c(b)}}function m(y){try{p(r.throw(y))}catch(b){c(b)}}function p(y){y.done?l(y.value):a(y.value).then(d,m)}p((r=r.apply(n,e||[])).next())})};const d1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ku(async()=>{const{default:r}=await Promise.resolve().then(()=>Il);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},bL=()=>_L(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ku(()=>Promise.resolve().then(()=>Il),void 0,import.meta.url)).Response:Response}),Zg=n=>{if(Array.isArray(n))return n.map(t=>Zg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Zg(r)}),e},wL=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ya=function(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(y){try{p(r.next(y))}catch(b){c(b)}}function m(y){try{p(r.throw(y))}catch(b){c(b)}}function p(y){y.done?l(y.value):a(y.value).then(d,m)}p((r=r.apply(n,e||[])).next())})};const cg=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),EL=(n,e,t)=>Ya(void 0,void 0,void 0,function*(){const r=yield bL();n instanceof r&&!t?.noResolveJson?n.json().then(a=>{const l=n.status||500,c=a?.statusCode||l+"";e(new vL(cg(a),l,c))}).catch(a=>{e(new Jg(cg(a),a))}):e(new Jg(cg(n),n))}),TL=(n,e,t,r)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"||!r?a:(wL(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(r)):a.body=r,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Ou(n,e,t,r,a,l){return Ya(this,void 0,void 0,function*(){return new Promise((c,d)=>{n(t,TL(e,r,a,l)).then(m=>{if(!m.ok)throw m;return r?.noResolveJson?m:m.json()}).then(m=>c(m)).catch(m=>EL(m,d,r))})})}function rf(n,e,t,r){return Ya(this,void 0,void 0,function*(){return Ou(n,"GET",e,t,r)})}function Ls(n,e,t,r,a){return Ya(this,void 0,void 0,function*(){return Ou(n,"POST",e,r,a,t)})}function ey(n,e,t,r,a){return Ya(this,void 0,void 0,function*(){return Ou(n,"PUT",e,r,a,t)})}function SL(n,e,t,r){return Ya(this,void 0,void 0,function*(){return Ou(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function f1(n,e,t,r,a){return Ya(this,void 0,void 0,function*(){return Ou(n,"DELETE",e,r,a,t)})}var _n=function(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(y){try{p(r.next(y))}catch(b){c(b)}}function m(y){try{p(r.throw(y))}catch(b){c(b)}}function p(y){y.done?l(y.value):a(y.value).then(d,m)}p((r=r.apply(n,e||[])).next())})};const xL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},JE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class AL{constructor(e,t={},r,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=d1(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,a){return _n(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},JE),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const m=c.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",this.encodeMetadata(m)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl),m&&l.append("metadata",this.encodeMetadata(m))):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,m&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(m)))),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const p=this._removeEmptyFolders(t),y=this._getFinalPath(p),b=yield(e=="PUT"?ey:Ls)(this.fetch,`${this.url}/object/${y}`,l,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:b.Id,fullPath:b.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(zt(l))return{data:null,error:l};throw l}})}upload(e,t,r){return _n(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,a){return _n(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",t);try{let m;const p=Object.assign({upsert:JE.upsert},a),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",p.cacheControl)):(m=r,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const b=yield ey(this.fetch,d.toString(),m,{headers:y});return{data:{path:l,fullPath:b.Key},error:null}}catch(m){if(this.shouldThrowOnError)throw m;if(zt(m))return{data:null,error:m};throw m}})}createSignedUploadUrl(e,t){return _n(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const l=yield Ls(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),c=new URL(this.url+l.url),d=c.searchParams.get("token");if(!d)throw new pv("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}update(e,t,r){return _n(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return _n(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}})}copy(e,t,r){return _n(this,void 0,void 0,function*(){try{return{data:{path:(yield Ls(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return _n(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield Ls(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return _n(this,void 0,void 0,function*(){try{const a=yield Ls(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}})}download(e,t){return _n(this,void 0,void 0,function*(){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(t?.transform||{}),c=l?`?${l}`:"";try{const d=this._getFinalPath(e);return{data:yield(yield rf(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(zt(d))return{data:null,error:d};throw d}})}info(e){return _n(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield rf(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Zg(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}exists(e){return _n(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield SL(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r)&&r instanceof Jg){const a=r.originalError;if([400,404].includes(a?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],l=t?.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const d=typeof t?.transform<"u"?"render/image":"object",m=this.transformOptsToQueryString(t?.transform||{});m!==""&&a.push(m);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${p}`)}}}remove(e){return _n(this,void 0,void 0,function*(){try{return{data:yield f1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}})}list(e,t,r){return _n(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},xL),t),{prefix:e||""});return{data:yield Ls(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}})}listV2(e,t){return _n(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ls(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const RL="2.12.1",CL={"X-Client-Info":`storage-js/${RL}`};var Go=function(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(y){try{p(r.next(y))}catch(b){c(b)}}function m(y){try{p(r.throw(y))}catch(b){c(b)}}function p(y){y.done?l(y.value):a(y.value).then(d,m)}p((r=r.apply(n,e||[])).next())})};class IL{constructor(e,t={},r,a){this.shouldThrowOnError=!1;const l=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},CL),t),this.fetch=d1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Go(this,void 0,void 0,function*(){try{return{data:yield rf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(zt(e))return{data:null,error:e};throw e}})}getBucket(e){return Go(this,void 0,void 0,function*(){try{return{data:yield rf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Go(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Go(this,void 0,void 0,function*(){try{return{data:yield ey(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Go(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Go(this,void 0,void 0,function*(){try{return{data:yield f1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}})}}class NL extends IL{constructor(e,t={},r,a){super(e,t,r,a)}from(e){return new AL(this.url,this.headers,e,this.fetch)}}const kL="2.57.4";let Fc="";typeof Deno<"u"?Fc="deno":typeof document<"u"?Fc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fc="react-native":Fc="node";const OL={"X-Client-Info":`supabase-js-${Fc}/${kL}`},DL={headers:OL},PL={schema:"public"},jL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ML={};var UL=function(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(y){try{p(r.next(y))}catch(b){c(b)}}function m(y){try{p(r.throw(y))}catch(b){c(b)}}function p(y){y.done?l(y.value):a(y.value).then(d,m)}p((r=r.apply(n,e||[])).next())})};const LL=n=>{let e;return n?e=n:typeof fetch>"u"?e=s1:e=fetch,(...t)=>e(...t)},VL=()=>typeof Headers>"u"?r1:Headers,zL=(n,e,t)=>{const r=LL(t),a=VL();return(l,c)=>UL(void 0,void 0,void 0,function*(){var d;const m=(d=yield e())!==null&&d!==void 0?d:n;let p=new a(c?.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),r(l,Object.assign(Object.assign({},c),{headers:p}))})};var BL=function(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(y){try{p(r.next(y))}catch(b){c(b)}}function m(y){try{p(r.throw(y))}catch(b){c(b)}}function p(y){y.done?l(y.value):a(y.value).then(d,m)}p((r=r.apply(n,e||[])).next())})};function qL(n){return n.endsWith("/")?n:n+"/"}function $L(n,e){var t,r;const{db:a,auth:l,realtime:c,global:d}=n,{db:m,auth:p,realtime:y,global:b}=e,T={db:Object.assign(Object.assign({},m),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},y),c),storage:{},global:Object.assign(Object.assign(Object.assign({},b),d),{headers:Object.assign(Object.assign({},(t=b?.headers)!==null&&t!==void 0?t:{}),(r=d?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>BL(this,void 0,void 0,function*(){return""})};return n.accessToken?T.accessToken=n.accessToken:delete T.accessToken,T}function FL(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qL(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const m1="2.71.1",tl=30*1e3,ty=3,ug=ty*tl,HL="http://localhost:9999",GL="supabase.auth.token",KL={"X-Client-Info":`gotrue-js/${m1}`},ny="X-Supabase-Api-Version",p1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,YL=600*1e3;class gv extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function je(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class WL extends gv{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function XL(n){return je(n)&&n.name==="AuthApiError"}class g1 extends gv{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class $i extends gv{constructor(e,t,r,a){super(e,r,a),this.name=t,this.status=r}}class wi extends $i{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function JL(n){return je(n)&&n.name==="AuthSessionMissingError"}class ud extends $i{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hd extends $i{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dd extends $i{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ZL(n){return je(n)&&n.name==="AuthImplicitGrantRedirectError"}class ZE extends $i{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sy extends $i{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function hg(n){return je(n)&&n.name==="AuthRetryableFetchError"}class eT extends $i{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class ry extends $i{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const af="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tT=` 	
\r=`.split(""),eV=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<tT.length;e+=1)n[tT[e].charCodeAt(0)]=-2;for(let e=0;e<af.length;e+=1)n[af[e].charCodeAt(0)]=e;return n})();function nT(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(af[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(af[r]),e.queuedBits-=6}}function y1(n,e,t){const r=eV[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function sT(n){const e=[],t=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{sV(c,r,t)};for(let c=0;c<n.length;c+=1)y1(n.charCodeAt(c),a,l);return e.join("")}function tV(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function nV(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}tV(r,e)}}function sV(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function rV(n){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)y1(n.charCodeAt(a),t,r);return new Uint8Array(e)}function iV(n){const e=[];return nV(n,t=>e.push(t)),new Uint8Array(e)}function aV(n){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};return n.forEach(a=>nT(a,t,r)),nT(null,t,r),e.join("")}function oV(n){return Math.round(Date.now()/1e3)+n}function lV(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ps=()=>typeof window<"u"&&typeof document<"u",Ca={tested:!1,writable:!1},v1=()=>{if(!ps())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ca.tested)return Ca.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ca.tested=!0,Ca.writable=!0}catch{Ca.tested=!0,Ca.writable=!1}return Ca.writable};function cV(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((r,a)=>{e[a]=r}),e}const _1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ku(async()=>{const{default:r}=await Promise.resolve().then(()=>Il);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},uV=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",nl=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ia=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},bi=async(n,e)=>{await n.removeItem(e)};class Mf{constructor(){this.promise=new Mf.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Mf.promiseConstructor=Promise;function dg(n){const e=n.split(".");if(e.length!==3)throw new ry("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!QL.test(e[r]))throw new ry("JWT not in base64url format");return{header:JSON.parse(sT(e[0])),payload:JSON.parse(sT(e[1])),signature:rV(e[2]),raw:{header:e[0],payload:e[1]}}}async function hV(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function dV(n,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await n(l);if(!e(l,null,c)){r(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function fV(n){return("0"+n.toString(16)).substr(-2)}function mV(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,fV).join("")}async function pV(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function gV(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await pV(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ko(n,e,t=!1){const r=mV();let a=r;t&&(a+="/PASSWORD_RECOVERY"),await nl(n,`${e}-code-verifier`,a);const l=await gV(r);return[l,r===l?"plain":"s256"]}const yV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vV(n){const e=n.headers.get(ny);if(!e||!e.match(yV))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _V(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function bV(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wV=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qo(n){if(!wV.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fg(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function rT(n){return JSON.parse(JSON.stringify(n))}var EV=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t};const ka=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),TV=[502,503,504];async function iT(n){var e;if(!uV(n))throw new sy(ka(n),0);if(TV.includes(n.status))throw new sy(ka(n),n.status);let t;try{t=await n.json()}catch(l){throw new g1(ka(l),l)}let r;const a=vV(n);if(a&&a.getTime()>=p1["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new eT(ka(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new wi}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new eT(ka(t),n.status,t.weak_password.reasons);throw new WL(ka(t),n.status||500,r)}const SV=(n,e,t,r)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),t))};async function $e(n,e,t,r){var a;const l=Object.assign({},r?.headers);l[ny]||(l[ny]=p1["2024-01-01"].name),r?.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const c=(a=r?.query)!==null&&a!==void 0?a:{};r?.redirectTo&&(c.redirect_to=r.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",m=await xV(n,e,t+d,{headers:l,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(m):{data:Object.assign({},m),error:null}}async function xV(n,e,t,r,a,l){const c=SV(e,r,a,l);let d;try{d=await n(t,Object.assign({},c))}catch(m){throw console.error(m),new sy(ka(m),0)}if(d.ok||await iT(d),r?.noResolveJson)return d;try{return await d.json()}catch(m){await iT(m)}}function br(n){var e;let t=null;IV(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=oV(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function aT(n){const e=br(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ai(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function AV(n){return{data:n,error:null}}function RV(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l}=n,c=EV(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l},m=Object.assign({},c);return{data:{properties:d,user:m},error:null}}function CV(n){return n}function IV(n){return n.access_token&&n.refresh_token&&n.expires_in}const mg=["global","local","others"];var NV=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(n);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(t[r[a]]=n[r[a]]);return t};class kV{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=_1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=mg[0]){if(mg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mg.join(", ")}`);try{return await $e(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await $e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ai})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=NV(e,["options"]),a=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(a.new_email=r?.newEmail,delete a.newEmail),await $e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:RV,redirectTo:t?.redirectTo})}catch(t){if(je(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ai})}catch(t){if(je(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,a,l,c,d,m;try{const p={nextPage:null,lastPage:0,total:0},y=await $e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:CV});if(y.error)throw y.error;const b=await y.json(),T=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,C=(m=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&m!==void 0?m:[];return C.length>0&&(C.forEach(N=>{const L=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),V=JSON.parse(N.split(";")[1].split("=")[1]);p[`${V}Page`]=L}),p.total=parseInt(T)),{data:Object.assign(Object.assign({},b),p),error:null}}catch(p){if(je(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Qo(e);try{return await $e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ai})}catch(t){if(je(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Qo(e);try{return await $e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ai})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Qo(e);try{return await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ai})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Qo(e.userId);try{const{data:t,error:r}=await $e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:r}}catch(t){if(je(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Qo(e.userId),Qo(e.id);try{return{data:await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(je(t))return{data:null,error:t};throw t}}}function oT(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function OV(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Yo={debug:!!(globalThis&&v1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class b1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class DV extends b1{}async function PV(n,e,t){Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new DV(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Yo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}OV();const jV={url:HL,storageKey:GL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:KL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lT(n,e,t){return await t()}const Wo={};class mu{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=mu.nextInstanceID,mu.nextInstanceID+=1,this.instanceID>0&&ps()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},jV),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new kV({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=_1(a.fetch),this.lock=a.lock||lT,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ps()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=PV:this.lock=lT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:v1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=oT(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=oT(this.memoryStorage)),ps()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Wo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Wo[this.storageKey]=Object.assign(Object.assign({},Wo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Wo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Wo[this.storageKey]=Object.assign(Object.assign({},Wo[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${m1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=cV(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ps()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),ZL(l)){const m=(e=l.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return je(t)?{error:t}:{error:new g1("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,a;try{const l=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:br}),{data:c,error:d}=l;if(d||!c)return{data:{user:null,session:null},error:d};const m=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(l){if(je(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var t,r,a;try{let l;if("email"in e){const{email:y,password:b,options:T}=e;let C=null,N=null;this.flowType==="pkce"&&([C,N]=await Ko(this.storage,this.storageKey)),l=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T?.emailRedirectTo,body:{email:y,password:b,data:(t=T?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:T?.captchaToken},code_challenge:C,code_challenge_method:N},xform:br})}else if("phone"in e){const{phone:y,password:b,options:T}=e;l=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(r=T?.data)!==null&&r!==void 0?r:{},channel:(a=T?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:T?.captchaToken}},xform:br})}else throw new hd("You must provide either an email or phone number and a password");const{data:c,error:d}=l;if(d||!c)return{data:{user:null,session:null},error:d};const m=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(l){if(je(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:d}=e;t=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:aT})}else if("phone"in e){const{phone:l,password:c,options:d}=e;t=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:aT})}else throw new hd("You must provide either an email or phone number and a password");const{data:r,error:a}=t;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ud}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(t){if(je(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,a,l,c,d,m,p,y,b,T,C;let N,L;if("message"in e)N=e.message,L=e.signature;else{const{chain:V,wallet:$,statement:Y,options:K}=e;let ee;if(ps())if(typeof $=="object")ee=$;else{const ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))ee=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof $!="object"||!K?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ee=$}const le=new URL((t=K?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in ee&&ee.signIn){const ae=await ee.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},K?.signInWithSolana),{version:"1",domain:le.host,uri:le.href}),Y?{statement:Y}:null));let M;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")M=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)M=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)N=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),L=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ee)||typeof ee.signMessage!="function"||!("publicKey"in ee)||typeof ee!="object"||!ee.publicKey||!("toBase58"in ee.publicKey)||typeof ee.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${le.host} wants you to sign in with your Solana account:`,ee.publicKey.toBase58(),...Y?["",Y,""]:[""],"Version: 1",`URI: ${le.href}`,`Issued At: ${(a=(r=K?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=K?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${K.signInWithSolana.notBefore}`]:[],...!((c=K?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${K.signInWithSolana.expirationTime}`]:[],...!((d=K?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${K.signInWithSolana.chainId}`]:[],...!((m=K?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${K.signInWithSolana.nonce}`]:[],...!((p=K?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${K.signInWithSolana.requestId}`]:[],...!((b=(y=K?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...K.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const ae=await ee.signMessage(new TextEncoder().encode(N),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=ae}}try{const{data:V,error:$}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:aV(L)},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:br});if($)throw $;return!V||!V.session||!V.user?{data:{user:null,session:null},error:new ud}:(V.session&&(await this._saveSession(V.session),await this._notifyAllSubscribers("SIGNED_IN",V.session)),{data:Object.assign({},V),error:$})}catch(V){if(je(V))return{data:{user:null,session:null},error:V};throw V}}async _exchangeCodeForSession(e){const t=await Ia(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(t??"").split("/");try{const{data:l,error:c}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:br});if(await bi(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new ud}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(je(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:t,provider:r,token:a,access_token:l,nonce:c}=e,d=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:br}),{data:m,error:p}=d;return p?{data:{user:null,session:null},error:p}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new ud}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),{data:m,error:p})}catch(t){if(je(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,a,l,c;try{if("email"in e){const{email:d,options:m}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await Ko(this.storage,this.storageKey));const{error:b}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(t=m?.data)!==null&&t!==void 0?t:{},create_user:(r=m?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:m?.emailRedirectTo});return{data:{user:null,session:null},error:b}}if("phone"in e){const{phone:d,options:m}=e,{data:p,error:y}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=m?.data)!==null&&a!==void 0?a:{},create_user:(l=m?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(c=m?.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:y}}throw new hd("You must provide either an email or phone number.")}catch(d){if(je(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var t,r;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:d}=await $e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:br});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const m=c.session,p=c.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),{data:{user:p,session:m},error:null}}catch(a){if(je(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,r,a;try{let l=null,c=null;return this.flowType==="pkce"&&([l,c]=await Ko(this.storage,this.storageKey)),await $e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:AV})}catch(l){if(je(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new wi;const{error:a}=await $e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(je(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:c}=await $e(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:c,error:d}=await $e(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return{data:{user:null,session:null,messageId:c?.message_id},error:d}}throw new hd("You must provide either an email or phone number and a type")}catch(t){if(je(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ia(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ug:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Ia(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=fg()}if(this.storage.isServer&&e.user){let c=this.suppressGetSessionWarning;e=new Proxy(e,{get:(m,p,y)=>(!c&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(m,p,y))})}return{data:{session:e},error:null}}const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ai}):await this._useSession(async t=>{var r,a,l;const{data:c,error:d}=t;if(d)throw d;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new wi}:await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Ai})})}catch(t){if(je(t))return JL(t)&&(await this._removeSession(),await bi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new wi;const c=a.session;let d=null,m=null;this.flowType==="pkce"&&e.email!=null&&([d,m]=await Ko(this.storage,this.storageKey));const{data:p,error:y}=await $e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:m}),jwt:c.access_token,xform:Ai});if(y)throw y;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(r){if(je(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wi;const t=Date.now()/1e3;let r=t,a=!0,l=null;const{payload:c}=dg(e.access_token);if(c.exp&&(r=c.exp,a=r<=t),a){const{session:d,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return{data:{user:null,session:null},error:m};if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:m}=await this._getUser(e.access_token);if(m)throw m;l={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(t){if(je(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:c,error:d}=t;if(d)throw d;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new wi;const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(je(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ps())throw new dd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ZE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dd("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ZE("No code detected.");const{data:Y,error:K}=await this._exchangeCodeForSession(e.code);if(K)throw K;const ee=new URL(window.location.href);return ee.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ee.toString()),{data:{session:Y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:d,expires_at:m,token_type:p}=e;if(!l||!d||!c||!p)throw new dd("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(d);let T=y+b;m&&(T=parseInt(m));const C=T-y;C*1e3<=tl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${b}s`);const N=T-b;y-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,T,y):y-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,T,y);const{data:L,error:V}=await this._getUser(l);if(V)throw V;const $={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:b,expires_at:T,refresh_token:c,token_type:p,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:$,redirectType:e.type},error:null}}catch(r){if(je(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ia(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return{error:l};const c=(r=a.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(XL(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await bi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=lV(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Ko(this.storage,this.storageKey,!0));try{return await $e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(je(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(je(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:a}=await this._useSession(async l=>{var c,d,m,p,y;const{data:b,error:T}=l;if(T)throw T;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await $e(this.fetch,"GET",C,{headers:this.headers,jwt:(y=(p=b.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return ps()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(je(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)throw c;return await $e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(je(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await dV(async a=>(a>0&&await hV(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await $e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:br})),(a,l)=>{const c=200*Math.pow(2,a);return l&&hg(l)&&Date.now()+c-r<tl})}catch(r){if(this._debug(t,"error",r),je(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ps()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Ia(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Ia(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await nl(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:fg()}else if(a&&!a.user&&!a.user){const c=await Ia(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await bi(this.storage,this.storageKey+"-user"),await nl(this.storage,this.storageKey,a)):a.user=fg()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ug;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${ug}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),hg(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Mf;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new wi;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={session:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),je(l)){const c={session:null,error:l};return hg(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,t)}catch(m){l.push(m)}});if(await Promise.all(c),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await nl(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=rT(a);await nl(this.storage,this.storageKey,l)}else{const a=rT(t);await nl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await bi(this.storage,this.storageKey),await bi(this.storage,this.storageKey+"-code-verifier"),await bi(this.storage,this.storageKey+"-user"),this.userStorage&&await bi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ps()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),tl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/tl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${tl}ms, refresh threshold is ${ty} ticks`),a<=ty&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof b1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ps()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const a=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,c]=await Ko(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(r?.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r?.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;return l?{data:null,error:l}:await $e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(je(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)return{data:null,error:c};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:m,error:p}=await $e(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((a=m?.totp)===null||a===void 0)&&a.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),{data:m,error:null})})}catch(t){if(je(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return{data:null,error:l};const{data:c,error:d}=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:d})})}catch(t){if(je(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;return l?{data:null,error:l}:await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(je(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],a=r.filter(c=>c.factor_type==="totp"&&c.status==="verified"),l=r.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:r,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:a},error:l}=e;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=dg(a.access_token);let d=null;c.aal&&(d=c.aal);let m=d;((r=(t=a.user.factors)===null||t===void 0?void 0:t.filter(b=>b.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const y=c.amr||[];return{data:{currentLevel:d,nextLevel:m,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(d=>d.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(d=>d.kid===e),r&&this.jwks_cached_at+YL>a)return r;const{data:l,error:c}=await $e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,r=l.keys.find(d=>d.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:C,error:N}=await this.getSession();if(N||!C.session)return{data:null,error:N};r=C.session.access_token}const{header:a,payload:l,signature:c,raw:{header:d,payload:m}}=dg(r);t?.allowExpired||_V(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!p){const{error:C}=await this.getUser(r);if(C)throw C;return{data:{claims:l,header:a,signature:c},error:null}}const y=bV(a.alg),b=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,c,iV(`${d}.${m}`)))throw new ry("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(r){if(je(r))return{data:null,error:r};throw r}}}mu.nextInstanceID=0;const MV=mu;class UV extends MV{constructor(e){super(e)}}var LV=function(n,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function d(y){try{p(r.next(y))}catch(b){c(b)}}function m(y){try{p(r.throw(y))}catch(b){c(b)}}function p(y){y.done?l(y.value):a(y.value).then(d,m)}p((r=r.apply(n,e||[])).next())})};class VV{constructor(e,t,r){var a,l,c;this.supabaseUrl=e,this.supabaseKey=t;const d=FL(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const m=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:PL,realtime:ML,auth:Object.assign(Object.assign({},jL),{storageKey:m}),global:DL},y=$L(r??{},p);this.storageKey=(a=y.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=y.global.headers)!==null&&l!==void 0?l:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(b,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=y.auth)!==null&&c!==void 0?c:{},this.headers,y.global.fetch),this.fetch=zL(t,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new eL(new URL("rest/v1",d).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new NL(this.storageUrl.href,this.headers,this.fetch,r?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new FU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return LV(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,storageKey:c,flowType:d,lock:m,debug:p},y,b){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UV({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),y),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,flowType:d,lock:m,debug:p,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new yL(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zV=(n,e,t)=>new VV(n,e,t);function BV(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}BV()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qV="https://wrhelmewiozvutvjhlcc.supabase.co",$V="sb_publishable_tXzFIBPWKCJC59SAMm01aQ_DV3EYg44",FV=zV(qV,$V),HV=QT("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function iy({className:n,variant:e,...t}){return v.jsx("div",{className:ht(HV({variant:e}),n),...t})}const GV=({profile:n,onProfileEdit:e,onLogout:t,onNavigateToSurveys:r})=>{const[a,l]=D.useState([]),[c,d]=D.useState([]),[m,p]=D.useState({}),[y,b]=D.useState(""),[T,C]=D.useState(""),[N,L]=D.useState(!1),[V,$]=D.useState(!1),[Y,K]=D.useState(""),[ee,le]=D.useState([]),[ae,M]=D.useState([]);D.useEffect(()=>{const B=localStorage.getItem("currentClientAdmin");if(B){const{email:ue}=JSON.parse(B),P=`surveyUsers_${ue}`,J=localStorage.getItem(P);if(J){const ce=JSON.parse(J).map(fe=>({id:fe.id.toString(),name:fe.fullName}));le(ce)}}if(B){const{email:ue}=JSON.parse(B),P=`createdSurveys_${ue}`,J=localStorage.getItem(P);J&&M(JSON.parse(J))}const oe=()=>{const ue=localStorage.getItem("currentClientAdmin");if(ue){const{email:P}=JSON.parse(ue),J=`createdSurveys_${P}`,he=localStorage.getItem(J);M(he?JSON.parse(he):[])}},te=()=>{const ue=localStorage.getItem("currentClientAdmin");if(ue){const{email:P}=JSON.parse(ue),J=`surveyUsers_${P}`,he=localStorage.getItem(J);if(he){const fe=JSON.parse(he).map(Ne=>({id:Ne.id.toString(),name:Ne.fullName}));le(fe)}else le([])}};return window.addEventListener("surveysUpdated",oe),window.addEventListener("usersUpdated",te),()=>{window.removeEventListener("surveysUpdated",oe),window.removeEventListener("usersUpdated",te)}},[]),D.useEffect(()=>{const B=localStorage.getItem("userAssignments");B&&p(JSON.parse(B))},[]),D.useEffect(()=>{Object.keys(m).length>0&&localStorage.setItem("userAssignments",JSON.stringify(m))},[m]);const S=ee.filter(B=>B.name.toLowerCase().includes(y.toLowerCase())&&!a.includes(B.id)),R=ae.filter(B=>B.name.toLowerCase().includes(T.toLowerCase())&&!c.includes(B.id)),O=B=>{c.includes(B)||d([...c,B]),C(""),$(!1)},j=B=>{a.includes(B)||l([...a,B]),b(""),L(!1)},k=B=>{l(a.filter(oe=>oe!==B))},I=B=>{d(c.filter(oe=>oe!==B))},Se=()=>{if(a.length>0&&c.length>0){const B=c.map(ue=>({...ae.find(P=>P.id===ue),active:!0})),oe={...m};a.forEach(ue=>{oe[ue]=[...oe[ue]||[],...B.filter(P=>!(oe[ue]||[]).some(J=>J.id===P.id))]}),p(oe);const te=a.map(ue=>ee.find(P=>P.id===ue)?.name).join(", ");K(`Successfully assigned ${c.length} survey${c.length>1?"s":""} to ${te}`),setTimeout(()=>K(""),3e3),l([]),d([]),b(""),C("")}},be=(B,oe)=>{p(te=>({...te,[B]:te[B].map(ue=>ue.id===oe?{...ue,active:!ue.active}:ue)}))};return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx(hf,{profile:n,onProfileEdit:e,onLogout:t,onCreateSurvey:r,onNavigateToSurveys:r}),v.jsx("div",{className:"pt-20 p-4 sm:p-6 md:p-8",children:v.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 md:gap-6 xl:px-10",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"mb-4 md:mb-6",children:[v.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl xl:text-3xl font-medium",children:"Assign Surveys to Users"}),v.jsx("h1",{className:"text-sm md:text-base lg:text-lg text-gray-400 font-extralight mt-1",children:"Select users and assign surveys to them"})]}),v.jsxs(bn,{className:"shadow-lg rounded-none",children:[v.jsx(ys,{children:v.jsx(ns,{className:"text-base md:text-lg lg:text-xl text-gray-800",children:"Assignment Panel"})}),v.jsx(hn,{children:v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx("label",{className:"block text-xs md:text-sm font-bold text-black mb-2",children:"SELECT USERS"}),v.jsx(mt,{type:"text",value:y,onChange:B=>{b(B.target.value),L(!0)},onFocus:()=>L(!0),onBlur:()=>setTimeout(()=>L(!1),200),placeholder:ee.length===0?"No users available. Create users first.":"Search and select users...",className:"rounded-[5px] border-gray-400 p-3 text-sm w-full",disabled:ee.length===0}),N&&S.length>0&&v.jsx("div",{className:"absolute z-10 w-full bg-white border border-gray-400 rounded-[5px] mt-1 max-h-40 overflow-y-auto",children:S.map(B=>v.jsxs("div",{onClick:()=>j(B.id),className:"p-3 hover:bg-gray-100 cursor-pointer text-sm flex items-center",children:[v.jsx("input",{type:"checkbox",checked:a.includes(B.id),readOnly:!0,className:"mr-2"}),B.name]},B.id))}),a.length>0&&v.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map(B=>{const oe=ee.find(te=>te.id===B);return v.jsxs(iy,{variant:"secondary",className:"flex items-center gap-1",children:[oe?.name,v.jsx("button",{onClick:()=>k(B),className:"ml-1 text-xs hover:text-red-500",children:""})]},B)})})]}),v.jsxs("div",{className:"relative",children:[v.jsx("label",{className:"block text-xs md:text-sm font-bold text-black mb-2",children:"SELECT SURVEYS"}),v.jsx(mt,{type:"text",value:T,onChange:B=>{C(B.target.value),$(!0)},onFocus:()=>$(!0),onBlur:()=>setTimeout(()=>$(!1),200),placeholder:ae.length===0?"No surveys available. Create surveys first.":"Search and select surveys...",className:"rounded-[5px] border-gray-400 p-3 text-sm w-full",disabled:ae.length===0}),V&&R.length>0&&v.jsx("div",{className:"absolute z-10 w-full bg-white border border-gray-400 rounded-[5px] mt-1 max-h-40 overflow-y-auto",children:R.map(B=>v.jsxs("div",{onClick:()=>O(B.id),className:"p-3 hover:bg-gray-100 cursor-pointer text-sm flex items-center",children:[v.jsx("input",{type:"checkbox",checked:!1,readOnly:!0,className:"mr-2"}),B.name]},B.id))}),c.length>0&&v.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.map(B=>{const oe=ae.find(te=>te.id===B);return v.jsxs(iy,{variant:"secondary",className:"flex items-center gap-1",children:[oe?.name,v.jsx("button",{onClick:()=>I(B),className:"ml-1 text-xs hover:text-red-500",children:""})]},B)})})]}),Y&&v.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded text-sm",children:Y}),v.jsxs(De,{onClick:Se,disabled:a.length===0||c.length===0,className:"w-full bg-gradient-to-r from-blue-700 to-purple-700 hover:from-blue-600 hover:to-purple-700 p-4 text-sm",children:["Assign Survey",c.length>1?"s":""," to User",a.length>1?"s":""]})]})})]})]}),v.jsx("div",{className:"w-full lg:w-80 lg:flex-shrink-0",children:v.jsx(KV,{userAssignments:m,users:ee,toggleSurveyStatus:be,surveys:ae,setUserAssignments:p})})]})})]})},KV=({userAssignments:n,users:e,toggleSurveyStatus:t,surveys:r,setUserAssignments:a})=>{const[l,c]=D.useState(""),[d,m]=D.useState(null),[p,y]=D.useState(""),[b,T]=D.useState(!1),[C,N]=D.useState(null),[L,V]=D.useState(!1),[$,Y]=D.useState([]),[K,ee]=D.useState([]),le=Object.entries(n).filter(([k,I])=>{const Se=e.find(be=>be.id===k);return Se&&Se.name.toLowerCase().includes(l.toLowerCase())}),ae=r.filter(k=>k.name.toLowerCase().includes(p.toLowerCase())&&!(n[d?.id]||[]).some(I=>I.id===k.id)&&!$.includes(k.id)),M=k=>{$.includes(k)||Y([...$,k]),y(""),T(!1)},S=k=>{Y($.filter(I=>I!==k))},R=k=>{K.includes(k)?ee(K.filter(I=>I!==k)):ee([...K,k])},O=()=>{if(d){const k=$.map(I=>({...r.find(be=>be.id===I),active:!0}));a(I=>({...I,[d.id]:[...(I[d.id]||[]).filter(Se=>!K.includes(Se.id)),...k]})),Y([]),ee([]),m(null)}},j=()=>{C&&d&&a(k=>({...k,[d.id]:k[d.id].filter(I=>I.id!==C.id)})),V(!1),N(null)};return v.jsxs("div",{className:"lg:w-80 lg:shadow-lg lg:h-screen lg:fixed lg:right-0 lg:top-0 lg:z-40 lg:bg-white lg:overflow-y-auto w-full bg-transparent",children:[v.jsxs("div",{className:"lg:p-4 lg:mt-20 p-4 space-y-3",children:[v.jsxs("div",{className:"mb-3",children:[v.jsx(ns,{className:"text-base lg:text-lg font-semibold text-gray-800 lg:text-center",children:"Assigned Surveys"}),v.jsx("div",{className:"mt-3",children:v.jsx(mt,{type:"text",placeholder:"Search users...",value:l,onChange:k=>c(k.target.value),className:"text-sm"})})]}),v.jsx(hn,{className:"p-0",children:v.jsxs("div",{className:"space-y-2 lg:space-y-3",children:[le.map(([k,I])=>{const Se=e.find(be=>be.id===k);return!Se||I.length===0?null:v.jsxs("div",{className:"p-3 lg:p-4 border border-gray-300 rounded-lg bg-white hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>m({id:k,name:Se.name}),children:[v.jsx("h4",{className:"font-medium text-gray-800 text-xs lg:text-sm break-words mb-2",children:Se.name}),v.jsx("div",{className:"space-y-1",children:I.map(be=>v.jsxs("div",{className:"flex items-center justify-between py-1",children:[v.jsx("span",{className:`text-xs break-words flex-1 ${be.active?"text-gray-600":"line-through text-gray-400"}`,children:be.name}),v.jsx(De,{variant:be.active?"destructive":"default",size:"sm",onClick:B=>{B.stopPropagation(),t(k,be.id)},className:"text-xs ml-2 px-2 py-1",children:be.active?"Deactivate":"Activate"})]},be.id))})]},k)}),Object.keys(n).length===0&&v.jsx("div",{className:"p-3 lg:p-4 border border-gray-300 rounded-lg bg-white",children:v.jsx("p",{className:"text-gray-500 text-xs",children:"No surveys assigned yet"})})]})})]}),d&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-lg p-4 sm:p-6 w-full max-w-sm sm:max-w-md lg:max-w-lg max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"User Management"}),v.jsx("button",{onClick:()=>{m(null),Y([]),ee([])},className:"text-gray-500 hover:text-gray-700 text-xl",children:""})]}),v.jsx("div",{className:"mb-4",children:v.jsx("h4",{className:"text-base sm:text-lg font-medium text-gray-700 mb-3",children:d.name})}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-xs sm:text-sm font-bold text-black mb-2",children:"ADD SURVEY"}),v.jsxs("div",{className:"relative",children:[v.jsx(mt,{type:"text",value:p,onChange:k=>{y(k.target.value),T(!0)},onFocus:()=>T(!0),onBlur:()=>setTimeout(()=>T(!1),200),placeholder:ae.length===0?"No new surveys available":"Search and select surveys...",className:"text-sm rounded-[5px] border-gray-400",disabled:ae.length===0}),b&&ae.length>0&&v.jsx("div",{className:"absolute z-10 w-full bg-white border border-gray-400 rounded-[5px] mt-1 max-h-40 overflow-y-auto",children:ae.map(k=>v.jsxs("div",{onClick:()=>M(k.id),className:"p-3 hover:bg-gray-100 cursor-pointer text-sm flex items-center",children:[v.jsx("input",{type:"checkbox",checked:!1,readOnly:!0,className:"mr-2"}),k.name]},k.id))}),$.length>0&&v.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:$.map(k=>{const I=r.find(Se=>Se.id===k);return v.jsxs(iy,{variant:"secondary",className:"flex items-center gap-1",children:[I?.name,v.jsx("button",{onClick:()=>S(k),className:"ml-1 text-xs hover:text-red-500",children:""})]},k)})})]})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-xs sm:text-sm font-bold text-black mb-2",children:"CURRENT SURVEYS"}),v.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(n[d.id]||[]).map(k=>v.jsxs("div",{className:`flex items-center justify-between p-2 border rounded ${K.includes(k.id)?"bg-red-50 border-red-200":"bg-white"}`,children:[v.jsx("span",{className:`text-sm flex-1 ${K.includes(k.id)?"line-through text-red-400":"text-gray-700"}`,children:k.name}),v.jsx(De,{variant:K.includes(k.id)?"outline":"destructive",size:"sm",onClick:()=>R(k.id),className:"text-xs px-2 py-1",children:K.includes(k.id)?"Undo":"Remove"})]},k.id)),!(n[d.id]||[]).length&&v.jsx("p",{className:"text-gray-500 text-sm",children:"No surveys currently assigned"})]})]}),v.jsx(De,{onClick:O,className:"w-full bg-gradient-to-r from-blue-700 to-purple-700 hover:from-blue-600 hover:to-purple-700 text-sm",children:"Update"})]})}),L&&v.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-sm",children:[v.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Confirm Delete"}),v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Are you sure you want to remove "',C?.name,'" from ',d?.name,"?"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx(De,{variant:"outline",onClick:()=>V(!1),className:"flex-1",children:"Cancel"}),v.jsx(De,{variant:"destructive",onClick:j,className:"flex-1",children:"Delete"})]})]})})]})},QV=({activeTab:n,setActiveTab:e,onSidebarToggle:t})=>{const[r,a]=D.useState(!0);D.useEffect(()=>{t&&t(r)},[r,t]);const l=[{id:"clients",label:"Create Clients",icon:v.jsx(bg,{className:"w-4 h-4"})},{id:"users",label:"Survey Users",icon:v.jsx(Dd,{className:"w-4 h-4"})},{id:"results",label:"Survey Results",icon:v.jsx(RN,{className:"w-4 h-4"})}],c=()=>{a(!r)};return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:`fixed left-0 top-0 h-full bg-white shadow-lg transition-all duration-300 z-40 ${r?"w-64":"w-16"}`,children:[v.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[v.jsxs("div",{className:`flex items-center gap-3 ${r?"block":"hidden"}`,children:[v.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:v.jsx("span",{className:"text-white font-bold text-sm",children:"SA"})}),v.jsx("span",{className:"font-semibold text-gray-800",children:"Super Admin"})]}),!r&&v.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mx-auto",children:v.jsx("span",{className:"text-white font-bold text-sm",children:"SA"})}),v.jsx("button",{onClick:c,className:"p-1 rounded-md hover:bg-gray-100 transition-colors",children:r?v.jsx(IN,{className:"w-4 h-4"}):v.jsx(kN,{className:"w-4 h-4"})})]}),v.jsx("nav",{className:"p-4 space-y-2",children:l.map(d=>v.jsxs("button",{onClick:()=>e(d.id),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-colors group ${n===d.id?"bg-blue-50 text-blue-600 border-r-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,title:r?"":d.label,children:[v.jsx("div",{className:"flex-shrink-0",children:d.icon}),v.jsx("span",{className:`transition-all duration-300 ${r?"opacity-100 translate-x-0":"opacity-0 -translate-x-2 w-0 overflow-hidden"}`,children:d.label})]},d.id))})]}),v.jsx("div",{className:`lg:hidden fixed inset-0 bg-black transition-opacity z-30 ${r?"opacity-50":"opacity-0 pointer-events-none"}`,onClick:c})]})},YV=({selectedClientId:n,clientName:e})=>{const[t,r]=D.useState([]),[a,l]=D.useState(!1),[c,d]=D.useState({name:"",email:""}),[m,p]=D.useState("");D.useEffect(()=>{n&&y()},[n]);const y=async()=>{try{l(!0);const N=hu(zs,"users"),L=fA(N,mA("clientId","==",n)),$=(await Zy(L)).docs.map(Y=>({id:Y.id,...Y.data()}));r($)}catch(N){console.error("Error loading users:",N),p(" Failed to load users")}finally{l(!1)}},b=async()=>{if(!c.name.trim()||!c.email.trim()){p("Please fill in all required fields");return}if(!n){p("Please select a client first");return}try{l(!0),console.log("Creating survey user for:",c.email.trim());const N={name:c.name.trim(),email:c.email.trim(),role:"survey_person",isActive:!1,clientId:n,clientName:e,firebaseUid:null,createdAt:new Date().toISOString(),emailVerified:!1,passwordSet:!1,inviteStatus:"pending"};console.log("Creating Firestore document...");const L=await yA(hu(zs,"users"),N);console.log("Firestore document created:",L.id),d({name:"",email:""}),p(` Survey user created! Email invitation will be sent shortly to ${c.email}`),setTimeout(()=>p(""),8e3),y()}catch(N){console.error("Error creating survey user:",N),p(" Failed to create user: "+N.message),setTimeout(()=>p(""),8e3)}finally{l(!1)}},T=async(N,L)=>{try{l(!0),console.log("Resending invite to:",L),await ev(gl(zs,"users",N),{inviteStatus:"sent",lastInviteSent:new Date().toISOString()}),p(` Invitation resent to ${L}`),setTimeout(()=>p(""),5e3),y()}catch(V){console.error("Error resending invite:",V),p(" Failed to resend invitation"),setTimeout(()=>p(""),5e3)}finally{l(!1)}},C=async(N,L)=>{if(window.confirm(`Delete user ${L}?`))try{await gA(gl(zs,"users",N)),p(" User deleted successfully"),setTimeout(()=>p(""),3e3),y()}catch{p(" Failed to delete user"),setTimeout(()=>p(""),3e3)}};return n?v.jsxs(bn,{children:[v.jsx(ys,{children:v.jsxs(ns,{className:"flex items-center gap-2",children:[v.jsx(Dd,{className:"h-5 w-5"}),"Survey Users - ",e]})}),v.jsxs(hn,{className:"space-y-6",children:[m&&v.jsx("div",{className:`p-3 rounded-md ${m.includes("")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:m}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{children:[v.jsx(Bs,{htmlFor:"userName",children:"Name *"}),v.jsx(mt,{id:"userName",value:c.name,onChange:N=>d({...c,name:N.target.value}),placeholder:"Enter user name"})]}),v.jsxs("div",{children:[v.jsx(Bs,{htmlFor:"userEmail",children:"Email *"}),v.jsx(mt,{id:"userEmail",type:"email",value:c.email,onChange:N=>d({...c,email:N.target.value}),placeholder:"Enter email address"})]}),v.jsx("div",{className:"flex items-end",children:v.jsxs(De,{onClick:b,disabled:a,className:"w-full",children:[v.jsx(su,{className:"h-4 w-4 mr-2"}),a?"Creating...":"Create User"]})})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("h3",{className:"font-medium",children:["Survey Users (",t.length,")"]}),a?v.jsx("p",{children:"Loading users..."}):t.length===0?v.jsx("p",{className:"text-gray-500",children:"No survey users created yet"}):v.jsx("div",{className:"space-y-2",children:t.map(N=>v.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[v.jsx("div",{className:"flex-1",children:v.jsx("div",{className:"flex items-center gap-3",children:v.jsxs("div",{children:[v.jsx("p",{className:"font-medium",children:N.name}),v.jsx("p",{className:"text-sm text-gray-600",children:N.email}),v.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:N.role}),N.isActive?v.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[v.jsx(kd,{className:"h-3 w-3"}),"Active"]}):v.jsxs("span",{className:"flex items-center gap-1 text-xs text-yellow-600",children:[v.jsx(Od,{className:"h-3 w-3"}),"Pending Setup"]})]})]})})}),v.jsxs("div",{className:"flex items-center gap-2",children:[!N.isActive&&v.jsx(De,{size:"sm",variant:"outline",onClick:()=>T(N.id,N.email),disabled:a,title:"Resend invitation email",className:"text-blue-600 hover:text-blue-700",children:v.jsx(eS,{className:"h-4 w-4"})}),v.jsx(De,{size:"sm",variant:"outline",onClick:()=>C(N.id,N.email),title:"Delete user",children:v.jsx(uf,{className:"h-4 w-4"})})]})]},N.id))})]})]})]}):v.jsxs(bn,{children:[v.jsx(ys,{children:v.jsxs(ns,{className:"flex items-center gap-2",children:[v.jsx(Dd,{className:"h-5 w-5"}),"Survey Users"]})}),v.jsx(hn,{children:v.jsx("p",{className:"text-gray-500",children:"Please select a client to manage survey users"})})]})},WV=mf({apiKey:"AIzaSyB4XHuszSxau0JsCkOXfBcUdV7hegMezR0",authDomain:"vsurvey-b1ef3.firebaseapp.com",projectId:"vsurvey-b1ef3",storageBucket:"vsurvey-b1ef3.firebasestorage.app",messagingSenderId:"493587903081",appId:"1:493587903081:web:9d6fb396dbcc0fa24fa8f8",measurementId:"G-MN60GKD21G"},"testApp"),cT=uv(WV),XV=()=>{const[n,e]=D.useState(""),[t,r]=D.useState(""),[a,l]=D.useState(!1),c=async()=>{if(n)try{l(!0),r("Creating user...");const d=await tf(cT,n,"TempPassword123!");r(` User created: ${d.user.uid}`),await Jc(cT,n),r(m=>m+`
 Password reset email sent!`)}catch(d){r(` Error: ${d.code} - ${d.message}`)}finally{l(!1)}};return v.jsxs("div",{className:"p-4 border rounded",children:[v.jsx("h3",{className:"font-bold mb-4",children:"Firebase Auth Test"}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("input",{type:"email",value:n,onChange:d=>e(d.target.value),placeholder:"Test email",className:"border p-2 rounded w-full"}),v.jsx("button",{onClick:c,disabled:a,className:"bg-blue-500 text-white px-4 py-2 rounded disabled:opacity-50",children:a?"Testing...":"Test Create User & Send Email"}),t&&v.jsx("pre",{className:"bg-gray-100 p-2 rounded text-sm whitespace-pre-wrap",children:t})]})]})},JV=mf({apiKey:"AIzaSyB4XHuszSxau0JsCkOXfBcUdV7hegMezR0",authDomain:"vsurvey-b1ef3.firebaseapp.com",projectId:"vsurvey-b1ef3",storageBucket:"vsurvey-b1ef3.firebasestorage.app",messagingSenderId:"493587903081",appId:"1:493587903081:web:9d6fb396dbcc0fa24fa8f8",measurementId:"G-MN60GKD21G"},"secondary"),uT=uv(JV),ZV=()=>{const[n,e]=D.useState("clients"),[t,r]=D.useState(!1),[a,l]=D.useState([]),[c,d]=D.useState(!1),[m,p]=D.useState(!1),[y,b]=D.useState(null),[T,C]=D.useState({name:"",email:"",clientId:""}),[N,L]=D.useState("");D.useEffect(()=>{V()},[]);const V=async()=>{try{d(!0);const R=hu(zs,"superadmin","U0UjGVvDJoDbLtWAhyjp","clients"),O=await Zy(R),j=[];O.forEach(k=>{const I=k.data();j.push({id:k.id,name:I.name||`Client ${k.id.substring(0,8)}`,email:I.email||"No email provided",clientId:I.clientId||k.id,createdAt:I.createdAt||new Date().toISOString(),isActive:I.isActive!==void 0?I.isActive:!0,...I})}),console.log("Loaded clients:",j),l(j)}catch(S){console.error("Error loading clients:",S),L("Failed to load clients")}finally{d(!1)}},$=async S=>{if(S.preventDefault(),!T.name.trim()||!T.email.trim()){L("Please fill in all required fields");return}try{d(!0),p(!0),window.isCreatingUser=!0,console.log("Creating Firebase user for:",T.email.trim());const R=`Temp${Date.now()}!`,O=await tf(uT,T.email.trim(),R);console.log("Firebase user created successfully:",O.user.uid),console.log("Sending password reset email..."),await Jc(uT,T.email.trim()),console.log("Password reset email sent successfully");const k=hu(zs,"superadmin","U0UjGVvDJoDbLtWAhyjp","clients"),I={name:T.name.trim(),email:T.email.trim(),clientId:T.clientId.trim()||`client_${Date.now()}`,createdAt:new Date().toISOString(),isActive:!0,firebaseUid:O.user.uid};await yA(k,I),console.log("Client document created successfully"),C({name:"",email:"",clientId:""}),L(` Client created successfully! Password setup email sent to ${T.email} (Check spam folder if not received)`),setTimeout(()=>L(""),1e4),V()}catch(R){console.error("Detailed error creating client:",R),console.error("Error code:",R.code),console.error("Error message:",R.message),R.code==="auth/email-already-in-use"?L(" Email already exists in Firebase Auth"):R.code==="auth/weak-password"?L(" Password is too weak"):R.code==="auth/invalid-email"?L(" Invalid email address"):L(" Failed to create client: "+R.message),setTimeout(()=>L(""),8e3)}finally{d(!1),p(!1),window.isCreatingUser=!1}},Y=async S=>{if(window.confirm("Are you sure you want to delete this client admin?"))try{await gA(gl(zs,"superadmin","U0UjGVvDJoDbLtWAhyjp","clients",S)),L("Client admin deleted successfully!"),setTimeout(()=>L(""),3e3),V()}catch(R){console.error("Error deleting client:",R),L("Failed to delete client admin")}},K=async S=>{try{console.log("Creating Firebase user for:",S);const R=`Temp${Date.now()}!`,O=await tf(ts,S,R);console.log("Firebase user created:",O.user.uid),await $A(ts,"superadmin@vsurvey.com","superadmin123"),console.log("Re-authenticated as SuperAdmin"),await Jc(ts,S),console.log("Password reset email sent"),L(` Firebase user created and password setup email sent to ${S}`),setTimeout(()=>L(""),8e3)}catch(R){console.error("Error creating Firebase user:",R),R.code==="auth/email-already-in-use"?await ee(S):(L(` Failed to create user: ${R.message}`),setTimeout(()=>L(""),8e3))}},ee=async S=>{try{console.log("Attempting to send password reset email to:",S),await Jc(ts,S),console.log("Password reset email sent successfully"),L(` Password setup email sent to ${S}`),setTimeout(()=>L(""),5e3)}catch(R){console.error("Error sending password reset email:",R),console.error("Error code:",R.code),console.error("Error message:",R.message),R.code==="auth/user-not-found"?L(` User ${S} not found in Firebase Auth. Please create the user first.`):R.code==="auth/invalid-email"?L(` Invalid email address: ${S}`):L(` Failed to send email: ${R.message}`),setTimeout(()=>L(""),8e3)}},le=async(S,R)=>{try{await ev(gl(zs,"superadmin","U0UjGVvDJoDbLtWAhyjp","clients",S),{isActive:!R}),L("Client status updated successfully!"),setTimeout(()=>L(""),3e3),V()}catch(O){console.error("Error updating client status:",O),L("Failed to update client status")}},ae=()=>{window.location.reload()},M=()=>{switch(n){case"clients":return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"mb-8",children:[v.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Client Management"}),v.jsx("p",{className:"text-gray-600",children:"Create and manage client administrators"})]}),N&&v.jsx("div",{className:`mb-6 p-4 rounded-md ${N.includes("success")?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:N}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs(bn,{className:"lg:col-span-1",children:[v.jsx(ys,{children:v.jsxs(ns,{className:"flex items-center gap-2",children:[v.jsx(su,{className:"w-5 h-5"}),"Add Client Admin"]})}),v.jsx(hn,{children:v.jsxs("form",{onSubmit:$,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx(Bs,{htmlFor:"name",children:"Company Name *"}),v.jsx(mt,{id:"name",type:"text",value:T.name,onChange:S=>C({...T,name:S.target.value}),placeholder:"Enter company name",required:!0})]}),v.jsxs("div",{children:[v.jsx(Bs,{htmlFor:"email",children:"Admin Email *"}),v.jsx(mt,{id:"email",type:"email",value:T.email,onChange:S=>C({...T,email:S.target.value}),placeholder:"Enter admin email",required:!0}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password setup email will be sent automatically"})]}),v.jsxs("div",{children:[v.jsx(Bs,{htmlFor:"clientId",children:"Client ID (Optional)"}),v.jsx(mt,{id:"clientId",type:"text",value:T.clientId,onChange:S=>C({...T,clientId:S.target.value}),placeholder:"Auto-generated if empty"})]}),v.jsx(De,{type:"submit",disabled:c,className:"w-full",children:c?"Creating...":"Create Client Admin"})]})})]}),v.jsxs(bn,{className:"lg:col-span-2",children:[v.jsx(ys,{children:v.jsxs(ns,{className:"flex items-center gap-2",children:[v.jsx(Dd,{className:"w-5 h-5"}),"Client Administrators (",a.length,")"]})}),v.jsxs(hn,{children:[c&&v.jsx("p",{children:"Loading clients..."}),v.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[a.map(S=>v.jsx("div",{className:"border rounded-lg p-4 bg-white",children:v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx(bg,{className:"w-4 h-4 text-gray-500"}),v.jsx("h3",{className:"font-semibold",children:S.name}),v.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:S.isActive?"Active":"Inactive"})]}),v.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Email: ",S.email]}),v.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Client ID: ",S.clientId||S.id]}),v.jsxs("p",{className:"text-sm text-gray-500",children:["Created: ",new Date(S.createdAt).toLocaleDateString()]})]}),v.jsxs("div",{className:"flex gap-2 ml-4",children:[v.jsx(De,{variant:"outline",size:"sm",onClick:()=>K(S.email),title:"Create Firebase user & send password email",children:v.jsx(zN,{className:"w-4 h-4"})}),v.jsx(De,{variant:"outline",size:"sm",onClick:()=>ee(S.email),title:"Resend password setup email",children:v.jsx(eS,{className:"w-4 h-4"})}),v.jsx(De,{variant:"outline",size:"sm",onClick:()=>le(S.id,S.isActive),children:S.isActive?v.jsx(Od,{className:"w-4 h-4"}):v.jsx(kd,{className:"w-4 h-4"})}),v.jsx(De,{variant:"outline",size:"sm",onClick:()=>Y(S.id),children:v.jsx(uf,{className:"w-4 h-4"})})]})]})},S.id)),a.length===0&&!c&&v.jsx("p",{className:"text-gray-500 text-center py-8",children:"No client administrators found"})]})]})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-8",children:[v.jsx(bn,{children:v.jsx(hn,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Clients"}),v.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),v.jsx(bg,{className:"w-8 h-8 text-blue-500"})]})})}),v.jsx(bn,{children:v.jsx(hn,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Clients"}),v.jsx("p",{className:"text-2xl font-bold",children:a.filter(S=>S.isActive).length})]}),v.jsx(kd,{className:"w-8 h-8 text-green-500"})]})})}),v.jsx(bn,{children:v.jsx(hn,{className:"p-6",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inactive Clients"}),v.jsx("p",{className:"text-2xl font-bold",children:a.filter(S=>!S.isActive).length})]}),v.jsx(Od,{className:"w-8 h-8 text-red-500"})]})})})]})]});case"results":return v.jsxs("div",{className:"mb-8",children:[v.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Survey Results"}),v.jsx("p",{className:"text-gray-600",children:"View and analyze survey responses from all clients"}),v.jsx("div",{className:"mt-8 p-8 bg-gray-100 rounded-lg text-center",children:v.jsx("p",{className:"text-gray-500",children:"Survey results feature coming soon..."})})]});case"users":return v.jsxs("div",{children:[v.jsxs("div",{className:"mb-8",children:[v.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Survey User Management"}),v.jsx("p",{className:"text-gray-600",children:"Manage survey participants for each client"})]}),v.jsxs(bn,{className:"mb-6",children:[v.jsx(ys,{children:v.jsx(ns,{children:"Select Client"})}),v.jsxs(hn,{children:[v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(S=>v.jsxs(De,{variant:y?.id===S.id?"default":"outline",onClick:()=>b(S),className:"p-4 h-auto flex flex-col items-start",children:[v.jsx("div",{className:"font-medium",children:S.name}),v.jsx("div",{className:"text-sm opacity-70",children:S.email})]},S.id))}),a.length===0&&v.jsx("p",{className:"text-gray-500",children:"No clients available. Create clients first."})]})]}),v.jsxs(bn,{className:"mb-6 border-red-200",children:[v.jsx(ys,{children:v.jsx(ns,{className:"text-red-600",children:" Debug: Firebase Auth Test"})}),v.jsx(hn,{children:v.jsx(XV,{})})]}),v.jsx(YV,{selectedClientId:y?.id,clientName:y?.name})]});default:return null}};return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx(JT,{setActiveTab:e,onLogout:ae}),v.jsx(QV,{activeTab:n,setActiveTab:e,onSidebarToggle:r}),v.jsx("main",{className:`transition-all duration-300 pt-16 sm:pt-20 md:pt-24 p-4 sm:p-6 md:p-8 mt-10 ${t?"lg:ml-64":"lg:ml-16"}`,children:v.jsx("div",{className:"max-w-7xl mx-auto",children:M()})})]})},e3=({email:n,onComplete:e,isEdit:t=!1,existingProfile:r=null})=>{const[a,l]=D.useState({profileImage:r?.profileImage||null,name:r?.name||"",email:n,education:r?.education||"",description:r?.description||""}),[c,d]=D.useState(""),m=D.useRef(null),p=b=>{const T=b.target.files[0];if(T){const C=new FileReader;C.onload=N=>{l({...a,profileImage:N.target.result})},C.readAsDataURL(T)}},y=b=>{if(b.preventDefault(),!a.name.trim()||!a.education.trim()||!a.description.trim()){d("Please fill in all required fields");return}const T={profileImage:a.profileImage,name:a.name.trim(),email:a.email,education:a.education.trim(),description:a.description.trim(),setupComplete:!0};localStorage.setItem(`profile_${n}`,JSON.stringify(T)),e(T)};return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:v.jsxs(bn,{className:"w-full max-w-md",children:[v.jsx(ys,{children:v.jsx(ns,{className:"text-center",children:t?"Edit Profile":"Complete Your Profile"})}),v.jsxs(hn,{children:[v.jsxs("form",{onSubmit:y,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"PROFILE UPLOAD"}),v.jsxs("div",{className:"flex flex-col items-center gap-3",children:[v.jsx("div",{className:"w-20 h-20 rounded-full border-2 border-gray-300 flex items-center justify-center bg-gray-50 overflow-hidden",children:a.profileImage?v.jsx("img",{src:a.profileImage,alt:"Profile",className:"w-full h-full object-cover"}):v.jsx(nS,{className:"w-10 h-10 text-gray-400"})}),v.jsxs(De,{type:"button",variant:"outline",onClick:()=>m.current?.click(),className:"text-sm",children:[v.jsx(HN,{className:"w-4 h-4 mr-2"}),"Upload Image"]}),v.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:p,className:"hidden"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"NAME"}),v.jsx(mt,{type:"text",value:a.name,onChange:b=>l({...a,name:b.target.value}),placeholder:"Enter your name",required:!0,className:"rounded-[5px] border-gray-400 p-3 text-sm w-full"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"EMAIL"}),v.jsx(mt,{type:"email",value:a.email,disabled:!0,className:"rounded-[5px] border-gray-400 p-3 text-sm w-full bg-gray-100"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"EDUCATION"}),v.jsx(mt,{type:"text",value:a.education,onChange:b=>l({...a,education:b.target.value}),placeholder:"Enter your education",required:!0,className:"rounded-[5px] border-gray-400 p-3 text-sm w-full"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-bold text-black mb-2",children:"DESCRIPTION"}),v.jsx(mt,{type:"text",value:a.description,onChange:b=>l({...a,description:b.target.value}),placeholder:"Enter description",required:!0,className:"rounded-[5px] border-gray-400 p-3 text-sm w-full"})]}),v.jsx(De,{type:"submit",className:"w-full bg-gradient-to-r from-blue-700 to-purple-700 hover:from-blue-600 hover:to-purple-700 p-4 text-sm",children:t?"Update Profile":"Complete Setup"})]}),c&&v.jsx("p",{className:"mt-4 text-sm text-red-600",children:c})]})]})})},t3=()=>{D.useEffect(()=>{const n=FA(ts,async e=>{if(e&&e.emailVerified)try{const t=hu(zs,"users"),r=fA(t,mA("firebaseUid","==",e.uid)),a=await Zy(r);if(!a.empty){const l=a.docs[0];l.data().isActive||(await ev(gl(zs,"users",l.id),{isActive:!0,emailVerified:!0,passwordSet:!0,lastLoginAt:new Date().toISOString()}),console.log("User status updated to active:",e.email))}}catch(t){console.error("Error updating user status:",t)}});return()=>n()},[])};function n3(){const[n,e]=D.useState("personnel"),[t,r]=D.useState(!1),[a,l]=D.useState(null),[c,d]=D.useState(!1),[m,p]=D.useState(null),[y,b]=D.useState(!1);t3();const T=()=>{r(!1),l(null),e("personnel"),p(null),b(!1),localStorage.removeItem("currentClientAdmin")},C=$=>{p({...m,profile:$,isFirstTime:!1}),b(!1)},N=()=>{b(!0)},L=()=>{e("surveys")};D.useEffect(()=>{new URLSearchParams(window.location.hash.substring(1)).has("access_token")&&(r(!1),window.history.replaceState({},document.title,window.location.pathname));const K=ts.onAuthStateChanged(ae=>{if(ae){if(console.log("Auth state changed:",ae.email),ae.email==="superadmin@vsurvey.com"){console.log("SuperAdmin detected, staying on SuperAdmin dashboard");return}if(window.isCreatingUser){console.log("User creation in progress, skipping navigation");return}console.log("Client user detected, redirecting to client dashboard"),p({email:ae.email,isFirstTime:!1,profile:null}),l("client"),r(!0)}}),ee=localStorage.getItem("currentClientAdmin");if(ee){const ae=JSON.parse(ee),M=localStorage.getItem(`profile_${ae.email}`);if(M){const S=JSON.parse(M);p({email:ae.email,profile:S,isFirstTime:!1}),l("client"),r(!0)}}const{data:{subscription:le}}=FV.auth.onAuthStateChange((ae,M)=>{ae==="SIGNED_IN"&&M&&r(!1)});return()=>{K(),le.unsubscribe()}},[]);const V=()=>{switch(n){case"Users":return v.jsx(LE,{profile:m?.profile,onProfileEdit:N,onLogout:T,onNavigateToSurveys:L});case"Questions":return v.jsx(jU,{profile:m?.profile,onProfileEdit:N,onLogout:T,onNavigateToSurveys:L});case"surveys":return v.jsx(MU,{profile:m?.profile,onProfileEdit:N,onLogout:T,onNavigateToSurveys:L});case"assignuser":return v.jsx(GV,{profile:m?.profile,onProfileEdit:N,onLogout:T,onNavigateToSurveys:L});default:return v.jsx(LE,{profile:m?.profile,onProfileEdit:N,onLogout:T,onNavigateToSurveys:L})}};return v.jsx("div",{className:"min-h-screen bg-gray-50",children:t?a==="superadmin"?v.jsx(ZV,{}):m?.isFirstTime||y?v.jsx(e3,{email:m.email,onComplete:C,isEdit:y,existingProfile:m?.profile}):v.jsxs(v.Fragment,{children:[v.jsx(JT,{setActiveTab:e,onLogout:T}),v.jsx(lN,{activeTab:n,setActiveTab:e,onSidebarToggle:d}),v.jsx("main",{className:`transition-all duration-300 pt-16 sm:pt-20 md:pt-24 p-4 sm:p-6 md:p-8 mt-10 ${c?"lg:ml-64":"lg:ml-16"}`,children:V()})]}):v.jsx(LU,{onLogin:($,Y)=>{l($),$==="client"&&(p(Y),localStorage.setItem("currentClientAdmin",JSON.stringify({email:Y.email}))),r(!0)}})})}rC.createRoot(document.getElementById("root")).render(v.jsx(D.StrictMode,{children:v.jsx(yI,{children:v.jsx(n3,{})})}));
